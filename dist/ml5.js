!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ml5=e():t.ml5=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=500)}([function(t,e,n){var r=n(5),o=n(36),a=n(22),i=n(21),s=n(30),u=function(t,e,n){var c,l,p,h,f=t&u.F,d=t&u.G,v=t&u.S,m=t&u.P,g=t&u.B,y=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,b=d?o:o[e]||(o[e]={}),w=b.prototype||(b.prototype={});for(c in d&&(n=e),n)p=((l=!f&&y&&void 0!==y[c])?y:n)[c],h=g&&l?s(p,r):m&&"function"==typeof p?s(Function.call,p):p,y&&i(y,c,p,t&u.U),b[c]!=p&&a(b,c,h),m&&w[c]!=p&&(w[c]=p)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7);function o(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function a(t,e){if(!t)throw new Error(e)}function i(t,e){if(void 0===e&&(e=[]),Array.isArray(t))for(var n=0;n<t.length;++n)i(t[n],e);else e.push(t);return e}function s(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function u(t){if("float32"===t)return e.NAN_FLOAT32;if("int32"===t)return e.NAN_INT32;if("bool"===t)return e.NAN_BOOL;throw new Error("Unknown dtype "+t)}function c(t,n){if(isNaN(t))return!0;if("float32"===n)return!1;if("int32"===n)return t===e.NAN_INT32;if("bool"===n)return t===e.NAN_BOOL;throw new Error("Unknown dtype "+n)}function l(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function p(t){if(null==t)return[];if(t instanceof r.Tensor)return[t];var e,n=[],o=t;if(e=o,!Array.isArray(e)&&"object"!=typeof e)return[];for(var a in o){var s=i(o[a]).filter(function(t){return t instanceof r.Tensor});n.push.apply(n,s)}return n}e.shuffle=o,e.clamp=function(t,e,n){return Math.max(t,Math.min(e,n))},e.randUniform=function(t,e){return Math.random()*(e-t)+t},e.distSquared=function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},e.assert=a,e.assertShapesMatch=function(t,e,n){void 0===n&&(n=""),a(s(t,e),n+"Shapes "+t+" and "+e+" must match")},e.assertTypesMatch=function(t,e){a(t.dtype===e.dtype,"The dtypes of the first ("+t.dtype+") and second ("+e.dtype+") input must match")},e.flatten=i,e.inferShape=function(t){if(l(t))return[t.length];if(!Array.isArray(t))return[];for(var e=[];t instanceof Array;)e.push(t.length),t=t[0];return e},e.sizeFromShape=function(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e},e.isScalarShape=function(t){return 0===t.length},e.arraysEqual=s,e.isInt=function(t){return t%1==0},e.tanh=function(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)},e.sizeToSquarishShape=function(t){for(var e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]},e.createShuffledIndices=function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return o(e),e},e.rightPad=function(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)},e.repeatedTry=function(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,o){var a=0,i=function(){if(t())r();else{var s=e(++a);null!=n&&a>=n?o():setTimeout(i,s)}};setTimeout(i,0)})},e.getQueryParams=function(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")}),e},e.inferFromImplicitShape=function(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<=0)throw Error("Shapes can not be <= 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size ("+e+") must match the product of shape "+t);return t}if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a},e.NAN_INT32=1<<31,e.NAN_BOOL=255,e.NAN_FLOAT32=NaN,e.getNaN=u,e.isValNaN=c,e.squeezeShape=function(t,e){for(var n=[],r=[],o=0,a=0;a<t.length;++a){if(null!=e){if(e[o]===a&&t[a]>1)throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(null==e[o]||e[o]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),e[o]<=a&&o++}t[a]>1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}},e.getTypedArrayFromDType=function(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n},e.isTensorInList=function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1},e.checkForNaN=function(t,e,n){for(var r=0;r<t.length;r++)if(c(t[r],e))throw Error("The result of the '"+n+"' has NaNs.")},e.flattenNameArrayMap=function(t,e){var n=[];if(t instanceof r.Tensor)n.push(t);else for(var o=t,a=0;a<e.length;a++)n.push(o[e[a]]);return n},e.unflattenToNameArrayMap=function(t,e){if(t.length!==e.length)throw new Error("Cannot unflatten Tensor[], keys and arrays are not of same length.");for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n},e.hasEncodingLoss=function(t,e){return!("float32"===e||"int32"===e&&"float32"!==t||"bool"===e&&"bool"===t)},e.copyTypedArray=function(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e){for(var n=new Int32Array(t.length),r=0;r<n.length;++r)c(a=t[r],"int32")?n[r]=u("int32"):n[r]=a;return n}if("bool"===e){var o=new Uint8Array(t.length);for(r=0;r<o.length;++r){var a;c(a=t[r],"bool")?o[r]=u("bool"):0!==Math.round(a)&&(o[r]=1)}return o}throw new Error("Unknown data type "+e)},e.isTypedArray=l,e.bytesPerElement=function(t){if("float32"===t||"int32"===t)return 4;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)},e.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},e.extractTensorsFromContainer=function(t){return p(t)},e.extractTensorsFromAny=p},function(t,e,n){"use strict";(function(t){var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(285),i=n(9),s=n(284),u=n(77),c=n(1);function l(t,e){return null!=t.getExtension(e)}function p(t){if(0===t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=document.createElement("canvas");return 1===t?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}function h(t){if(null!=t){var e=t.getExtension("WEBGL_lose_context");if(null==e)throw new Error("Extension WEBGL_lose_context not supported on this browser.");e.loseContext()}}function f(t){var e=p(t);return null!=e&&(h(e),!0)}!function(t){t[t.NUMBER=0]="NUMBER",t[t.BOOLEAN=1]="BOOLEAN",t[t.STRING=2]="STRING"}(o=e.Type||(e.Type={})),e.URL_PROPERTIES=[{name:"DEBUG",type:o.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:o.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:o.BOOLEAN},{name:"WEBGL_VERSION",type:o.NUMBER},{name:"WEBGL_FLOAT_TEXTURE_ENABLED",type:o.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:o.BOOLEAN},{name:"BACKEND",type:o.STRING}];var d=["webgl","cpu"],v=function(){function t(t){this.features={},this.BACKEND_REGISTRY={},this.backends=this.BACKEND_REGISTRY,null!=t&&(this.features=t),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.setBackend=function(t,n){if(void 0===n&&(n=!1),!(t in e.ENV.backends))throw new Error("Backend type '"+t+"' not found in registry");e.ENV.globalMath=new u.NDArrayMath(t,n)},t.getBackend=function(){return e.ENV.initEngine(),e.ENV.currentBackendType},t.memory=function(){return e.ENV.engine.memory()},t.prototype.get=function(t){return t in this.features?this.features[t]:(this.features[t]=this.evaluateFeature(t),this.features[t])},t.prototype.set=function(t,e){this.features[t]=e},t.prototype.getBestBackendType=function(){for(var t=0;t<d.length;++t){var e=d[t];if(e in this.backends)return e}throw new Error("No backend found in registry.")},t.prototype.evaluateFeature=function(t){if("DEBUG"===t)return!1;if("BACKEND"===t)return this.getBestBackendType();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===t){var e=this.get("WEBGL_VERSION");return 0===e?0:function(t){if(0===t)return 0;var e,n=p(t);return e=l(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:l(n,"EXT_disjoint_timer_query")?1:0,null!=n&&h(n),e}(e)}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===t)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!a.isMobile();if("WEBGL_VERSION"===t)return f(2)?2:f(1)?1:0;if("WEBGL_FLOAT_TEXTURE_ENABLED"===t)return function(t){if(0===t)return!1;var e=p(t);if(1===t){if(!l(e,"OES_texture_float"))return!1}else if(!l(e,"EXT_color_buffer_float"))return!1;var n=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var o=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,o,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;e.readPixels(0,0,1,1,e.RGBA,e.FLOAT,new Float32Array(4));var i=e.getError()===e.NO_ERROR;return h(e),a&&i}(this.get("WEBGL_VERSION"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===t)return function(t){if(2!==t)return!1;var e=p(t),n=l(e,"WEBGL_get_buffer_sub_data_async");return h(e),n}(this.get("WEBGL_VERSION"));throw new Error("Unknown feature "+t+".")},t.prototype.setFeatures=function(t){this.reset(),this.features=t,this.backends={}},t.prototype.reset=function(){if(this.features=y(),null!=this.globalMath&&(this.globalMath.dispose(),this.globalMath=null,this.globalEngine=null),this.backends!==this.BACKEND_REGISTRY){for(var t in this.backends)this.backends[t].dispose();this.backends=this.BACKEND_REGISTRY}},t.prototype.setMath=function(t,n,r){if(void 0===r&&(r=!1),this.globalMath!==t){var o=!1;"string"==typeof n?(this.currentBackendType=n,n=e.ENV.findBackend(n)):(o=!0,this.currentBackendType="custom"),this.globalEngine=new s.Engine(n,o,r),this.globalMath=t}},t.prototype.findBackend=function(t){return this.backends[t]},t.prototype.addCustomBackend=function(t,e){if(t in this.backends)throw new Error(t+" backend was already registered");try{var n=e();return this.backends[t]=n,!0}catch(t){return!1}},t.prototype.registerBackend=function(t,e){if(t in this.BACKEND_REGISTRY)throw new Error(t+" backend was already registered as global");try{var n=e();return this.BACKEND_REGISTRY[t]=n,!0}catch(t){return!1}},Object.defineProperty(t.prototype,"math",{get:function(){return this.initEngine(),this.globalMath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initEngine=function(){null==this.globalEngine&&(this.globalMath=new u.NDArrayMath(e.ENV.get("BACKEND"),!1))},r([i.doc({heading:"Environment"})],t,"setBackend",null),r([i.doc({heading:"Environment"})],t,"getBackend",null),r([i.doc({heading:"Performance",subheading:"Memory"})],t,"memory",null),t}();e.Environment=v;var m,g="dljsflags";function y(){var t={};if("undefined"==typeof window)return t;var n=c.getQueryParams(window.location.search);if(g in n){var r={};n[g].split(",").forEach(function(t){var e=t.split(":"),n=e[0],o=e[1];r[n]=o}),e.URL_PROPERTIES.forEach(function(e){e.name in r&&(console.log("Setting feature override from URL "+e.name+": "+r[e.name]),e.type===o.NUMBER?t[e.name]=+r[e.name]:e.type===o.BOOLEAN?t[e.name]="true"===r[e.name]:e.type===o.STRING?t[e.name]=r[e.name]:console.warn("Unknown URL param: "+e.name+"."))})}return t}e.ENV=((m=function(){var e;if("undefined"!=typeof window)e=window;else{if(void 0===t)throw new Error("Could not find a global object");e=t}return e}()).ENV=m.ENV||new v(y()),m.ENV)}).call(this,n(73))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(286),o=n(147);e.tidy=o.Tracking.tidy,e.keep=o.Tracking.keep,e.dispose=o.Tracking.dispose,e.time=o.Tracking.time,e.grad=r.Gradients.grad,e.valueAndGrad=r.Gradients.valueAndGrad,e.grads=r.Gradients.grads,e.valueAndGrads=r.Gradients.valueAndGrads,e.variableGrads=r.Gradients.variableGrads,e.customGrad=r.Gradients.customGrad},function(t,e,n){var r=n(8);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9),c=n(2),l=n(11),p=n(165),h=n(1),f=function(){function t(t,e,n){if(this.shape=t,this.dtype=e,this.values=n,null!=n){var r=n.length,o=h.sizeFromShape(t);h.assert(r===o,"Length of values '"+r+"' does not match the size inferred by the shape '"+o+"'")}this.values=n||h.getTypedArrayFromDType(e,h.sizeFromShape(t)),this.strides=k(t),this.size=h.sizeFromShape(t)}return t.prototype.set=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0===e.length&&(e=[0]),h.assert(e.length===this.rank,"The number of provided coordinates ("+e.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(e);this.values[r]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return d.make(this.shape,{values:this.values},this.dtype)},a([u.doc({heading:"Tensors",subheading:"Creation"})],t.prototype,"set",null),a([u.doc({heading:"Tensors",subheading:"Creation"})],t.prototype,"get",null),a([u.doc({heading:"Tensors",subheading:"Creation"})],t.prototype,"toTensor",null),t=a([u.doc({heading:"Tensors",subheading:"Classes"})],t)}();e.TensorBuffer=f;var d=function(){function t(t,n,r,o){this.isDisposed=!1,this.size=h.sizeFromShape(t),null!=r&&h.assert(this.size===r.length,"Constructing tensor of shape ("+this.size+") should match the length of values ("+r.length+")"),this.shape=t,this.dtype=n||"float32",this.strides=k(t),this.dataId=null!=o?o:{},this.id=e.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",c.ENV.engine.registerTensor(this),null!=r&&c.ENV.engine.write(this.dataId,r)}return e=t,t.ones=function(t,e){return l.ones(t,e)},t.zeros=function(t,e){return l.zeros(t,e)},t.onesLike=function(t){return l.onesLike(t)},t.zerosLike=function(t){return l.zerosLike(t)},t.like=function(t){return l.clone(t)},t.make=function(t,n,r){return new e(t,r,n.values,n.dataId)},t.fromPixels=function(t,e){return void 0===e&&(e=3),l.fromPixels(t,e)},t.rand=function(t,e,n){return l.rand(t,e,n)},t.randNormal=function(t,e,n,r,o){return void 0===e&&(e=0),void 0===n&&(n=1),l.randomNormal(t,e,n,r,o)},t.randTruncatedNormal=function(t,e,n,r,o){return void 0===e&&(e=0),void 0===n&&(n=1),l.truncatedNormal(t,e,n,r,o)},t.randUniform=function(t,e,n,r){return l.randomUniform(t,e,n,r)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),h.assert(1===this.size,"The array must have only 1 element."),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.asType=function(t){return this.throwIfDisposed(),l.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.throwIfDisposed(),0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.dataSync()[n]},t.prototype.val=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return 0===t.length&&(t=[0]),this.throwIfDisposed(),[4,this.data()];case 1:return e.sent(),[2,this.get.apply(this,t)]}})})},t.prototype.locToIndex=function(t){if(this.throwIfDisposed(),0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(this.throwIfDisposed(),0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},t.prototype.getValues=function(){return this.dataSync()},t.prototype.getValuesAsync=function(){return this.data()},t.prototype.buffer=function(){return l.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.data=function(){return i(this,void 0,void 0,function(){return s(this,function(t){return this.throwIfDisposed(),[2,c.ENV.engine.read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),c.ENV.engine.readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,c.ENV.engine.disposeTensor(this))},t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),l.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),l.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),l.expandDims(this,t)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),l.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),l.clone(this)},t.prototype.toString=function(){return p.tensorToString(this,!0)},t.prototype.tile=function(t){return this.throwIfDisposed(),l.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),l.gather(this,t)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),l.matMul(this,t,e,n)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),l.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),l.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),l.reverse(this,t)},t.prototype.concat=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),l.concat([this,t],e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),l.stack([this,t],e)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),l.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&&(n=.001),this.throwIfDisposed(),l.batchNormalization(this,t,e,n,r,o)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.sum(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),l.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),l.argMax(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),l.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),l.addStrict(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),l.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),l.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),l.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),l.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),l.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),l.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),l.div(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),l.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),l.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),l.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),l.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),l.maximumStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),l.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),l.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),l.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),l.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),l.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),l.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),l.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),l.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),l.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),l.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),l.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),l.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),l.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),l.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),l.logicalOr(this,t)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),l.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),l.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),l.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),l.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),l.floor(this)},t.prototype.exp=function(){return this.throwIfDisposed(),l.exp(this)},t.prototype.log=function(){return this.throwIfDisposed(),l.log(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),l.sqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),l.square(this)},t.prototype.abs=function(){return this.throwIfDisposed(),l.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),l.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),l.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),l.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),l.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),l.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),l.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),l.sigmoid(this)},t.prototype.sin=function(){return this.throwIfDisposed(),l.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),l.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),l.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),l.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),l.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),l.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),l.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),l.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),l.tanh(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),l.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),l.softmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),l.image.resizeBilinear(this,t,e)},t.prototype.conv1d=function(t,e,n,r){return this.throwIfDisposed(),l.conv1d(this,t,e,n,r)},t.prototype.conv2d=function(t,e,n,r){return this.throwIfDisposed(),l.conv2d(this,t,e,n,r)},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),l.conv2dTranspose(this,t,e,n,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,o){return void 0===r&&(r=[1,1]),this.throwIfDisposed(),l.depthwiseConv2d(this,t,e,n,r,o)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),l.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),l.maxPool(this,t,e,n,r)},t.prototype.minPool=function(t,e,n,r){return this.throwIfDisposed(),l.minPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r,o){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===o&&(o="acrossChannels"),l.localResponseNormalization(this,t,e,n,r,o)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),w.variable(this,t,e,n)},t.nextId=0,a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"flatten",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"asScalar",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"as1D",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"as2D",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"as3D",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"as4D",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"asType",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"buffer",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"data",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"dataSync",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"dispose",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"toFloat",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"toInt",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"toBool",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"print",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"reshape",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"reshapeAs",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"expandDims",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"squeeze",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"clone",null),a([u.doc({heading:"Tensors",subheading:"Classes"})],t.prototype,"toString",null),t=e=a([u.doc({heading:"Tensors",subheading:"Classes"})],t);var e}();e.Tensor=d,e.NDArray=d;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,e){return l.scalar(t,e)},e}(d);e.Scalar=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,e){return l.tensor1d(t,e)},e}(d);e.Tensor1D=m,e.Array1D=m;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,e,n){return l.tensor2d(e,t,n)},e}(d);e.Tensor2D=g,e.Array2D=g;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,e,n){return l.tensor3d(e,t,n)},e}(d);e.Tensor3D=y,e.Array3D=y;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,e,n){return l.tensor4d(e,t,n)},e}(d);e.Tensor4D=b,e.Array4D=b;var w=function(t){function e(e,r,o){void 0===r&&(r=!0);var a=t.call(this,e.shape,e.dtype,null,e.dataId)||this;return a.trainable=r,a.name=o,null==a.name&&(a.name=n.nextVarId.toString(),n.nextVarId++),c.ENV.engine.registerVariable(a),a}return o(e,t),n=e,e.variable=function(t,e,r,o){return void 0===e&&(e=!0),null!=o&&o!==t.dtype&&(t=t.asType(o)),new n(t,e,r)},e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!h.arraysEqual(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");c.ENV.engine.disposeTensor(this),this.dataId=t.dataId,c.ENV.engine.registerTensor(this)},e.nextVarId=0,a([u.doc({heading:"Tensors",subheading:"Classes"})],e.prototype,"assign",null),a([u.doc({heading:"Tensors",subheading:"Creation"})],e,"variable",null),e=n=a([u.doc({heading:"Tensors",subheading:"Classes"})],e);var n}(d);e.Variable=w;var x=w.variable;function k(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}e.variable=x},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc=function(t){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}}},function(t,e,n){var r=n(93)("wks"),o=n(57),a=n(5).Symbol,i="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=i&&a[t]||(i?a:o)("Symbol."+t))}).store=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(166),o=n(163),a=n(162),i=n(161),s=n(164),u=n(160),c=n(159),l=n(158),p=n(157),h=n(156),f=n(102),d=n(155),v=n(154),m=n(153),g=n(152),y=n(151),b=n(150),w=n(149),x=n(148);e.batchNormalization=o.BatchNormOps.batchNormalization,e.batchNormalization2d=o.BatchNormOps.batchNormalization2d,e.batchNormalization3d=o.BatchNormOps.batchNormalization3d,e.batchNormalization4d=o.BatchNormOps.batchNormalization4d,e.concat=s.ConcatOps.concat,e.concat1d=s.ConcatOps.concat1d,e.concat2d=s.ConcatOps.concat2d,e.concat3d=s.ConcatOps.concat3d,e.concat4d=s.ConcatOps.concat4d,e.conv1d=u.ConvOps.conv1d,e.conv2d=u.ConvOps.conv2d,e.conv2dTranspose=u.ConvOps.conv2dTranspose,e.depthwiseConv2d=u.ConvOps.depthwiseConv2d,e.matMul=f.MatmulOps.matMul,e.matrixTimesVector=f.MatmulOps.matrixTimesVector,e.outerProduct=f.MatmulOps.outerProduct,e.vectorTimesMatrix=f.MatmulOps.vectorTimesMatrix,e.avgPool=v.PoolOps.avgPool,e.maxPool=v.PoolOps.maxPool,e.minPool=v.PoolOps.minPool,e.transpose=w.TransposeOps.transpose,e.reverse=g.ReverseOps.reverse,e.reverse1d=g.ReverseOps.reverse1d,e.reverse2d=g.ReverseOps.reverse2d,e.reverse3d=g.ReverseOps.reverse3d,e.reverse4d=g.ReverseOps.reverse4d,e.slice=y.SliceOps.slice,e.slice1d=y.SliceOps.slice1d,e.slice2d=y.SliceOps.slice2d,e.slice3d=y.SliceOps.slice3d,e.slice4d=y.SliceOps.slice4d,e.argMax=m.ReductionOps.argMax,e.argMin=m.ReductionOps.argMin,e.logSumExp=m.ReductionOps.logSumExp,e.max=m.ReductionOps.max,e.mean=m.ReductionOps.mean,e.min=m.ReductionOps.min,e.moments=m.ReductionOps.moments,e.sum=m.ReductionOps.sum,e.equal=i.CompareOps.equal,e.equalStrict=i.CompareOps.equalStrict,e.greater=i.CompareOps.greater,e.greaterStrict=i.CompareOps.greaterStrict,e.greaterEqual=i.CompareOps.greaterEqual,e.greaterEqualStrict=i.CompareOps.greaterEqualStrict,e.less=i.CompareOps.less,e.lessStrict=i.CompareOps.lessStrict,e.lessEqual=i.CompareOps.lessEqual,e.lessEqualStrict=i.CompareOps.lessEqualStrict,e.notEqual=i.CompareOps.notEqual,e.notEqualStrict=i.CompareOps.notEqualStrict,e.logicalNot=l.LogicalOps.logicalNot,e.logicalAnd=l.LogicalOps.logicalAnd,e.logicalOr=l.LogicalOps.logicalOr,e.logicalXor=l.LogicalOps.logicalXor,e.where=l.LogicalOps.where,e.abs=x.UnaryOps.abs,e.acos=x.UnaryOps.acos,e.asin=x.UnaryOps.asin,e.atan=x.UnaryOps.atan,e.ceil=x.UnaryOps.ceil,e.clipByValue=x.UnaryOps.clipByValue,e.cos=x.UnaryOps.cos,e.cosh=x.UnaryOps.cosh,e.elu=x.UnaryOps.elu,e.exp=x.UnaryOps.exp,e.floor=x.UnaryOps.floor,e.leakyRelu=x.UnaryOps.leakyRelu,e.log=x.UnaryOps.log,e.neg=x.UnaryOps.neg,e.prelu=x.UnaryOps.prelu,e.relu=x.UnaryOps.relu,e.selu=x.UnaryOps.selu,e.sigmoid=x.UnaryOps.sigmoid,e.sin=x.UnaryOps.sin,e.sinh=x.UnaryOps.sinh,e.sqrt=x.UnaryOps.sqrt,e.square=x.UnaryOps.square,e.step=x.UnaryOps.step,e.tan=x.UnaryOps.tan,e.tanh=x.UnaryOps.tanh,e.add=a.BinaryOps.add,e.addStrict=a.BinaryOps.addStrict,e.div=a.BinaryOps.div,e.divStrict=a.BinaryOps.divStrict,e.maximum=a.BinaryOps.maximum,e.maximumStrict=a.BinaryOps.maximumStrict,e.minimum=a.BinaryOps.minimum,e.minimumStrict=a.BinaryOps.minimumStrict,e.mul=a.BinaryOps.mul,e.mulStrict=a.BinaryOps.mulStrict,e.pow=a.BinaryOps.pow,e.powStrict=a.BinaryOps.powStrict,e.sub=a.BinaryOps.sub,e.subStrict=a.BinaryOps.subStrict,e.norm=d.NormOps.norm,e.cast=r.ArrayOps.cast,e.clone=r.ArrayOps.clone,e.fromPixels=r.ArrayOps.fromPixels,e.ones=r.ArrayOps.ones,e.onesLike=r.ArrayOps.onesLike,e.zeros=r.ArrayOps.zeros,e.zerosLike=r.ArrayOps.zerosLike,e.rand=r.ArrayOps.rand,e.randomNormal=r.ArrayOps.randomNormal,e.truncatedNormal=r.ArrayOps.truncatedNormal,e.randomUniform=r.ArrayOps.randomUniform,e.reshape=r.ArrayOps.reshape,e.squeeze=r.ArrayOps.squeeze,e.tile=r.ArrayOps.tile,e.gather=r.ArrayOps.gather,e.oneHot=r.ArrayOps.oneHot,e.linspace=r.ArrayOps.linspace,e.range=r.ArrayOps.range,e.buffer=r.ArrayOps.buffer,e.fill=r.ArrayOps.fill,e.tensor=r.ArrayOps.tensor,e.scalar=r.ArrayOps.scalar,e.tensor1d=r.ArrayOps.tensor1d,e.tensor2d=r.ArrayOps.tensor2d,e.tensor3d=r.ArrayOps.tensor3d,e.tensor4d=r.ArrayOps.tensor4d,e.print=r.ArrayOps.print,e.expandDims=r.ArrayOps.expandDims,e.stack=r.ArrayOps.stack,e.pad=r.ArrayOps.pad,e.pad1d=r.ArrayOps.pad1d,e.pad2d=r.ArrayOps.pad2d,e.pad3d=r.ArrayOps.pad3d,e.pad4d=r.ArrayOps.pad4d,e.basicLSTMCell=h.LSTMOps.basicLSTMCell,e.multiRNNCell=h.LSTMOps.multiRNNCell,e.softmax=b.SoftmaxOps.softmax,e.localResponseNormalization=p.LRNOps.localResponseNormalization;var k=n(7),E=n(68);k.Tensor,E.Rank,k.Tensor3D,k.Tensor4D,e.losses={softmaxCrossEntropy:b.SoftmaxOps.softmaxCrossEntropy},e.image={resizeBilinear:c.ImageOps.resizeBilinear}},function(t,e,n){var r=n(33),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(4),o=n(200),a=n(35),i=Object.defineProperty;e.f=n(14)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),o)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.operation=function(t,e,n){var o=n.value;return n.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.tidy(e,function(){return o.apply(void 0,t)})},n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.disposeTransientArrays=function(t,e){},t.prototype.dispose=function(){},t}();e.Operation=r},function(t,e,n){var r=n(34);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),o=n(131),a=n(131);e.getUnorderedEvaluationSet=function(t,e){var n={},r={},o=[],a=t.slice();e.forEach(function(t){return n[t.id]=t});for(var i=function(){var t=a.pop();null==r[t.id]&&(null==n[t.id]&&Object.keys(t.inputs).map(function(e){return t.inputs[e]}).forEach(function(t){return a.push(t.node)}),o.push(t),r[t.id]=t)};0!==a.length;)i();return o},e.getOrderedEvaluationSet=function(t){var e=[],n={},r={},i=new a.PriorityQueue(function(t,e){return o.defaultCompare(r[t.id],r[e.id])},function(t,e){return n[t.id]=e});for(t.forEach(function(t){return r[t.id]=0}),t.forEach(function(e){return Object.keys(e.inputs).map(function(t){return e.inputs[t]}).forEach(function(e){-1!==t.indexOf(e.node)&&r[e.node.id]++})}),t.forEach(function(t){return i.enqueue(t)});!i.empty();)e.unshift(i.dequeue()),Object.keys(e[0].inputs).map(function(t){return e[0].inputs[t]}).forEach(function(e){-1!==t.indexOf(e.node)&&(r[e.node.id]--,i.update(e.node,n[e.node.id]))});return e},e.isInputNode=function(t){return 0===Object.keys(t.inputs).length},e.shouldBackProp=function(t){return!(t.node instanceof r.ConstantNode)},e.isPassthroughNode=function(t,e){for(var n=Object.keys(t.inputs),r=0;r<n.length;r++){var o=t.inputs[n[r]];if(e.get(o,!0)===e.get(t.output,!0))return!0}return!1}},function(t,e,n){var r=n(0),o=n(6),a=n(34),i=/"/g,s=function(t,e,n,r){var o=String(a(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(i,"&quot;")+'"'),s+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){var r=n(5),o=n(22),a=n(23),i=n(57)("src"),s=Function.toString,u=(""+s).split("toString");n(36).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(a(n,"name")||o(n,"name",e)),t[e]!==n&&(c&&(a(n,i)||o(n,i,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||s.call(this)})},function(t,e,n){var r=n(13),o=n(58);t.exports=n(14)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){var r=n(23),o=n(17),a=n(127)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},function(t,e,n){var r=n(71),o=n(58),a=n(27),i=n(35),s=n(23),u=n(200),c=Object.getOwnPropertyDescriptor;e.f=n(14)?c:function(t,e){if(t=a(t),e=i(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(72),o=n(34);t.exports=function(t){return r(o(t))}},function(t,e,n){"use strict";var r=n(6);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(18);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(30),o=n(72),a=n(17),i=n(12),s=n(110);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,p=6==t,h=5==t||p,f=e||s;return function(e,s,d){for(var v,m,g=a(e),y=o(g),b=r(s,d,3),w=i(y.length),x=0,k=n?f(e,w):u?f(e,0):void 0;w>x;x++)if((h||x in y)&&(m=b(v=y[x],x,g),t))if(n)k[x]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:k.push(v)}else if(l)return!1;return p?-1:c||l?l:k}}},function(t,e,n){var r=n(0),o=n(36),a=n(6);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.dict={}}return t.prototype.get=function(t,e){if(void 0===e&&(e=!1),!e&&void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");var n=this.dict[t.id];if(!e&&null===n)throw new Error("tensor "+t.id+" has null array.");return n},t.prototype.delete=function(t){delete this.dict[t.id]},t.prototype.nullify=function(t){this.dict[t.id]=null},t.prototype.disposeArray=function(t){if(void 0!==this.dict[t.id]){var e=this.dict[t.id];null!==e&&(e.dispose(),this.dict[t.id]=null)}},t.prototype.size=function(){return Object.keys(this.dict).length},t.prototype.dispose=function(){var t=this;Object.keys(this.dict).forEach(function(e){var n=t.dict[+e];n&&n.dispose()}),this.dict={}},t.prototype.hasNullArray=function(t){if(void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");return null===this.dict[t.id]},t}();e.TensorArrayMapBase=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.set=function(t,e){this.dict[t.id]=e},e}(a);e.TensorArrayMap=i;var s=function(t){function e(e){var n=t.call(this)||this;return n.math=e,n}return o(e,t),e.prototype.add=function(t,e){if(null==this.dict[t.id])this.dict[t.id]=this.math.keep(e);else{var n=this.get(t),r=this.math.keep(this.math.addStrict(n,e));this.dict[t.id]=r,n.dispose()}},e}(a);e.SummedTensorArrayMap=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);function o(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function a(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[a++]):o.push(e[i++]);return o}e.axesAreInnerMostDims=o,e.combineLocations=a,e.computeOutAndReduceShapes=function(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map(function(e){return t[e]})]},e.expandShapeToKeepDim=function(t,e){return a(t,e.map(function(t){return 1}),e)},e.parseAxisParam=function(t,e){var n=e.length;return t=null==t?e.map(function(t,e){return e}):[].concat(t),r.assert(t.every(function(t){return t>=-n&&t<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t),r.assert(t.every(function(t){return r.isInt(t)}),"All values in axis param must be integers but got axis "+t),t.map(function(t){return t<0?n+t:t})},e.assertAxesAreInnerMostDims=function(t,e,n){r.assert(o(e,n),t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input.")},e.getAxesPermutation=function(t,e){if(o(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n},e.getUndoAxesPermutation=function(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})},e.getInnerMostAxes=function(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}},function(t,e,n){var r=n(179),o=n(0),a=n(93)("metadata"),i=a.store||(a.store=new(n(176))),s=function(t,e,n){var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}var a=o.get(e);if(!a){if(!n)return;o.set(e,a=new r)}return a};t.exports={store:i,map:s,has:function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){s(n,r,!0).set(t,e)},keys:function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){o(o.S,"Reflect",t)}}},function(t,e,n){"use strict";if(n(14)){var r=n(56),o=n(5),a=n(6),i=n(0),s=n(83),u=n(104),c=n(30),l=n(50),p=n(58),h=n(22),f=n(48),d=n(33),v=n(12),m=n(174),g=n(54),y=n(35),b=n(23),w=n(70),x=n(8),k=n(17),E=n(113),S=n(53),T=n(25),O=n(52).f,_=n(111),A=n(57),C=n(10),N=n(31),M=n(92),P=n(85),R=n(108),I=n(63),D=n(88),F=n(51),B=n(109),L=n(184),z=n(13),j=n(26),V=z.f,G=j.f,U=o.RangeError,q=o.TypeError,W=o.Uint8Array,X=Array.prototype,K=u.ArrayBuffer,H=u.DataView,Q=N(0),Y=N(2),J=N(3),Z=N(4),$=N(5),tt=N(6),et=M(!0),nt=M(!1),rt=R.values,ot=R.keys,at=R.entries,it=X.lastIndexOf,st=X.reduce,ut=X.reduceRight,ct=X.join,lt=X.sort,pt=X.slice,ht=X.toString,ft=X.toLocaleString,dt=C("iterator"),vt=C("toStringTag"),mt=A("typed_constructor"),gt=A("def_constructor"),yt=s.CONSTR,bt=s.TYPED,wt=s.VIEW,xt=N(1,function(t,e){return Ot(P(t,t[gt]),e)}),kt=a(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Et=!!W&&!!W.prototype.set&&a(function(){new W(1).set({})}),St=function(t,e){var n=d(t);if(n<0||n%e)throw U("Wrong offset!");return n},Tt=function(t){if(x(t)&&bt in t)return t;throw q(t+" is not a typed array!")},Ot=function(t,e){if(!(x(t)&&mt in t))throw q("It is not a typed array constructor!");return new t(e)},_t=function(t,e){return At(P(t,t[gt]),e)},At=function(t,e){for(var n=0,r=e.length,o=Ot(t,r);r>n;)o[n]=e[n++];return o},Ct=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Nt=function(t){var e,n,r,o,a,i,s=k(t),u=arguments.length,l=u>1?arguments[1]:void 0,p=void 0!==l,h=_(s);if(void 0!=h&&!E(h)){for(i=h.call(s),r=[],e=0;!(a=i.next()).done;e++)r.push(a.value);s=r}for(p&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(s.length),o=Ot(this,n);n>e;e++)o[e]=p?l(s[e],e):s[e];return o},Mt=function(){for(var t=0,e=arguments.length,n=Ot(this,e);e>t;)n[t]=arguments[t++];return n},Pt=!!W&&a(function(){ft.call(new W(1))}),Rt=function(){return ft.apply(Pt?pt.call(Tt(this)):Tt(this),arguments)},It={copyWithin:function(t,e){return L.call(Tt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Z(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return B.apply(Tt(this),arguments)},filter:function(t){return _t(this,Y(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Tt(this),arguments)},lastIndexOf:function(t){return it.apply(Tt(this),arguments)},map:function(t){return xt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Tt(this),arguments)},reduceRight:function(t){return ut.apply(Tt(this),arguments)},reverse:function(){for(var t,e=Tt(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return J(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Tt(this),t)},subarray:function(t,e){var n=Tt(this),r=n.length,o=g(t,r);return new(P(n,n[gt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-o))}},Dt=function(t,e){return _t(this,pt.call(Tt(this),t,e))},Ft=function(t){Tt(this);var e=St(arguments[1],1),n=this.length,r=k(t),o=v(r.length),a=0;if(o+e>n)throw U("Wrong length!");for(;a<o;)this[e+a]=r[a++]},Bt={entries:function(){return at.call(Tt(this))},keys:function(){return ot.call(Tt(this))},values:function(){return rt.call(Tt(this))}},Lt=function(t,e){return x(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Lt(t,e=y(e,!0))?p(2,t[e]):G(t,e)},jt=function(t,e,n){return!(Lt(t,e=y(e,!0))&&x(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};yt||(j.f=zt,z.f=jt),i(i.S+i.F*!yt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:jt}),a(function(){ht.call({})})&&(ht=ft=function(){return ct.call(this)});var Vt=f({},It);f(Vt,Bt),h(Vt,dt,Bt.values),f(Vt,{slice:Dt,set:Ft,constructor:function(){},toString:ht,toLocaleString:Rt}),Ct(Vt,"buffer","b"),Ct(Vt,"byteOffset","o"),Ct(Vt,"byteLength","l"),Ct(Vt,"length","e"),V(Vt,vt,{get:function(){return this[bt]}}),t.exports=function(t,e,n,u){var c=t+((u=!!u)?"Clamped":"")+"Array",p="get"+t,f="set"+t,d=o[c],g=d||{},y=d&&T(d),b=!d||!s.ABV,k={},E=d&&d.prototype,_=function(t,n){V(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[p](n*e+r.o,kt)}(this,n)},set:function(t){return function(t,n,r){var o=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[f](n*e+o.o,r,kt)}(this,n,t)},enumerable:!0})};b?(d=n(function(t,n,r,o){l(t,d,c,"_d");var a,i,s,u,p=0,f=0;if(x(n)){if(!(n instanceof K||"ArrayBuffer"==(u=w(n))||"SharedArrayBuffer"==u))return bt in n?At(d,n):Nt.call(d,n);a=n,f=St(r,e);var g=n.byteLength;if(void 0===o){if(g%e)throw U("Wrong length!");if((i=g-f)<0)throw U("Wrong length!")}else if((i=v(o)*e)+f>g)throw U("Wrong length!");s=i/e}else s=m(n),a=new K(i=s*e);for(h(t,"_d",{b:a,o:f,l:i,e:s,v:new H(a)});p<s;)_(t,p++)}),E=d.prototype=S(Vt),h(E,"constructor",d)):a(function(){d(1)})&&a(function(){new d(-1)})&&D(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,r,o){var a;return l(t,d,c),x(n)?n instanceof K||"ArrayBuffer"==(a=w(n))||"SharedArrayBuffer"==a?void 0!==o?new g(n,St(r,e),o):void 0!==r?new g(n,St(r,e)):new g(n):bt in n?At(d,n):Nt.call(d,n):new g(m(n))}),Q(y!==Function.prototype?O(g).concat(O(y)):O(g),function(t){t in d||h(d,t,g[t])}),d.prototype=E,r||(E.constructor=d));var A=E[dt],C=!!A&&("values"==A.name||void 0==A.name),N=Bt.values;h(d,mt,!0),h(E,bt,c),h(E,wt,!0),h(E,gt,d),(u?new d(1)[vt]==c:vt in E)||V(E,vt,{get:function(){return c}}),k[c]=d,i(i.G+i.W+i.F*(d!=g),k),i(i.S,c,{BYTES_PER_ELEMENT:e}),i(i.S+i.F*a(function(){g.of.call(d,1)}),c,{from:Nt,of:Mt}),"BYTES_PER_ELEMENT"in E||h(E,"BYTES_PER_ELEMENT",e),i(i.P,c,It),F(c),i(i.P+i.F*Et,c,{set:Ft}),i(i.P+i.F*!C,c,Bt),r||E.toString==ht||(E.toString=ht),i(i.P+i.F*a(function(){new d(1).slice()}),c,{slice:Dt}),i(i.P+i.F*(a(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!a(function(){E.toLocaleString.call([1,2])})),c,{toLocaleString:Rt}),I[c]=C?A:N,r||C||h(E,dt,N)}}else t.exports=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(1),a=n(46),i=n(67);function s(t){var e,n=t.shapeInfo.logicalShape;switch(n.length){case 0:return"\n    float get"+(e=t.name).charAt(0).toUpperCase()+e.slice(1)+"() {\n      return sample("+e+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.shapeInfo.texShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[0],u=n[1];if(o.arraysEqual(e,n))return"\n    float "+a+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+u+".0, "+i+".0);\n      return sample("+r+", uv);\n    }\n  ";var c=o.squeezeShape(e),l=c.newShape,p=c.keptDims,h=l;if(h.length<e.length){var v=f(t,h);return"\n      "+s(v)+"\n      float "+a+"(int row, int col) {\n        return "+a+"("+d(["row","col"],p)+");\n      }\n    "}if(1===u)return"\n    float "+a+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+i+".0);\n      return sample("+r+", uv);\n    }\n  ";if(1===i)return"\n    float "+a+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+u+".0, 0.5);\n      return sample("+r+", uv);\n    }\n  ";return"\n  float "+a+"(int row, int col) {\n    vec2 uv = UVfrom2D("+i+", "+u+", "+e[1]+", row, col);\n    return sample("+r+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.texShape,n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[0],u=e[1],c=n[1]*n[2],l=n[2],p=o.squeezeShape(n),h=p.newShape,v=p.keptDims,m=h;if(m.length<n.length){var g=f(t,m);return"\n        "+s(g)+"\n        float "+a+"(int row, int col, int depth) {\n          return "+a+"("+d(["row","col","depth"],v)+");\n        }\n      "}if(u===c)return"\n        float "+a+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+l+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+u+".0, "+i+".0);\n          return sample("+r+", uv);\n        }\n      ";if(u===l)return"\n    float "+a+"(int row, int col, int depth) {\n      int texR = row * "+n[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+".0, "+i+".0);\n      return sample("+r+", uv);\n    }\n  ";return"\n      float "+a+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+i+", "+u+", "+c+", "+l+", row, col, depth);\n        return sample("+r+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.shapeInfo.texShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[0],u=n[1],c=e[3],l=e[2]*c,p=e[1]*l,h=o.squeezeShape(e),v=h.newShape,m=h.keptDims;if(v.length<e.length){var g=f(t,v);return"\n      "+s(g)+"\n      float "+a+"(int row, int col, int depth, int depth2) {\n        return "+a+"("+d(["row","col","depth","depth2"],m)+");\n      }\n    "}if(u===p)return"\n      float "+a+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+l+" + depth * "+c+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+u+".0, "+i+".0);\n        return sample("+r+", uv);\n      }\n    ";if(u===c)return"\n      float "+a+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+e[1]*e[2]+" + col * "+e[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+u+".0, "+i+".0);\n        return sample("+r+", uv);\n      }\n    ";return"\n    float "+a+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+i+", "+u+", "+p+", "+l+",\n          "+c+", row, col, depth, depth2);\n      return sample("+r+", uv);\n    }\n  "}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}e.makeShader=function(t,e,n,i){var f=r.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?l:u,d=r.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?p:c,v=t.map(function(t){return"uniform sampler2D "+t.name+";"}).join("\n"),m=t.map(function(t){return function(t,e,n){var r,i,u,c,l,p,h=(i=(r=t).name,u=r.shapeInfo.texShape,c="get"+i.charAt(0).toUpperCase()+i.slice(1)+"Flat",l=u[0],1===(p=u[1])&&1===l?"\n      float "+c+"(int index) {\n        return sample("+i+", halfCR);\n      }\n    ":1===p?"\n      float "+c+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+l+".0);\n        return sample("+i+", uv);\n      }\n    ":1===l?"\n      float "+c+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+p+".0, 0.5);\n        return sample("+i+", uv);\n      }\n    ":"\n    float "+c+"(int index) {\n      vec2 uv = UVfrom1D("+l+", "+p+", index);\n      return sample("+i+", uv);\n    }\n  ");return h+=s(t),(n||o.arraysEqual(t.shapeInfo.logicalShape,e.logicalShape))&&(h+=function(t,e,n){var r=t.shapeInfo.texShape,i=t.name,s=i.charAt(0).toUpperCase()+i.slice(1),u="get"+s+"AtOutCoords",c=a.getBroadcastDims(t.shapeInfo.logicalShape,e.logicalShape),l=t.shapeInfo.logicalShape.length,p=e.logicalShape.length,h=n&&(p>l||c.length>0),f=a.broadcastDimsAreOuter(c);if(h&&!f)return function(t,e,n,r){var o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,s="int";2===i?s="ivec2":3===i?s="ivec3":4===i&&(s="ivec4");var u,c=a.getBroadcastDims(t.shapeInfo.logicalShape,e.logicalShape),l=i-o;u=0===o?"":i<2&&c.length>=1?"coords = 0;":c.map(function(t){return"coords["+(t+l)+"] = 0;"}).join("\n");var p="";return p=i<2&&o>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords["+(e+l)+"]"}).join(", "),"\n    float "+r+"() {\n      "+s+" coords = getOutputCoords();\n      "+u+"\n      return get"+n+"("+p+");\n    }\n  "}(t,e,s,u);var d=e.texShape;if(o.arraysEqual(r,d))return"\n      float "+u+"() {\n        return sample("+i+", resultUV);\n      }\n    ";var v=o.sizeFromShape(r),m="";return h&&f&&(m="\n        int mainPart = index / "+v+";\n        index -= mainPart * "+v+";\n      "),"\n    float "+u+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+d[0]+", "+d[1]+"));\n      int index = resTexRC.x * "+d[1]+" + resTexRC.y;\n      "+m+"\n      int texR = index / "+r[1]+";\n      int texC = index - texR * "+r[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+r[1]+".0, "+r[0]+".0);\n\n      return sample("+i+", uv);\n    }\n  "}(t,e,n)),h}(t,e,i)}).join("\n"),g=e.texShape,y=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return o.arraysEqual(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return r=e,a=(n=t)[1]*n[2],i=n[2],"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+r[0]+", "+r[1]+"));\n      int index = resTexRC.x * "+r[1]+" + resTexRC.y;\n      int r = index / "+a+";\n      index -= r * "+a+";\n      int c = index / "+i+";\n      int d = index - c * "+i+";\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=t[3],r=t[2]*n,o=t[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r,a,i}(e.logicalShape,g);return[h,f,d,v,y,m,n].join("\n")};var u="\n  uniform float NaN;\n\n  const vec4 floatDeltas = vec4(\n      1.0,\n      1.0 / 255.0,\n      1.0 / (255.0 * 255.0),\n      1.0 / (255.0 * 255.0 * 255.0)\n  );\n  const float minValue = "+i.FLOAT_MIN+".0;\n  const float maxValue = "+i.FLOAT_MAX+".0;\n  const float range = (maxValue - minValue) / 255.0;\n  const vec2 dotRange = vec2(1.0, range);\n\n  float sample(sampler2D texture, vec2 uv) {\n    vec4 sampleValue = texture2D(texture, uv);\n    if (all(equal(sampleValue, vec4("+i.BYTE_NAN_VALUE+")))) {\n      return NaN;\n    }\n\n    vec4 encValue = floor(sampleValue * 255.0 + 0.5);\n    float decodedValue = dot(encValue, floatDeltas);\n    return dot(vec2(minValue, decodedValue), dotRange);\n  }\n",c="\n  const vec4 floatPowers = vec4(\n    1.0,\n    255.0,\n    255.0 * 255.0,\n    255.0 * 255.0 * 255.0\n  );\n  const vec2 recipRange = vec2(1.0/range);\n  const vec2 recipRange255 = vec2(1.0/(maxValue - minValue));\n\n  void setOutput(float decodedValue) {\n    if (isNaN(decodedValue)) {\n      gl_FragColor = vec4("+i.BYTE_NAN_VALUE+");\n      return;\n    }\n\n    float a = dot(vec2(decodedValue, -minValue), recipRange);\n    float b = fract(a) * 255.0;\n    float c = fract(b) * 255.0;\n    float d = fract(c) * 255.0;\n    gl_FragColor = floor(vec4(a, b, c, d)) / 255.0;\n\n    // TODO(dsmilkov): Version above gets better accuracy but probably slower\n    // than the version below. Benchmark to determine if the accuracy is worth\n    // the cost.\n\n    // float normValue = dot(vec2(decodedValue, -minValue), recipRange255);\n    // vec4 f = normValue * floatPowers;\n    // gl_FragColor = floor(fract(f) * 255.0) / 255.0;\n  }\n",l="\n  float sample(sampler2D texture, vec2 uv) {\n    return texture2D(texture, uv).r;\n  }\n",p="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",h="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  bool isNaN(float val) {\n    float v1 = val * val;\n    float v2 = val * val;\n    return v1 == v2 ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  const vec2 randomConst = vec2(\n    23.14069263277926, // e^pi (Gelfond's constant)\n     2.665144142690225 // 2^sqrt(2) (GelfondSchneider constant)\n  );\n\n  float random(float seed) {\n      return fract(cos(dot(resultUV * seed, randomConst)) * 12345.6789);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function f(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function d(t,e){return e.map(function(e){return t[e]}).join(", ")}e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";throw Error("GPU for rank "+t+" is not yet supported")}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(296),a=n(295);e.contrib=a;var i=n(141);e.xhr_dataset=i;var s=n(2);e.environment=s;var u=n(2),c=n(139);e.gpgpu_util=c;var l=n(76);e.webgl_util=l;var p=n(60);e.conv_util=p;var h=n(270);e.test_util=h;var f=n(1);e.util=f;var d=n(242);e.version=d.version;var v=n(241);e.CheckpointLoader=v.CheckpointLoader;var m=n(140);e.InMemoryDataset=m.InMemoryDataset;var g=n(240);e.InCPUMemoryShuffledInputProviderBuilder=g.InCPUMemoryShuffledInputProviderBuilder,e.InGPUMemoryShuffledInputProviderBuilder=g.InGPUMemoryShuffledInputProviderBuilder;var y=n(141);e.XhrDataset=y.XhrDataset;var b=n(2);e.ENV=b.ENV,e.Environment=b.Environment;var w=n(66);e.Graph=w.Graph,e.SymbolicTensor=w.SymbolicTensor;var x=n(239);e.GraphRunner=x.GraphRunner,e.MetricReduction=x.MetricReduction;var k=n(133);e.ConstantInitializer=k.ConstantInitializer,e.OnesInitializer=k.OnesInitializer,e.RandomNormalInitializer=k.RandomNormalInitializer,e.RandomTruncatedNormalInitializer=k.RandomTruncatedNormalInitializer,e.RandomUniformInitializer=k.RandomUniformInitializer,e.TensorInitializer=k.TensorInitializer,e.VarianceScalingInitializer=k.VarianceScalingInitializer,e.ZerosInitializer=k.ZerosInitializer;var E=n(132);e.CostReduction=E.CostReduction,e.Session=E.Session;var S=n(138);e.MathBackendCPU=S.MathBackendCPU,e.NDArrayMathCPU=S.NDArrayMathCPU;var T=n(137);e.MathBackendWebGL=T.MathBackendWebGL,e.NDArrayMathGPU=T.NDArrayMathGPU;var O=n(135);e.GPGPUContext=O.GPGPUContext;var _=n(77);e.NDArrayMath=_.NDArrayMath;var A=n(102);e.MatrixOrientation=A.MatrixOrientation;var C=n(99);e.AdadeltaOptimizer=C.AdadeltaOptimizer;var N=n(98);e.AdagradOptimizer=N.AdagradOptimizer;var M=n(97);e.AdamOptimizer=M.AdamOptimizer;var P=n(96);e.AdamaxOptimizer=P.AdamaxOptimizer;var R=n(95);e.MomentumOptimizer=R.MomentumOptimizer;var I=n(45);e.Optimizer=I.Optimizer;var D=n(94);e.RMSPropOptimizer=D.RMSPropOptimizer;var F=n(75);e.SGDOptimizer=F.SGDOptimizer;var B=n(7);e.Array1D=B.Array1D,e.Array2D=B.Array2D,e.Array3D=B.Array3D,e.Array4D=B.Array4D,e.NDArray=B.NDArray,e.Scalar=B.Scalar,e.Tensor=B.Tensor,e.Tensor1D=B.Tensor1D,e.Tensor2D=B.Tensor2D,e.Tensor3D=B.Tensor3D,e.Tensor4D=B.Tensor4D,e.variable=B.variable,e.Variable=B.Variable;var L=n(68);e.Rank=L.Rank;var z=n(217);e.loadWeights=z.loadWeights,r(n(11)),r(n(216)),r(n(3)),e.setBackend=u.Environment.setBackend,e.getBackend=u.Environment.getBackend,e.memory=u.Environment.memory,e.nextFrame=o.BrowserUtil.nextFrame},function(t,e,n){var r=n(10)("unscopables"),o=Array.prototype;void 0==o[r]&&n(22)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){var r=n(57)("meta"),o=n(8),a=n(23),i=n(13).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(6)(function(){return u(Object.preventExtensions({}))}),l=function(t){i(t,r,{value:{i:"O"+ ++s,w:{}}})},p=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!a(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&p.NEED&&u(t)&&!a(t,r)&&l(t),t}}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(3),i=n(100),s=n(37),u=n(11),c=n(7),l=function(){function t(t,e){this.learningRate=t,this.variableGradients=new s.TensorArrayMap,null!=e&&(this.specifiedVariableNodes=e)}return t.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),o=r.value,a=r.grads;return this.applyGradients(a),Object.keys(a).forEach(function(t){return a[t].dispose()}),e?o:(o.dispose(),null)},t.prototype.computeGradients=function(t,e){return a.variableGrads(t,e)},t.prototype.beforeBatch=function(t,e,n,r,o){var a=this;this.variableNodes=null==this.specifiedVariableNodes?i.getVariableNodesFromEvaluationSet(n.nodes):this.specifiedVariableNodes,e!==this.prevBatchSize&&(null!=this.cGraph&&this.cGraph.dispose(),this.prevBatchSize=e,this.cGraph=t.keep(u.scalar(-this.learningRate/e))),this.variableNodes.forEach(function(e){return a.variableGradients.set(e.output,t.keep(c.Tensor.zeros(e.output.shape)))})},t.prototype.afterExample=function(t,e,n,r){var o=this;a.tidy(function(){o.variableNodes.forEach(function(e){var n=r.get(e.output),i=o.variableGradients.get(e.output);o.variableGradients.set(e.output,a.keep(t.add(n,i))),i.dispose()})})},t.prototype.dispose=function(){null!=this.cGraph&&this.cGraph.dispose(),null!=this.variableNodes&&this.variableNodes.forEach(function(t){t.data.dispose()}),null!=this.specifiedVariableNodes&&this.specifiedVariableNodes.forEach(function(t){t.data.dispose()})},r([o.doc({heading:"Training",subheading:"Optimizers"})],t.prototype,"minimize",null),t=r([o.doc({heading:"Training",subheading:"Classes",namespace:"train"})],t)}();e.Optimizer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBroadcastDims=function(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r},e.getReductionAxes=function(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n},e.broadcastDimsAreOuter=function(t){for(var e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0},e.assertAndGetBroadcastShape=function(t,e){for(var n=[],r="Operands could not be broadcast together with shapes "+t+" and "+e+".",o=Math.max(t.length,e.length),a=0;a<o;a++){var i=t[t.length-a-1]||1,s=e[e.length-a-1]||1;if(i>1&&s>1&&i!==s)throw Error(r);n.unshift(Math.max(i,s))}return n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(21);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){var r=n(30),o=n(186),a=n(113),i=n(4),s=n(12),u=n(111),c={},l={};(e=t.exports=function(t,e,n,p,h){var f,d,v,m,g=h?function(){return t}:u(t),y=r(n,p,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(a(g)){for(f=s(t.length);f>b;b++)if((m=e?y(i(d=t[b])[0],d[1]):y(t[b]))===c||m===l)return m}else for(v=g.call(t);!(d=v.next()).done;)if((m=o(v,y,d.value,e))===c||m===l)return m}).BREAK=c,e.RETURN=l},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var r=n(5),o=n(13),a=n(14),i=n(10)("species");t.exports=function(t){var e=r[t];a&&e&&!e[i]&&o.f(e,i,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(198),o=n(126).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(4),o=n(197),a=n(126),i=n(127)("IE_PROTO"),s=function(){},u=function(){var t,e=n(129)("iframe"),r=a.length;for(e.style.display="none",n(125).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[a[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[i]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(33),o=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):a(t,e)}},function(t,e,n){var r=n(198),o=n(126);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports=!1},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(78),u=n(3),c=n(1),l=n(277),p=n(146);function h(t){return new m(t)}function f(t){return new g(t)}function d(t){return S.create(t)}e.streamFromItems=h,e.streamFromIncrementing=function(t){var e=t;return f(function(){return{value:e++,done:!1}})},e.streamFromFunction=f,e.streamFromConcatenated=d,e.streamFromConcatenatedFunction=function(t,e){return d(f(t).take(e))};var v=function(){function t(){}return t.prototype.collectRemaining=function(){return a(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return t=[],[4,this.next()];case 1:e=n.sent(),n.label=2;case 2:return e.done?[3,4]:(t.push(e.value),[4,this.next()]);case 3:return e=n.sent(),[3,2];case 4:return[2,t]}})})},t.prototype.resolveFully=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:t=e.sent(),e.label=2;case 2:return t.done?[3,4]:[4,this.next()];case 3:return t=e.sent(),[3,2];case 4:return[2]}})})},t.prototype.filter=function(t){return new k(this,t)},t.prototype.map=function(t){return new E(this,t)},t.prototype.forEach=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.map(t).resolveFully()]})})},t.prototype.batch=function(t,e){return void 0===e&&(e=!0),new x(this,t,e)},t.prototype.concatenate=function(t){return S.create(h([this,t]))},t.prototype.take=function(t){return t<0||null==t?this:new b(this,t)},t.prototype.skip=function(t){return t<0||null==t?this:new y(this,t)},t.prototype.prefetch=function(t){return new T(this,t)},t.prototype.shuffle=function(t,e){return new O(this,t,e)},t}();e.DataStream=v;var m=function(t){function e(e){var n=t.call(this)||this;return n.items=e,n.trav=0,n}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(t=this.items[this.trav],this.trav++,[2,{value:t,done:!1}])})})},e}(v),g=function(t){function e(e){var n=t.call(this)||this;return n.nextFn=e,n}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.nextFn()]})})},e}(v),y=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(t=e.sent()).done?[2,t]:(u.dispose(t.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},e}(v),b=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},e}(v),w=function(t){function e(){var e=t.call(this)||this;return e.outputQueue=new l.GrowingRingBuffer,e}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return 0!==this.outputQueue.length()?[3,2]:[4,this.pump()];case 1:return t.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},e}(v);e.QueueStream=w;var x=function(t){function e(e,n,r){void 0===r&&(r=!0);var o=t.call(this)||this;return o.upstream=e,o.batchSize=n,o.enableSmallLastBatch=r,o.currentBatch=[],o}return o(e,t),e.prototype.pump=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.upstream.next()];case 1:return(t=e.sent()).done?this.enableSmallLastBatch&&this.currentBatch.length>0?(this.outputQueue.push(this.currentBatch),this.currentBatch=[],[2,!0]):[2,!1]:(this.currentBatch.push(t.value),this.currentBatch.length===this.batchSize&&(this.outputQueue.push(this.currentBatch),this.currentBatch=[]),[2,!0])}})})},e}(w),k=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.predicate=n,r}return o(e,t),e.prototype.pump=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.upstream.next()];case 1:return(t=e.sent()).done?[2,!1]:(this.predicate(t.value)?this.outputQueue.push(t.value):u.dispose(t.value),[2,!0])}})})},e}(w),E=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return o(e,t),e.prototype.pump=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:if((t=i.sent()).done)return[2,!1];for(e=c.extractTensorsFromAny(t.value),n=this.transform(t.value),r=c.extractTensorsFromAny(n),o=0,a=e;o<a.length;o++)s=a[o],c.isTensorInList(s,r)||s.dispose();return this.outputQueue.push(n),[2,!0]}})})},e}(w),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stream=null,e.lastRead=null,e}return o(e,t),e.create=function(t){var n=new e;return n.moreStreams=t,n},e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},e.prototype.readFromChain=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),null!=this.stream?[3,3]:[4,this.moreStreams.next()];case 2:if((e=r.sent()).done)return[2,{value:null,done:!0}];this.stream=e.value,r.label=3;case 3:return[4,this.stream.next()];case 4:return(n=r.sent()).done?(this.stream=null,[2,this.readFromChain(t)]):[2,n]}})})},e}(v);e.ChainedStream=S;var T=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.bufferSize=n,r.total=0,r.buffer=new p.RingBuffer(n),r}return o(e,t),e.prototype.refill=function(){for(;!this.buffer.isFull();){var t=this.upstream.next();this.buffer.push(t)}},e.prototype.next=function(){return this.refill(),this.buffer.shift()},e}(v);e.PrefetchStream=T;var O=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.upstream=e,o.windowSize=n,o.upstreamExhausted=!1,o.random=s(r),o}return o(e,t),e.prototype.randomInt=function(t){return Math.floor(this.random()*t)},e.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},e.prototype.next=function(){return a(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:this.upstreamExhausted||this.refill(),n.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(t=this.chooseIndex(),[4,this.buffer.shuffleExcise(t)]);case 2:return(e=n.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,e]);case 3:return[2,{value:null,done:!0}]}})})},e}(T);e.ShuffleStream=O},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);function o(t,e,n,r,o,i,c,l){void 0===c&&(c=!1),void 0===l&&(l="channelsLast");var p=[-1,-1,-1,-1],h=p[0],f=p[1],d=p[2],v=p[3];if("channelsLast"===l)h=t[0],f=t[1],d=t[2],v=t[3];else{if("channelsFirst"!==l)throw new Error("Unknown dataFormat "+l);h=t[0],v=t[1],f=t[2],d=t[3]}var m,g=e[0],y=e[1],b=e[3],w=s(n),x=w[0],k=w[1],E=s(r),S=E[0],T=E[1],O=function(t,e,n,r,o,i,s,u){var c,l,p;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t};var h=a([e,n,1],i,1,r,t,u);l=h[0],p=h[1]}else if("same"===t){l=Math.ceil(e/r),p=Math.ceil(n/o);var f=(l-1)*r+i-e,d=(p-1)*o+s-n,v=Math.floor(f/2),m=f-v,g=Math.floor(d/2),y=d-g;c={top:v,bottom:m,left:g,right:y}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);c={top:0,bottom:0,left:0,right:0},l=Math.ceil((e-i+1)/r),p=Math.ceil((n-s+1)/o)}return{padInfo:c,outHeight:l,outWidth:p}}(o,f,d,x,k,u(g,S),u(y,T),i),_=O.padInfo,A=O.outHeight,C=O.outWidth,N=c?b*v:b;return"channelsFirst"===l?m=[h,N,A,C]:"channelsLast"===l&&(m=[h,A,C,N]),{batchSize:h,dataFormat:l,inHeight:f,inWidth:d,inChannels:v,outHeight:A,outWidth:C,outChannels:N,padInfo:_,strideHeight:x,strideWidth:k,filterHeight:g,filterWidth:y,inShape:t,outShape:m,filterShape:e}}function a(t,e,n,o,a,s){null==a&&(a=i(t,e,o));var u=t[0],l=t[1],p=c((u-e+2*a)/o+1,s);r.assert(r.isInt(p),"The output # of rows ("+p+") must be an integer. Change the stride and/or zero pad parameters");var h=c((l-e+2*a)/o+1,s);return r.assert(r.isInt(h),"The output # of columns ("+h+") must be an integer. Change the stride and/or zero pad parameters"),[p,h,n]}function i(t,e,n){return Math.floor((t[0]*(n-1)-n+e)/2)}function s(t){return"number"==typeof t?[t,t]:t}function u(t,e){return e<=1?t:t+(t-1)*(e-1)}function c(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}e.computePool2DInfo=function(t,e,n,r,a,i){void 0===i&&(i="channelsLast");var u,c=s(e),l=c[0],p=c[1];if("channelsLast"===i)u=[l,p,t[3],t[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);u=[l,p,t[1],t[1]]}return o(t,u,n,1,r,a,!1,i)},e.computeConv2DInfo=o,e.computeOutputShape3D=a,e.computeDefaultPad=i,e.computeWeightsShape4D=function(t,e,n,r){return[n,r,t,e]},e.computeDilatedRC=function(t,e){return[(t[0]-1)*e+1,(t[1]-1)*e+1]}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){var r=n(8);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports={}},function(t,e,n){var r=n(0),o=n(34),a=n(6),i=n(123),s="["+i+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,n){var o={},s=a(function(){return!!i[t]()||""!=""[t]()}),u=o[t]=s?e(p):i[t];n&&(o[n]=u),r(r.P+r.F*s,"String",o)},p=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e,n){var r=n(13).f,o=n(23),a=n(10)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(69),i=n(60),s=n(7),u=n(1),c=n(133),l=function(){function t(t){this.g=t}return t.prototype.dense=function(t,e,n,r,o,a,i){void 0===r&&(r=null),void 0===o&&(o=!0),void 0===a&&(a=new c.VarianceScalingInitializer),void 0===i&&(i=new c.ZerosInitializer);var s=this.g.variable(t+"-weights",a.initialize([e.shape[0],n],e.shape[0],n)),u=this.g.matmul(e,s);if(o){var l=this.g.variable(t+"-bias",i.initialize([n],e.shape[0],n));u=this.g.add(u,l)}return null!=r&&(u=r(u)),u},t}();e.GraphLayers=l;var p=function(){function t(){this.nodes=[],this.layers=new l(this)}return t.prototype.variable=function(t,e){return this.addNodeAndReturnOutput(new d(this,t,e))},t.prototype.placeholder=function(t,e){return this.addNodeAndReturnOutput(new v(this,t,e))},t.prototype.constant=function(t){var e;if("number"==typeof t)e=s.Scalar.new(t);else if(t instanceof s.Tensor)e=t;else{if(!(t instanceof Array))throw new Error("unimplemented constant type.");var n=u.flatten(t),r=new Float32Array(n);e=s.Tensor.make(u.inferShape(t),{values:r})}return this.addNodeAndReturnOutput(new m(this,e))},t.prototype.reshape=function(t,e){return this.addNodeAndReturnOutput(new g(this,"Reshape",t,e))},t.prototype.fusedLinearCombination=function(t,e,n,r){return this.addNodeAndReturnOutput(new y(this,t,e,n,r))},t.prototype.add=function(t,e){return this.addNodeAndReturnOutput(new b(this,t,e))},t.prototype.subtract=function(t,e){return this.addNodeAndReturnOutput(new w(this,t,e))},t.prototype.multiply=function(t,e){return this.addNodeAndReturnOutput(new x(this,t,e))},t.prototype.divide=function(t,e){return this.addNodeAndReturnOutput(new k(this,t,e))},t.prototype.reduceSum=function(t){return this.addNodeAndReturnOutput(new E(this,t))},t.prototype.concat1d=function(t,e){return this.addNodeAndReturnOutput(new S(this,t,e))},t.prototype.concat2d=function(t,e,n){return this.addNodeAndReturnOutput(new T(this,t,e,n))},t.prototype.concat3d=function(t,e,n){return this.addNodeAndReturnOutput(new O(this,t,e,n))},t.prototype.concat4d=function(t,e,n){return this.addNodeAndReturnOutput(new _(this,t,e,n))},t.prototype.matmul=function(t,e){return this.addNodeAndReturnOutput(new A(this,t,e))},t.prototype.conv2d=function(t,e,n,r,o,a,i){return void 0===a&&(a=1),this.addNodeAndReturnOutput(new C(this,t,e,n,r,o,a,i))},t.prototype.maxPool=function(t,e,n,r){return void 0===n&&(n=1),this.addNodeAndReturnOutput(new N(this,t,e,n,r))},t.prototype.exp=function(t){return this.addNodeAndReturnOutput(new D(this,t))},t.prototype.log=function(t){return this.addNodeAndReturnOutput(new F(this,t))},t.prototype.relu=function(t){return this.addNodeAndReturnOutput(new M(this,t))},t.prototype.leakyRelu=function(t,e){return this.addNodeAndReturnOutput(new P(this,t,e))},t.prototype.prelu=function(t,e){return this.addNodeAndReturnOutput(new R(this,t,e))},t.prototype.elu=function(t){return this.addNodeAndReturnOutput(new I(this,t))},t.prototype.tanh=function(t){return this.addNodeAndReturnOutput(new B(this,t))},t.prototype.sigmoid=function(t){return this.addNodeAndReturnOutput(new L(this,t))},t.prototype.square=function(t){return this.addNodeAndReturnOutput(new z(this,t))},t.prototype.softmax=function(t){return this.addNodeAndReturnOutput(new V(this,t))},t.prototype.softmaxCrossEntropyCost=function(t,e){return this.addNodeAndReturnOutput(new j(this,t,e))},t.prototype.meanSquaredCost=function(t,e){return this.addNodeAndReturnOutput(new G(this,t,e))},t.prototype.argmax=function(t){return this.addNodeAndReturnOutput(new U(this,t))},t.prototype.argmaxEquals=function(t,e){return this.addNodeAndReturnOutput(new q(this,t,e))},t.prototype.addNodeAndReturnOutput=function(t){return this.nodes.push(t),t.validate(),t.output},t.prototype.getNodes=function(){return this.nodes},t}();e.Graph=p;var h=function(t){function e(n){var r=t.call(this,[],"float32")||this;return r.shape=n,r.id=e.nextID++,r}return o(e,t),e.nextID=0,e}(s.Tensor);e.SymbolicTensor=h;var f=function(){function t(e,n,r,o){this.graph=e,this.name=n,this.inputs=r,this.output=o,this.id=t.nextID++,o.node=this}return t.nextID=0,t}();e.Node=f;var d=function(t){function e(e,n,r){var o=t.call(this,e,n,{},new h(r.shape))||this;return o.data=r,o}return o(e,t),e.prototype.validate=function(){u.assert(null!=this.data,"Error adding variable op: Data for variable '"+this.name+"' is null or undefined")},e}(f);e.VariableNode=d;var v=function(t){function e(e,n,r){return t.call(this,e,n,{},new h(r))||this}return o(e,t),e.prototype.validate=function(){},e}(f);e.PlaceholderNode=v;var m=function(t){function e(e,n){var r=t.call(this,e,"Constant",{},new h(n.shape))||this;return r.data=n,r}return o(e,t),e.prototype.validate=function(){u.assert(null!=this.data,"Error adding constant: data for placeholder '"+this.name+"' is null or undefined")},e}(f);e.ConstantNode=m;var g=function(t){function e(e,n,r,o){var a=t.call(this,e,n,{x:r},new h(o))||this;return a.name=n,a.x=r,a.shape=o,a}return o(e,t),e.prototype.validate=function(){var t=u.sizeFromShape(this.x.shape),e=u.sizeFromShape(this.shape);u.assert(t===e,"Error making reshape operation: input to reshape '"+this.name+"' of shape ("+this.x.shape+") does not match size of requested shape "+this.shape+".")},e.X="x",e}(f);e.ReshapeNode=g;var y=function(t){function e(e,n,r,o,a){var i=t.call(this,e,"Linear Combination",{t1:n,t2:r,c1:o,c2:a},new h(n.shape))||this;return i.t1=n,i.t2=r,i.c1=o,i.c2=a,i}return o(e,t),e.prototype.validate=function(){if(u.assertShapesMatch(this.t1.shape,this.t2.shape),!u.isScalarShape(this.c1.shape))throw new Error("Error adding fusedLinearCombination: c1 is not a scalar, got shape: "+this.c1.shape);if(!u.isScalarShape(this.c2.shape))throw new Error("Error adding fusedLinearCombination: c2 is not a scalar, got shape: "+this.c2.shape)},e.T1="t1",e.T2="t2",e.C1="c1",e.C2="c2",e}(f);e.FusedLinearCombinationNode=y;var b=function(t){function e(e,n,r){var o=t.call(this,e,"Add",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape.length<r.shape.length?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return o(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape)||2===this.t1.shape.length&&1===this.t2.shape.length&&this.t1.shape[1]===this.t2.shape[0]||1===this.t1.shape.length&&2===this.t2.shape.length&&this.t1.shape[0]===this.t2.shape[1],"Error adding add operation op: one of inputs must be scalar, shapes "+this.t1.shape+" and "+this.t2.shape+" must match,or one of them can be broadcasted (2D and 1D).")},e.T1="t1",e.T2="t2",e}(f);e.AddNode=b;var w=function(t){function e(e,n,r){var o=t.call(this,e,"Subtract",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return o(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape),"Error adding subtract op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(f);e.SubtractNode=w;var x=function(t){function e(e,n,r){var o=t.call(this,e,"Multiply",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return o(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape),"Error adding multiply op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(f);e.MultiplyNode=x;var k=function(t){function e(e,n,r){var o=t.call(this,e,"Divide",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return o(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape),"Error adding divide op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(f);e.DivideNode=k;var E=function(t){function e(e,n){return t.call(this,e,"ReduceSum",{x:n},new h([]))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.ReduceSumNode=E;var S=function(t){function e(e,n,r){return t.call(this,e,"Concat1D",{x1:n,x2:r},new h(a.computeOutShape1D(n.shape,r.shape)))||this}return o(e,t),e.prototype.validate=function(){},e.X1="x1",e.X2="x2",e}(f);e.Concat1DNode=S;var T=function(t){function e(e,n,r,o){var i=t.call(this,e,"Concat2D",{x1:n,x2:r},new h(a.computeOutShape(n.shape,r.shape,o)))||this;return i.x1=n,i.x2=r,i.axis=o,i}return o(e,t),e.prototype.validate=function(){a.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(f);e.Concat2DNode=T;var O=function(t){function e(e,n,r,o){var i=t.call(this,e,"Concat3D",{x1:n,x2:r},new h(a.computeOutShape(n.shape,r.shape,o)))||this;return i.x1=n,i.x2=r,i.axis=o,i}return o(e,t),e.prototype.validate=function(){a.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(f);e.Concat3DNode=O;var _=function(t){function e(e,n,r,o){var i=t.call(this,e,"Concat4D",{x1:n,x2:r},new h(a.computeOutShape(n.shape,r.shape,o)))||this;return i.x1=n,i.x2=r,i.axis=o,i}return o(e,t),e.prototype.validate=function(){a.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(f);e.Concat4DNode=_;var A=function(t){function e(e,n,r){var o,a,i=t.call(this,e,"MatMul",{x1:n,x2:r},new h((o=n.shape,a=r.shape,1===o.length&&1===a.length?[1]:1===o.length&&2===a.length?[a[1]]:2===o.length&&1===a.length?[o[0]]:[o[0],a[1]])))||this;return i.x1=n,i.x2=r,i}return o(e,t),e.prototype.validate=function(){if(2===this.x1.shape.length&&2===this.x2.shape.length)u.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: inner shapes of matrices with shapes "+this.x1.shape+" and "+this.x2.shape+" must match.");else if(2===this.x1.shape.length&&1===this.x2.shape.length)u.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: second dimension of matrix with shape "+this.x1.shape.toString()+" must match size of vector with shape "+this.x2.shape+".");else{if(1!==this.x1.shape.length||2!==this.x2.shape.length)throw new Error("Error adding matmul op: inputs must be vectors or matrices.");u.assert(this.x1.shape[0]===this.x2.shape[0],"Error adding matmul op: size of vector with shape "+this.x1.shape+" must match first dimension of matrix with shape "+this.x2.shape+".")}},e.X1="x1",e.X2="x2",e}(f);e.MatMulNode=A;var C=function(t){function e(e,n,r,o,a,s,u,c){void 0===u&&(u=1);var l=t.call(this,e,"Convolution 2D",{x:n,w:r,b:o},new h(i.computeOutputShape3D(n.shape,a,s,u,c)))||this;return l.x=n,l.w=r,l.b=o,l.fieldSize=a,l.outputDepth=s,l.stride=u,l.zeroPad=c,l}return o(e,t),e.prototype.validate=function(){u.assert(3===this.x.shape.length,"Error adding conv2d op: input must be of rank 3, but got shape: "+this.x.shape+"."),u.assert(4===this.w.shape.length,"Error adding conv2d op: weights must be of rank 4, but got shape: "+this.w.shape+"."),u.assert(1===this.b.shape.length,"Error adding conv2d op: biases must be of rank 1, but got shape: "+this.b.shape+"."),u.assert(this.x.shape[2]===this.w.shape[2],"Error adding conv2d op: depth of input ("+this.x.shape[2]+") must match input depth for weights ("+this.w.shape[2]+").")},e.X="x",e.W="w",e.B="b",e}(f);e.Convolution2DNode=C;var N=function(t){function e(e,n,r,o,a){void 0===o&&(o=1);var s=t.call(this,e,"Max pool",{x:n},new h(i.computeOutputShape3D(n.shape,r,n.shape[2],o,a)))||this;return s.x=n,s.fieldSize=r,s.stride=o,s.zeroPad=a,s}return o(e,t),e.prototype.validate=function(){u.assert(3===this.x.shape.length,"Error adding maxPool op: input must be of rank 3, but got shape: "+this.x.shape+".")},e.X="x",e}(f);e.MaxPoolNode=N;var M=function(t){function e(e,n){return t.call(this,e,"ReLU",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.ReLUNode=M;var P=function(t){function e(e,n,r){var o=t.call(this,e,"LeakyReLU",{x:n},new h(n.shape))||this;return o.alpha=r,o}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.LeakyReLUNode=P;var R=function(t){function e(e,n,r){var o=t.call(this,e,"PReLU",{x:n,alpha:r},new h(n.shape))||this;return o.x=n,o.alpha=r,o}return o(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.x.shape,this.alpha.shape),"Error adding pRelu op: the shapes x: "+this.x.shape+" and alpha: "+this.alpha.shape+" must match.")},e.X="x",e.ALPHA="alpha",e}(f);e.PReLUNode=R;var I=function(t){function e(e,n){return t.call(this,e,"Elu",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.EluNode=I;var D=function(t){function e(e,n){return t.call(this,e,"Exp",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.ExpNode=D;var F=function(t){function e(e,n){return t.call(this,e,"Log",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.LogNode=F;var B=function(t){function e(e,n){return t.call(this,e,"TanH",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.TanHNode=B;var L=function(t){function e(e,n){return t.call(this,e,"Sigmoid",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.SigmoidNode=L;var z=function(t){function e(e,n){return t.call(this,e,"Square",{x:n},new h(n.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);e.SquareNode=z;var j=function(t){function e(e,n,r){var o=t.call(this,e,"SoftmaxCrossEntropyCost",{x:n,target:r},new h([]))||this;return o.x=n,o.target=r,o}return o(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.x.shape,this.target.shape),"Error adding softmaxCrossEntropyCost op: x shape ("+this.x.shape+") must match target shape ("+this.target.shape+").")},e.X="x",e.TARGET="target",e}(f);e.SoftmaxCrossEntropyCostNode=j;var V=function(t){function e(e,n){var r=t.call(this,e,"Softmax",{x:n},new h(n.shape))||this;return r.x=n,r}return o(e,t),e.prototype.validate=function(){u.assert(1===this.x.shape.length,"The input to a softmax must be a 1-D tensor"),u.assert(this.x.shape[0]>=2,"The input to a softmax must have at least 2 values")},e.X="x",e}(f);e.SoftmaxNode=V;var G=function(t){function e(e,n,r){var o=t.call(this,e,"Mean Squared Cost",{label:n,prediction:r},new h([]))||this;return o.label=n,o.prediction=r,o}return o(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.label.shape,this.prediction.shape),"Error adding meanSquaredCost op: label shape ("+this.label.shape+") must match prediction shape ("+this.prediction.shape+").")},e.LABEL="label",e.PREDICTION="prediction",e}(f);e.MeanSquaredCostNode=G;var U=function(t){function e(e,n){var r=t.call(this,e,"ArgMax",{x:n},new h([1]))||this;return r.x=n,r}return o(e,t),e.prototype.validate=function(){u.assert(u.sizeFromShape(this.x.shape)>0,"Error adding argmax op: input tensor must have at least one entry.")},e.X="x",e}(f);e.ArgMaxNode=U;var q=function(t){function e(e,n,r){var o=t.call(this,e,"ArgMaxEquals",{x1:n,x2:r},new h([1]))||this;return o.x1=n,o.x2=r,o}return o(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.x1.shape,this.x2.shape),"Error adding ArgMaxEquals op: x1 shape ("+this.x1.shape+") must match x2 shape ("+this.x2.shape+").")},e.X1="x1",e.X2="x2",e}(f);e.ArgMaxEqualsNode=q},function(t,e,n){"use strict";function r(t,e){return t*e}function o(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.FLOAT=0]="FLOAT",t[t.UNSIGNED_BYTE=1]="UNSIGNED_BYTE"}(e.TextureType||(e.TextureType={})),e.getUnpackedMatrixTextureShapeWidthHeight=function(t,e){return[e,t]},e.getUnpackedArraySizeFromMatrixSize=r,e.getColorMatrixTextureShapeWidthHeight=function(t,e){return[4*e,t]},e.getMatrixSizeFromUnpackedArraySize=o,e.encodeMatrixToUnpackedArray=function(t,e,n){var o=r(t.length,n);if(e.length<o)throw new Error("unpackedArray length ("+e.length+") must be >= "+o);for(var a=0,i=0;i<t.length;++i)e[a]=t[i],a+=n},e.FLOAT_MAX=2e4,e.FLOAT_MIN=-e.FLOAT_MAX;var a=(e.FLOAT_MAX-e.FLOAT_MIN)/255,i=[1,1/255,1/65025,1/16581375],s=[1,255,65025];function u(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function c(t,e){var n=u(t,e);return n[0]*n[1]*4}e.BYTE_NAN_VALUE=0,e.encodeFloatArray=function(t){for(var n=new Uint8Array(4*t.length),r=function(r){var o=t[r/4];if(isNaN(o))return n[r]=e.BYTE_NAN_VALUE,n[r+1]=e.BYTE_NAN_VALUE,n[r+2]=e.BYTE_NAN_VALUE,n[r+3]=e.BYTE_NAN_VALUE,"continue";var i=(o-e.FLOAT_MIN)/a,u=s.map(function(t){return t*i}).map(function(t){return Math.floor(t%1*255)});n[r]=Math.floor(i),n[r+1]=u[0],n[r+2]=u[1],n[r+3]=u[2]},o=0;o<n.length;o+=4)r(o);return n},e.decodeToFloatArray=function(t){for(var n=new Float32Array(t.length/4),r=function(r){if(t[r]===e.BYTE_NAN_VALUE&&t[r+1]===e.BYTE_NAN_VALUE&&t[r+2]===e.BYTE_NAN_VALUE&&t[r+3]===e.BYTE_NAN_VALUE)return n[r/4]=NaN,"continue";var o=0;i.forEach(function(e,n){o+=e*t[r+n]});var s=o*a+e.FLOAT_MIN;n[r/4]=s},o=0;o<t.length;o+=4)r(o);return n},e.decodeMatrixFromUnpackedArray=function(t,e,n){var r=o(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var a=0,i=0;i<t.length;i+=n)e[a++]=t[i]},e.decodeMatrixFromUnpackedColorRGBAArray=function(t,e,n){var r=t.length*n/4;if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var o=0,a=0;a<t.length;a+=4)for(var i=0;i<n;i++)e[o++]=t[a+i]},e.getPackedMatrixTextureShapeWidthHeight=u,e.getPackedRGBAArraySizeFromMatrixShape=c,e.encodeMatrixToPackedRGBA=function(t,e,n,r){var o=c(e,n);if(r.length<o)throw new Error("packedRGBA length ("+r.length+") must be >= "+o);for(var a=u(e,n),i=a[0],s=a[1],l=n%2==1,p=e%2==1,h=Math.floor(n/2),f=Math.floor(e/2),d=l?4:0,v=n,m=0,g=0;g<f;++g){for(var y=2*g*n,b=0;b<h;++b){var w=y+2*b;r[m]=t[w],r[m+1]=t[w+1],r[m+2]=t[w+v],r[m+3]=t[w+v+1],m+=4}m+=d}if(l){w=n-1,m=4*(i-1);var x=2*n;for(d=4*i,g=0;g<f;++g)r[m]=t[w],r[m+2]=t[w+n],w+=x,m+=d}if(p)for(w=(e-1)*n,m=(s-1)*i*4,b=0;b<h;++b)r[m++]=t[w++],r[m++]=t[w++],m+=2;return l&&p&&(r[r.length-4]=t[t.length-1]),r},e.decodeMatrixFromPackedRGBA=function(t,e,n,r){var o=e*n;if(o<r.length)throw new Error("matrix length ("+r.length+") must be >= "+o);for(var a=n%2==1,i=e%2==1,s=Math.floor(n/2),c=Math.floor(e/2),l=u(e,n),p=l[0],h=l[1],f=a?4:0,d=n+(a?1:0),v=0,m=0,g=n,y=0;y<c;++y){for(var b=0;b<s;++b)r[m++]=t[v++],r[m++]=t[v++],r[g++]=t[v++],r[g++]=t[v++];v+=f,m+=d,g+=d}if(a){v=4*(p-1);var w=n-1;for(f=4*p,d=2*n,y=0;y<c;++y)r[w]=t[v],r[w+n]=t[v+2],v+=f,w+=d}if(i)for(v=(h-1)*p*4,w=(e-1)*n,b=0;b<s;++b)r[w++]=t[v++],r[w++]=t[v++],v+=2;return a&&i&&(r[r.length-1]=t[t.length-4]),r}},function(t,e,n){"use strict";var r,o,a;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(e.DType||(e.DType={})),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4"}(e.Rank||(e.Rank={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32"}(r||(r={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(o||(o={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32"}(a||(a={}));var i={float32:a,int32:r,bool:o};function s(t,e){return i[t][e]}e.upcastType=s,e.sumOutType=function(t){return s(t,"int32")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.assertParams=function(t,e,n){var o=t.length,a=e.length;r.assert(t.length===e.length,"Error in concat"+o+"D: rank of x1 ("+o+") and x2 ("+a+") must be the same."),r.assert(n>=0&&n<o,"Error in concat"+o+"D: axis must be between 0 and "+(o-1)+".");for(var i=0;i<o;i++)r.assert(i===n||t[i]===e[i],"Error in concat"+o+"D: Shape ("+t+") does not match ("+e+") along the non-concatenated axis "+i+".")},e.computeOutShape1D=function(t,e){r.assert(1===t.length&&1===e.length,"x1 and x2 should be 1d array.");var n=t.slice();return n[0]+=e[0],n},e.computeOutShape=function(t,e,n){r.assert(t.length===e.length,"x1 and x2 should have the same rank.");var o=t.slice();return o[n]+=e[n],o},e.computeGradientSliceShapes=function(t,e){return{aBegin:[0,0],aSize:t,bBegin:[0,t[1]],bSize:e}}},function(t,e,n){var r=n(29),o=n(10)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.array3DToImage=function(t){var e=r(t.shape,2),n=e[0],o=e[1],a=t.dataSync(),i=document.createElement("canvas");i.width=n,i.height=o;for(var s=i.getContext("2d"),u=s.getImageData(0,0,i.width,i.height),c=0;c<n*o;c+=1){var l=4*c,p=3*c;u.data[l+0]=Math.floor(256*a[p+0]),u.data[l+1]=Math.floor(256*a[p+1]),u.data[l+2]=Math.floor(256*a[p+2]),u.data[l+3]=255}s.putImageData(u,0,0);var h=i.toDataURL(),f=document.createElement("img");return f.src=h,f.style.width=n,f.style.height=o,f},e.processVideo=function(t,e){var n=t,r=document.createElement("video");return n.onplay=function(){var t=n.captureStream();r.srcObject=t,r.width=e,r.height=e,r.autoplay=!0},r}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(37),u=n(11),c=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.learningRate=e,r.setLearningRate(e),r}return o(e,t),e.prototype.applyGradients=function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],o=a.ENV.engine.registeredVariables[n];i.tidy(function(){var t=e.c.mul(r).add(o);o.assign(t)})})},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=a.ENV.math.keep(u.scalar(-t))},e.prototype.dispose=function(){this.c.dispose(),null!=this.one&&this.one.dispose(),t.prototype.dispose.call(this)},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;null==this.one&&(this.one=i.keep(u.scalar(1))),i.tidy(function(){a.variableNodes.forEach(function(e){var n=r.get(e.output),o=a.variableGradients.get(e.output),s=t.scaledArrayAdd(a.cGraph,o,a.one,n);r.set(e.output,i.keep(s)),e.data=s,n.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e}(n(45).Optimizer);e.SGDOptimizer=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=null,o=n(1),a=n(2);function i(t,e){var n,r=a.ENV.get("WEBGL_VERSION");if(2===r?n=t.getContext("webgl2",e):1===r&&(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function s(t,e){var n=e();return c(t),n}e.createWebGLRenderingContext=function(t){var e=document.createElement("canvas");return e.width=1,e.height=1,i(e,t)},e.createWebGLRenderingContextFromCanvas=i,e.callAndCheck=s;var u=!1;function c(t){if(u){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+l(t,e))}}function l(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}e.enableDebugWebGLErrorChecking=function(t){u=t},e.checkWebGLError=c,e.getWebGLErrorMessage=l,e.getExtensionOrThrow=function(t,e){return v(t,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')},e.createVertexShader=function(t,e){var n=v(t,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(s(t,function(){return t.shaderSource(n,e)}),s(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n},e.createFragmentShader=function(t,e){var n=v(t,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(s(t,function(){return t.shaderSource(n,e)}),s(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){var n=p.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],a=t.split("\n"),i=a.length.toString().length+2,s=a.map(function(t,e){return o.rightPad((e+1).toString(),i)+t}),u=0,c=0;c<s.length;c++)u=Math.max(s[c].length,u);var l=s.slice(0,r-1),h=s.slice(r-1,r),f=s.slice(r);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+o.rightPad(h[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n};var p=/ERROR: [0-9]+:([0-9]+):/g;function h(t){return null!=r?r:r=s(t,function(){return t.getParameter(t.MAX_TEXTURE_SIZE)})}function f(t,e,n){m(t,n),s(t,function(){return t.activeTexture(t.TEXTURE0+n)}),s(t,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function d(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function v(t,e,n){var r=s(t,function(){return e()});if(null==r)throw new Error(n);return r}function m(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}e.createProgram=function(t){return v(t,function(){return t.createProgram()},"Unable to create WebGLProgram.")},e.linkProgram=function(t,e){if(s(t,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")},e.validateProgram=function(t,e){if(s(t,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")},e.createStaticVertexBuffer=function(t,e){var n=v(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return s(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),s(t,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),n},e.createStaticIndexBuffer=function(t,e){var n=v(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return s(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}),s(t,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),n},e.queryMaxTextureSize=h,e.getChannelsPerTexture=function(){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===a.ENV.get("WEBGL_VERSION")?1:4},e.createTexture=function(t){return v(t,function(){return t.createTexture()},"Unable to create WebGLTexture.")},e.validateTextureSize=function(t,e,n){var r=h(t);if(e<=0||n<=0){var o="["+e+"x"+n+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(e>r||n>r)throw o="["+e+"x"+n+"]",new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")},e.createFramebuffer=function(t){return v(t,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")},e.bindVertexBufferToProgramAttribute=function(t,e,n,r,o,a,i){var u=t.getAttribLocation(e,n);-1!==u&&(s(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),s(t,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,a,i)}),s(t,function(){return t.enableVertexAttribArray(u)}))},e.bindTextureUnit=f,e.unbindTextureUnit=function(t,e){m(t,e),s(t,function(){return t.activeTexture(t.TEXTURE0+e)}),s(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},e.getProgramUniformLocationOrThrow=function(t,e,n){return v(t,function(){return t.getUniformLocation(e,n)},'uniform "'+n+'" not present in program.')},e.getProgramUniformLocation=function(t,e,n){return t.getUniformLocation(e,n)},e.bindTextureToProgramUniformSampler=function(t,e,n,r,o){s(t,function(){return f(t,n,o)}),s(t,function(){return t.uniform1i(r,o)})},e.bindCanvasToFramebuffer=function(t){s(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),s(t,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),s(t,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},e.bindColorTextureToFramebuffer=function(t,e,n){s(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),s(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})},e.unbindColorTextureFromFramebuffer=function(t,e){s(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),s(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})},e.validateFramebuffer=function(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+d(t,e))},e.getFramebufferErrorMessage=d,e.getTextureShapeFromLogicalShape=function(t,e){2!==e.length&&(e=o.squeezeShape(e).newShape);var n=h(t),r=o.sizeFromShape(e);return e.length<=1&&r<=n?[r,1]:2===e.length&&e[0]<=n&&e[1]<=n?e:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?[e[0],e[1]*e[2]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n?[e[0],e[1]*e[2]*e[3]]:o.sizeToSquarishShape(r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(166),a=n(163),i=n(162),s=n(161),u=n(160),c=n(159),l=n(158),p=n(157),h=n(156),f=n(102),d=n(155),v=n(11),m=n(154),g=n(153),y=n(152),b=n(151),w=n(150),x=n(149),k=n(148),E=n(147),S=n(1),T=E.Tracking.tidy,O=E.Tracking.keep,_=function(){function t(t,e){this.matMul=f.MatmulOps.matMul,this.vectorTimesMatrix=f.MatmulOps.vectorTimesMatrix,this.outerProduct=f.MatmulOps.outerProduct,this.matrixTimesVector=f.MatmulOps.matrixTimesVector,this.dotProduct=f.MatmulOps.dotProduct,this.slice=b.SliceOps.slice,this.slice1D=b.SliceOps.slice1d,this.slice2D=b.SliceOps.slice2d,this.slice3D=b.SliceOps.slice3d,this.slice4D=b.SliceOps.slice4d,this.reverse=y.ReverseOps.reverse,this.reverse1D=y.ReverseOps.reverse1d,this.reverse2D=y.ReverseOps.reverse2d,this.reverse3D=y.ReverseOps.reverse3d,this.reverse4D=y.ReverseOps.reverse4d,this.batchNormalization=a.BatchNormOps.batchNormalization,this.batchNormalization2D=a.BatchNormOps.batchNormalization2d,this.batchNormalization3D=a.BatchNormOps.batchNormalization3d,this.batchNormalization4D=a.BatchNormOps.batchNormalization4d,this.avgPool=m.PoolOps.avgPool,this.maxPool=m.PoolOps.maxPool,this.minPool=m.PoolOps.minPool,this.maxPoolBackprop=m.PoolOps.maxPoolBackprop,this.conv2dTranspose=u.ConvOps.conv2dTranspose,this.depthwiseConv2D=u.ConvOps.depthwiseConv2d,this.conv2dDerFilter=u.ConvOps.conv2dDerFilter,this.conv2dDerInput=u.ConvOps.conv2dDerInput,this.argMax=g.ReductionOps.argMax,this.argMin=g.ReductionOps.argMin,this.logSumExp=g.ReductionOps.logSumExp,this.max=g.ReductionOps.max,this.mean=g.ReductionOps.mean,this.min=g.ReductionOps.min,this.moments=g.ReductionOps.moments,this.sum=g.ReductionOps.sum,this.add=i.BinaryOps.add,this.addStrict=i.BinaryOps.addStrict,this.div=i.BinaryOps.div,this.divide=this.div,this.divStrict=i.BinaryOps.divStrict,this.divideStrict=this.divStrict,this.maximum=i.BinaryOps.maximum,this.maximumStrict=i.BinaryOps.maximumStrict,this.minimum=i.BinaryOps.minimum,this.minimumStrict=i.BinaryOps.minimumStrict,this.mul=i.BinaryOps.mul,this.multiply=this.mul,this.mulStrict=i.BinaryOps.mulStrict,this.multiplyStrict=this.mulStrict,this.pow=i.BinaryOps.pow,this.powStrict=i.BinaryOps.powStrict,this.sub=i.BinaryOps.sub,this.subtract=this.sub,this.subStrict=i.BinaryOps.subStrict,this.logicalNot=l.LogicalOps.logicalNot,this.logicalAnd=l.LogicalOps.logicalAnd,this.logicalOr=l.LogicalOps.logicalOr,this.logicalXor=l.LogicalOps.logicalXor,this.where=l.LogicalOps.where,this.transpose=x.TransposeOps.transpose,this.equal=s.CompareOps.equal,this.equalStrict=s.CompareOps.equalStrict,this.greater=s.CompareOps.greater,this.greaterStrict=s.CompareOps.greaterStrict,this.greaterEqual=s.CompareOps.greaterEqual,this.greaterEqualStrict=s.CompareOps.greaterEqualStrict,this.less=s.CompareOps.less,this.lessStrict=s.CompareOps.lessStrict,this.lessEqual=s.CompareOps.lessEqual,this.lessEqualStrict=s.CompareOps.lessEqualStrict,this.notEqual=s.CompareOps.notEqual,this.notEqualStrict=s.CompareOps.notEqualStrict,this.abs=k.UnaryOps.abs,this.acos=k.UnaryOps.acos,this.asin=k.UnaryOps.asin,this.atan=k.UnaryOps.atan,this.ceil=k.UnaryOps.ceil,this.clip=k.UnaryOps.clipByValue,this.cos=k.UnaryOps.cos,this.cosh=k.UnaryOps.cosh,this.elu=k.UnaryOps.elu,this.exp=k.UnaryOps.exp,this.floor=k.UnaryOps.floor,this.leakyRelu=k.UnaryOps.leakyRelu,this.log=k.UnaryOps.log,this.neg=k.UnaryOps.neg,this.prelu=k.UnaryOps.prelu,this.relu=k.UnaryOps.relu,this.selu=k.UnaryOps.selu,this.sigmoid=k.UnaryOps.sigmoid,this.sin=k.UnaryOps.sin,this.sinh=k.UnaryOps.sinh,this.sqrt=k.UnaryOps.sqrt,this.square=k.UnaryOps.square,this.step=k.UnaryOps.step,this.tan=k.UnaryOps.tan,this.tanh=k.UnaryOps.tanh,this.norm=d.NormOps.norm,this.basicLSTMCell=h.LSTMOps.basicLSTMCell,this.multiRNNCell=h.LSTMOps.multiRNNCell,this.softmax=w.SoftmaxOps.softmax,this.softmaxCrossEntropy=w.SoftmaxOps.softmaxCrossEntropy,this.cast=o.ArrayOps.cast,this.clone=o.ArrayOps.clone,this.gather=o.ArrayOps.gather,this.reshape=o.ArrayOps.reshape,this.tile=o.ArrayOps.tile,this.oneHot=o.ArrayOps.oneHot,this.multinomial=o.ArrayOps.multinomial,this.pad1D=o.ArrayOps.pad1d,this.pad2D=o.ArrayOps.pad2d,this.resizeBilinear3D=c.ImageOps.resizeBilinear,this.localResponseNormalization3D=p.LRNOps.localResponseNormalization,this.localResponseNormalization4D=p.LRNOps.localResponseNormalization,this.keep=E.Tracking.keep,r.ENV.setMath(this,t,e),this.engine=r.ENV.engine,this.dispose=r.ENV.engine.dispose.bind(r.ENV.engine),this.registeredVariables=r.ENV.engine.registeredVariables,this.startScope=r.ENV.engine.startScope.bind(r.ENV.engine),this.endScope=r.ENV.engine.endScope.bind(r.ENV.engine)}return t.prototype.scope=function(t){var e=function(t){return O(t)},n=function(t){return t};return T(function(){return t(e,n)})},t.prototype.track=function(t){return t},t.prototype.topK=function(t,e){var n,o;return S.assert(e<=t.size,"Error in topK: k value ("+e+") must be less than size of input tensor, got shape "+t.shape+"."),T("topK",function(){return n=r.ENV.engine.runKernel(function(n){return n.topKValues(t,e)},{x:t}),o=r.ENV.engine.runKernel(function(n){return n.topKIndices(t,e)},{x:t}),n}),{values:n,indices:o}},t.prototype.elementWiseMul=function(t,e){return t.mulStrict(e)},t.prototype.scalarDividedByArray=function(t,e){return S.assert(1===t.size,"Error in scalarDividedByArray: first argument must be rank 0, but got Tensor of rank "+t.rank+"."),t.div(e)},t.prototype.arrayDividedByScalar=function(t,e){return S.assert(1===e.size,"Error in arrayDividedByScalar: second argument must be rank 0, but got Tensor of rank "+e.rank+"."),t.div(e)},t.prototype.switchDim=function(t,e){return v.transpose(t,e)},t.prototype.scalarPlusArray=function(t,e){return S.assert(1===t.size,"Error in scalarPlusArray: first argument must be rank 0, but got rank "+t.rank+"."),this.add(t,e)},t.prototype.scalarMinusArray=function(t,e){return S.assert(1===t.size,"Error in scalarMinusArray: first argument must be rank 0, but got rank "+t.rank+"."),this.subtract(t,e)},t.prototype.arrayMinusScalar=function(t,e){return S.assert(1===e.size,"Error in arrayMinusScalar: second argument must be rank 0, but got rank "+e.rank+"."),this.subtract(t,e)},t.prototype.scaledArrayAdd=function(t,e,n,r){var o=this;return S.assert(1===t.size,"Error in scaledArrayAdd: first argument must rank 0, but got  rank "+t.rank+"."),S.assert(1===n.size,"Error in scaledArrayAdd: third argument must be rank 0, but got Tensor of rank "+n.rank+"."),S.assertShapesMatch(e.shape,r.shape,"Error in scaledArrayAdd: "),T("scaledArrayAdd",function(){return o.add(o.multiply(t,e),o.multiply(n,r))})},t.prototype.scalarTimesArray=function(t,e){return S.assert(1===t.size,"Error in arrayDividedByScalar: first argument must be rank 0, but got rank "+t.rank+"."),this.multiply(t,e)},t.prototype.concat=function(t,e,n){return v.concat([t,e],n)},t.prototype.concat1D=function(t,e){return v.concat1d([t,e])},t.prototype.concat2D=function(t,e,n){return v.concat2d([t,e],n)},t.prototype.concat3D=function(t,e,n){return v.concat3d([t,e],n)},t.prototype.concat4D=function(t,e,n){return v.concat4d([t,e],n)},t.prototype.conv1d=function(t,e,n,r,o,a){return null!=n&&S.assert(1===n.rank,"Error in conv1d: bias must be rank 1, but got rank "+n.rank+"."),v.conv1d(t,e,r,o,a).add(n)},t.prototype.conv2d=function(t,e,n,r,o,a){return null!=n&&S.assert(1===n.rank,"Error in conv2d: bias must be rank 1, but got rank "+n.rank+"."),v.conv2d(t,e,r,o,a).add(n)},t.prototype.argMaxEquals=function(t,e){return S.assertShapesMatch(t.shape,e.shape,"Error in argMaxEquals: "),t.argMax().equal(e.argMax())},t}();e.NDArrayMath=_},function(t,e,n){var r=n(294),o=n(293),a=n(292),i=n(291),s=n(290),u=n(289),c=n(288);c.alea=r,c.xor128=o,c.xorwow=a,c.xorshift7=i,c.xor4096=s,c.tychei=u,t.exports=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(78),u=n(3),c=n(279),l=n(278),p=n(59),h=n(59),f=n(59),d=function(){function t(){}return t.prototype.computeStatistics=function(t,e){return a(this,void 0,void 0,function(){return i(this,function(n){return[2,l.computeDatasetStatistics(this,t,e)]})})},t.prototype.filter=function(t){var e=this;return v(function(){return e.getStream().filter(function(e){return u.tidy(function(){return t(e)})})})},t.prototype.map=function(t){var e=this;return v(function(){return e.getStream().map(function(e){return u.tidy(function(){return t(e)})})})},t.prototype.batch=function(t,e){return void 0===e&&(e=!0),new c.BatchDataset(this,t,e)},t.prototype.concatenate=function(t){var e=this;return v(function(){return e.getStream().concatenate(t.getStream())})},t.prototype.repeat=function(t){var e=this;return v(function(){var n=p.streamFromFunction(function(){return{value:e.getStream(),done:!1}});return h.streamFromConcatenated(n.take(t))})},t.prototype.take=function(t){var e=this;return v(function(){return e.getStream().take(t)})},t.prototype.skip=function(t){var e=this;return v(function(){return e.getStream().skip(t)})},t.prototype.shuffle=function(t,e,n){void 0===n&&(n=!0);var r=this,o=s(e);return v(function(){var e=o.int32();return n&&(e+=o.int32()),r.getStream().shuffle(t,e.toString())})},t.prototype.prefetch=function(t){var e=this;return v(function(){return e.getStream().prefetch(t)})},t.prototype.collectAll=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.getStream().collectRemaining()]})})},t.prototype.forEach=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.getStream().forEach(t)]})})},t}();function v(t){return new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.prototype.getStream=function(){return t()},n}(d))}e.Dataset=d,e.datasetFromStreamFn=v,e.datasetFromElements=function(t){return v(function(){return f.streamFromItems(t)})}},function(t,e,n){"use strict";var r=n(0),o=n(18),a=n(30),i=n(49);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return o(this),(e=void 0!==u)&&o(u),void 0==t?new this:(n=[],e?(r=0,s=a(u,arguments[2],2),i(t,!1,function(t){n.push(s(t,r++))})):i(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";t.exports=n(56)||!n(6)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(5)[t]})},function(t,e,n){for(var r,o=n(5),a=n(22),i=n(57),s=i("typed_array"),u=i("view"),c=!(!o.ArrayBuffer||!o.DataView),l=c,p=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<9;)(r=o[h[p++]])?(a(r.prototype,s,!0),a(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,n){"use strict";var r=n(5),o=n(0),a=n(21),i=n(48),s=n(44),u=n(49),c=n(50),l=n(8),p=n(6),h=n(88),f=n(65),d=n(122);t.exports=function(t,e,n,v,m,g){var y=r[t],b=y,w=m?"set":"add",x=b&&b.prototype,k={},E=function(t){var e=x[t];a(x,t,"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(g||x.forEach&&!p(function(){(new b).entries().next()}))){var S=new b,T=S[w](g?{}:-0,1)!=S,O=p(function(){S.has(1)}),_=h(function(t){new b(t)}),A=!g&&p(function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)});_||((b=e(function(e,n){c(e,b,t);var r=d(new y,e,b);return void 0!=n&&u(n,m,r[w],r),r})).prototype=x,x.constructor=b),(O||A)&&(E("delete"),E("has"),m&&E("get")),(A||T)&&E(w),g&&x.clear&&delete x.clear}else b=v.getConstructor(e,t,m,w),i(b.prototype,n),s.NEED=!0;return f(b,t),k[t]=b,o(o.G+o.W+o.F*(b!=y),k),g||v.setStrong(b,t,m),b}},function(t,e,n){var r=n(4),o=n(18),a=n(10)("species");t.exports=function(t,e){var n,i=r(t).constructor;return void 0===i||void 0==(n=r(i)[a])?e:o(n)}},function(t,e,n){"use strict";var r=n(22),o=n(21),a=n(6),i=n(34),s=n(10);t.exports=function(t,e,n){var u=s(t),c=n(i,u,""[t]),l=c[0],p=c[1];a(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,l),r(RegExp.prototype,u,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)}))}},function(t,e,n){"use strict";var r=n(4);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(10)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},t(a)}catch(t){}return n}},function(t,e,n){var r=n(8),o=n(29),a=n(10)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(29);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(27),o=n(12),a=n(54);t.exports=function(t){return function(e,n,i){var s,u=r(e),c=o(u.length),l=a(i,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(5),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(100),u=n(37),c=n(11),l=n(7),p=function(t){function e(e,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=1e-8);var s=t.call(this,e,o)||this;return s.learningRate=e,s.accumulatedMeanSquares={},s.accumulatedMoments={},s.accumulatedMeanSquaredGraph=new u.TensorArrayMap,s.accumulatedMomentGraph=new u.TensorArrayMap,s.c=i.keep(c.scalar(e)),s.epsilon=i.keep(c.scalar(a)),s.decay=i.keep(c.scalar(n)),s.momentum=i.keep(c.scalar(r)),s.oneMinusDecay=i.keep(c.scalar(1-n)),s}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=a.ENV.engine.registeredVariables[n];if(null==r.accumulatedMeanSquares[n]){i.tidy(function(){e.accumulatedMeanSquares[n]=c.zerosLike(o).variable(!1)})}if(null==r.accumulatedMoments[n]){i.tidy(function(){e.accumulatedMoments[n]=c.zerosLike(o).variable(!1)})}var s=r.accumulatedMeanSquares[n],u=r.accumulatedMoments[n],l=t[n];i.tidy(function(){var t=e.decay.mul(s).add(e.oneMinusDecay.mul(l.square())),r=e.momentum.mul(u).add(e.c.mul(l).div(t.add(e.epsilon).sqrt()));e.accumulatedMeanSquares[n].assign(t),e.accumulatedMoments[n].assign(r);var a=o.sub(r);o.assign(a)})},r=this;for(var o in t)n(o)},e.prototype.beforeBatch=function(t,e,n,r,o){var a=this;this.variableNodes=null==this.specifiedVariableNodes?s.getVariableNodesFromEvaluationSet(n.nodes):this.specifiedVariableNodes,e!==this.prevBatchSize&&(null!=this.cGraph&&this.cGraph.dispose(),this.prevBatchSize=e,this.cGraph=t.keep(c.scalar(this.learningRate/e))),this.variableNodes.forEach(function(e){return a.variableGradients.set(e.output,t.keep(l.Tensor.zeros(e.output.shape)))}),0===this.accumulatedMeanSquaredGraph.size()&&this.variableNodes.forEach(function(t){a.accumulatedMeanSquaredGraph.set(t.output,l.Tensor.zeros(t.output.shape)),a.accumulatedMomentGraph.set(t.output,l.Tensor.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;i.tidy(function(){a.variableNodes.forEach(function(e){var n=r.get(e.output),o=a.variableGradients.get(e.output),s=a.accumulatedMeanSquaredGraph.get(e.output),u=a.accumulatedMomentGraph.get(e.output),c=t.scaledArrayAdd(a.decay,s,a.oneMinusDecay,o.square()),l=t.scaledArrayAdd(a.momentum,u,a.cGraph,o.div(c.add(a.epsilon).sqrt())),p=n.sub(l);a.accumulatedMeanSquaredGraph.set(e.output,i.keep(c)),a.accumulatedMomentGraph.set(e.output,i.keep(l)),r.set(e.output,i.keep(p)),e.data=p,n.dispose(),s.dispose(),u.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new u.TensorArrayMap},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this),this.c.dispose(),this.epsilon.dispose(),this.decay.dispose(),this.momentum.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquaredGraph&&this.accumulatedMeanSquaredGraph.dispose(),null!=this.accumulatedMomentGraph&&this.accumulatedMomentGraph.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(t){return e.accumulatedMeanSquares[t].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(t){return e.accumulatedMoments[t].dispose()})},e}(n(45).Optimizer);e.RMSPropOptimizer=p},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(37),u=n(11),c=n(7),l=function(t){function e(e,n,r,o){void 0===o&&(o=!1);var a=t.call(this,e,r)||this;return a.learningRate=e,a.momentum=n,a.useNesterov=o,a.m=u.scalar(a.momentum),a.accumulations={},a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=a.ENV.engine.registeredVariables[n];if(null==r.accumulations[n]){i.tidy(function(){e.accumulations[n]=u.zerosLike(o).variable(!1)})}var s=r.accumulations[n],c=t[n];i.tidy(function(){var t,r=e.m.mul(s).add(c);t=e.useNesterov?e.c.mul(c.add(r.mul(e.m))).add(o):e.c.mul(r).add(o),e.accumulations[n].assign(r),o.assign(t)})},r=this;for(var o in t)n(o)},e.prototype.beforeBatch=function(e,n,r,o,a){var i=this;null==this.variableVelocitiesGraph&&(this.variableVelocitiesGraph=new s.TensorArrayMap),t.prototype.beforeBatch.call(this,e,n,r,o,a),0===this.variableVelocitiesGraph.size()&&this.variableNodes.forEach(function(t){i.variableVelocitiesGraph.set(t.output,c.Tensor.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;i.tidy(function(){a.variableNodes.forEach(function(t){var e,n=r.get(t.output),o=a.variableGradients.get(t.output),s=a.variableVelocitiesGraph.get(t.output),u=a.m.mul(s).add(o);e=a.useNesterov?a.cGraph.mul(o.add(u.mul(a.m))).add(n):a.cGraph.mul(u).add(n),a.variableVelocitiesGraph.set(t.output,i.keep(u)),r.set(t.output,i.keep(e)),t.data=e,n.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),null!=this.variableVelocitiesGraph&&this.variableVelocitiesGraph.dispose(),null!=this.accumulations)for(var e in this.accumulations)this.accumulations[e].dispose()},e.prototype.setMomentum=function(t){this.momentum=t},e}(n(75).SGDOptimizer);e.MomentumOptimizer=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(37),u=n(11),c=n(7),l=function(t){function e(e,n,r,o,a,c){void 0===o&&(o=1e-8),void 0===a&&(a=0);var l=t.call(this,e,c)||this;return l.learningRate=e,l.accumulatedFirstMoment={},l.accumulatedWeightedInfNorm={},l.firstMomentGraph=new s.TensorArrayMap,l.weightedInfNormGraph=new s.TensorArrayMap,l.c=i.keep(u.scalar(-e)),l.eps=i.keep(u.scalar(o)),l.beta1=i.keep(u.scalar(n)),l.beta2=i.keep(u.scalar(r)),l.decay=i.keep(u.scalar(a)),i.tidy(function(){l.iteration=u.scalar(0).variable(),l.accBeta1=u.scalar(n).variable()}),l.oneMinusBeta1=i.keep(u.scalar(1-n)),l.one=i.keep(u.scalar(1)),l}return o(e,t),e.prototype.applyGradients=function(t){var e=this;i.tidy(function(){var n=e.one.sub(e.accBeta1),r=e.c.div(e.one.add(e.decay.mul(e.iteration)));for(var o in t){var i=a.ENV.engine.registeredVariables[o];if(null==e.accumulatedFirstMoment[o]){var s=!1;e.accumulatedFirstMoment[o]=u.zerosLike(i).variable(s)}if(null==e.accumulatedWeightedInfNorm[o]){s=!1;e.accumulatedWeightedInfNorm[o]=u.zerosLike(i).variable(s)}var c=t[o],l=e.accumulatedFirstMoment[o],p=e.accumulatedWeightedInfNorm[o],h=e.beta1.mul(l).add(e.oneMinusBeta1.mul(c)),f=e.beta2.mul(p),d=c.abs(),v=f.maximum(d);e.accumulatedFirstMoment[o].assign(h),e.accumulatedWeightedInfNorm[o].assign(v);var m=r.div(n).mul(h.div(e.eps.add(v))).add(i);i.assign(m)}e.iteration.assign(e.iteration.add(e.one)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))})},e.prototype.beforeBatch=function(e,n,r,o,a){var i=this;t.prototype.beforeBatch.call(this,e,n,r,o,a),0===this.firstMomentGraph.size()&&this.variableNodes.forEach(function(t){i.firstMomentGraph.set(t.output,c.Tensor.zeros(t.output.shape))}),0===this.weightedInfNormGraph.size()&&this.variableNodes.forEach(function(t){i.weightedInfNormGraph.set(t.output,c.Tensor.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;i.tidy(function(){var e=a.cGraph.div(a.one.add(a.decay.mul(a.iteration)));a.variableNodes.forEach(function(n){var o=r.get(n.output),s=a.variableGradients.get(n.output),u=a.firstMomentGraph.get(n.output),c=a.weightedInfNormGraph.get(n.output),l=t.scaledArrayAdd(a.beta1,u,a.oneMinusBeta1,s),p=a.beta2.mul(c),h=s.abs(),f=p.maximum(h),d=t.scaledArrayAdd(a.one,o,e.div(a.one.sub(a.accBeta1)),l.div(a.eps.add(f)));r.set(n.output,i.keep(d)),n.data=d,a.firstMomentGraph.set(n.output,i.keep(l)),a.weightedInfNormGraph.set(n.output,i.keep(f)),o.dispose(),s.dispose(),u.dispose(),c.dispose()}),a.iteration.assign(a.iteration.add(a.one)),a.accBeta1.assign(a.accBeta1.mul(a.beta1))}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this),this.c.dispose(),this.eps.dispose(),this.accBeta1.dispose(),this.beta1.dispose(),this.beta2.dispose(),this.oneMinusBeta1.dispose(),this.decay.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.firstMomentGraph&&this.firstMomentGraph.dispose(),null!=this.weightedInfNormGraph&&this.weightedInfNormGraph.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(t){return e.accumulatedWeightedInfNorm[t].dispose()})},e}(n(45).Optimizer);e.AdamaxOptimizer=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(37),u=n(11),c=n(7),l=function(t){function e(e,n,r,o,a){void 0===o&&(o=1e-8);var c=t.call(this,e,a)||this;return c.learningRate=e,c.accumulatedFirstMoment={},c.accumulatedSecondMoment={},c.firstMomentGraph=new s.TensorArrayMap,c.secondMomentGraph=new s.TensorArrayMap,c.c=i.keep(u.scalar(-e)),c.eps=i.keep(u.scalar(o)),c.beta1=i.keep(u.scalar(n)),c.beta2=i.keep(u.scalar(r)),i.tidy(function(){c.accBeta1=u.scalar(n).variable(),c.accBeta2=u.scalar(r).variable()}),c.oneMinusBeta1=i.keep(u.scalar(1-n)),c.oneMinusBeta2=i.keep(u.scalar(1-r)),c.one=i.keep(u.scalar(1)),c}return o(e,t),e.prototype.applyGradients=function(t){var e=this;i.tidy(function(){var n=e.one.sub(e.accBeta1),r=e.one.sub(e.accBeta2);for(var o in t){var i=a.ENV.engine.registeredVariables[o];if(null==e.accumulatedFirstMoment[o]){var s=!1;e.accumulatedFirstMoment[o]=u.zerosLike(i).variable(s)}if(null==e.accumulatedSecondMoment[o]){s=!1;e.accumulatedSecondMoment[o]=u.zerosLike(i).variable(s)}var c=t[o],l=e.accumulatedFirstMoment[o],p=e.accumulatedSecondMoment[o],h=e.beta1.mul(l).add(e.oneMinusBeta1.mul(c)),f=e.beta2.mul(p).add(e.oneMinusBeta2.mul(c.square())),d=h.div(n),v=f.div(r);e.accumulatedFirstMoment[o].assign(h),e.accumulatedSecondMoment[o].assign(f);var m=e.c.mul(d.div(e.eps.add(v.sqrt()))).add(i);i.assign(m)}e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))})},e.prototype.beforeBatch=function(e,n,r,o,a){var i=this;t.prototype.beforeBatch.call(this,e,n,r,o,a),0===this.firstMomentGraph.size()&&this.variableNodes.forEach(function(t){i.firstMomentGraph.set(t.output,c.Tensor.zeros(t.output.shape))}),0===this.secondMomentGraph.size()&&this.variableNodes.forEach(function(t){i.secondMomentGraph.set(t.output,c.Tensor.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;i.tidy(function(){var e=a.one.sub(a.accBeta1),n=a.one.sub(a.accBeta2);a.variableNodes.forEach(function(o){var s=r.get(o.output),u=a.variableGradients.get(o.output),c=a.firstMomentGraph.get(o.output),l=a.secondMomentGraph.get(o.output),p=t.scaledArrayAdd(a.beta1,c,a.oneMinusBeta1,u),h=t.scaledArrayAdd(a.beta2,l,a.oneMinusBeta2,u.square()),f=p.div(e),d=h.div(n),v=t.scaledArrayAdd(a.cGraph,f.div(a.eps.add(d.sqrt())),a.one,s);r.set(o.output,i.keep(v)),o.data=v,a.firstMomentGraph.set(o.output,i.keep(p)),a.secondMomentGraph.set(o.output,i.keep(h)),s.dispose(),u.dispose(),c.dispose(),l.dispose()}),a.accBeta1.assign(a.accBeta1.mul(a.beta1)),a.accBeta2.assign(a.accBeta2.mul(a.beta2))}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this),this.c.dispose(),this.eps.dispose(),this.beta1.dispose(),this.beta2.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.firstMomentGraph&&this.firstMomentGraph.dispose(),null!=this.secondMomentGraph&&this.secondMomentGraph.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(t){return e.accumulatedSecondMoment[t].dispose()})},e}(n(45).Optimizer);e.AdamOptimizer=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(37),u=n(11),c=n(7),l=function(t){function e(e,n,r){void 0===r&&(r=.1);var o=t.call(this,e,n)||this;return o.learningRate=e,o.initialAccumulatorValue=r,o.accumulatedGrads={},o.accumulatedSquaredGradients=new s.TensorArrayMap,o.c=i.keep(u.scalar(-e)),o.epsilon=i.keep(u.scalar(1e-8)),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=a.ENV.engine.registeredVariables[n];if(null==r.accumulatedGrads[n]){i.tidy(function(){e.accumulatedGrads[n]=u.fill(o.shape,e.initialAccumulatorValue).variable(!1)})}var s=t[n],c=r.accumulatedGrads[n];i.tidy(function(){var t=c.add(s.square());e.accumulatedGrads[n].assign(t);var r=e.c.mul(s.div(t.add(e.epsilon).sqrt())).add(o);o.assign(r)})},r=this;for(var o in t)n(o)},e.prototype.beforeBatch=function(e,n,r,o,a){var i=this;t.prototype.beforeBatch.call(this,e,n,r,o,a),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){i.accumulatedSquaredGradients.set(t.output,c.Tensor.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;null==this.one&&(this.one=i.keep(u.scalar(1))),i.tidy(function(){a.variableNodes.forEach(function(e){var n=r.get(e.output),o=a.variableGradients.get(e.output),s=a.accumulatedSquaredGradients.get(e.output),u=t.multiply(o,o),c=t.add(s,u),l=t.scaledArrayAdd(a.cGraph,t.divide(o,t.add(t.sqrt(c),a.epsilon)),a.one,n);a.accumulatedSquaredGradients.set(e.output,i.keep(c)),r.set(e.output,i.keep(l)),e.data=l,n.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this),this.epsilon.dispose(),this.c.dispose(),null!=this.one&&this.one.dispose(),null!=this.accumulatedSquaredGradients&&this.accumulatedSquaredGradients.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()})},e}(n(45).Optimizer);e.AdagradOptimizer=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(37),u=n(11),c=n(7),l=function(t){function e(e,n,r,o){void 0===o&&(o=1e-8);var a=t.call(this,e,r)||this;return a.accumulatedGrads={},a.accumulatedUpdates={},a.accumulatedSquaredGradientsGraph=new s.TensorArrayMap,a.accumulatedUpdatesGraph=new s.TensorArrayMap,a.c=i.keep(u.scalar(-e)),a.epsilon=i.keep(u.scalar(o)),a.rho=i.keep(u.scalar(n)),a.oneMinusRho=i.keep(u.scalar(1-n)),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var o=a.ENV.engine.registeredVariables[n];if(null==r.accumulatedGrads[n]){i.tidy(function(){e.accumulatedGrads[n]=u.zerosLike(o).variable(!1)})}if(null==r.accumulatedUpdates[n]){i.tidy(function(){e.accumulatedUpdates[n]=u.zerosLike(o).variable(!1)})}var s=t[n],c=r.accumulatedGrads[n],l=r.accumulatedUpdates[n];i.tidy(function(){var t=e.rho.mul(c).add(e.oneMinusRho.mul(s.square())),r=l.add(e.epsilon).sqrt().div(c.add(e.epsilon).sqrt()).mul(s),a=e.rho.mul(l).add(e.oneMinusRho.mul(r.square()));e.accumulatedGrads[n].assign(t),e.accumulatedUpdates[n].assign(a);var i=e.c.mul(r).add(o);o.assign(i)})},r=this;for(var o in t)n(o)},e.prototype.beforeBatch=function(e,n,r,o,a){var i=this;t.prototype.beforeBatch.call(this,e,n,r,o,a),0===this.accumulatedSquaredGradientsGraph.size()&&this.variableNodes.forEach(function(t){i.accumulatedSquaredGradientsGraph.set(t.output,c.Tensor.zeros(t.output.shape)),i.accumulatedUpdatesGraph.set(t.output,c.Tensor.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var a=this;null==this.one&&(this.one=i.keep(u.scalar(1))),i.tidy(function(){a.variableNodes.forEach(function(e){var n=r.get(e.output),o=a.variableGradients.get(e.output),s=a.accumulatedSquaredGradientsGraph.get(e.output),u=a.accumulatedUpdatesGraph.get(e.output),c=t.multiply(o,o),l=t.scaledArrayAdd(a.rho,s,t.subtract(a.one,a.rho),c),p=t.multiply(t.divide(t.sqrt(t.add(u,a.epsilon)),t.sqrt(t.add(s,a.epsilon))),o),h=t.scaledArrayAdd(a.cGraph,p,a.one,n),f=t.multiply(p,p),d=t.scaledArrayAdd(a.rho,u,t.subtract(a.one,a.rho),f);a.accumulatedSquaredGradientsGraph.set(e.output,i.keep(l)),a.accumulatedUpdatesGraph.set(e.output,i.keep(d)),r.set(e.output,i.keep(h)),e.data=h,n.dispose(),s.dispose(),u.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this),this.c.dispose(),this.epsilon.dispose(),this.rho.dispose(),this.oneMinusRho.dispose(),null!=this.one&&this.one.dispose(),null!=this.accumulatedSquaredGradientsGraph&&this.accumulatedSquaredGradientsGraph.dispose(),null!=this.accumulatedUpdatesGraph&&this.accumulatedUpdatesGraph.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(t){return e.accumulatedUpdates[t].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()}))},e}(n(45).Optimizer);e.AdadeltaOptimizer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=n(1),a=n(66),i=n(19);function s(t){return Object.keys(t.dict).map(function(e){return t.dict[+e].tensor.node})}e.getTerminatingNodesFromFeedDictionary=s,e.getOrderedEvaluationSetFromEvalTensor=function(t,e){var n=s(e),r=t.map(function(t){return t.node}),o=i.getUnorderedEvaluationSet(r,n);return i.getOrderedEvaluationSet(o)},e.addPersistentArraysToTensorArrayMap=function(t,e){t.forEach(function(t){(t instanceof a.VariableNode||t instanceof a.ConstantNode)&&e.set(t.output,t.data)})},e.getVariableNodesFromEvaluationSet=function(t){var e=[];return t.forEach(function(t){t instanceof a.VariableNode&&e.push(t)}),e},e.throwIfFeedDictionaryContainsNDArrays=function(t){Object.keys(t.dict).forEach(function(e){if(t.dict[+e].data instanceof r.Tensor)throw new Error("training requires FeedDictionary entries to be InputProvidersand not NDArrays.")})},e.loadInputsFromFeedDictionaryToTensorArrayMap=function(t,e,n){Object.keys(t.dict).forEach(function(n){var a,i=t.dict[+n];a=i.data instanceof r.Tensor?i.data:i.data.getNextCopy(),o.assert(o.arraysEqual(i.tensor.shape,a.shape),"Error loading FeedEntry: feeding NDArray of shape "+a.shape+" does not match Tensor (id: "+i.tensor.id+") shape: "+i.tensor.shape+"."),e.set(i.tensor,a)})},e.releaseFeedDictionaryInputsFromTensorArrayMap=function(t,e,n){Object.keys(t.dict).forEach(function(n){var o=t.dict[+n];if(!(o.data instanceof r.Tensor)){var a=o.data,i=e.get(o.tensor);a.disposeCopy(i)}e.delete(o.tensor)})},e.removeFeedDictionaryNodesFromEvaluationSet=function(t,e){for(var n=0;n<e.length;){var r=e[n];null!=t.dict[r.output.id]?e.splice(n,1):++n}},e.disposeAndInitializeOperationOutputs=function(t,e){t.forEach(function(t){i.isInputNode(t)||(i.isPassthroughNode(t,e)||e.disposeArray(t.output),e.set(t.output,null))})},e.disposeAndInitializeOperationInputGradients=function(t,e){t.forEach(function(t){Object.keys(t.inputs).forEach(function(n){var r=t.inputs[n];e.get(r,!0)!==e.get(t.output,!0)&&e.disposeArray(r),e.nullify(r)})})},e.disposeTransientOperationArrays=function(t,e,n){t.forEach(function(t){return t.disposeTransientArrays(e,n)})},e.throwErrorIfEvaluationSetContainsPlaceholderNodes=function(t){t.forEach(function(t){if(t instanceof a.PlaceholderNode){var e="["+t.output.shape.join(", ")+"]";throw new Error('Placeholder node "'+t.name+'" '+e+" not present in feed dictionary.")}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SELU_SCALEALPHA=1.7580993408473768,e.SELU_SCALE=1.0507009873554805},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(9),i=n(2),s=n(1),u=n(15);!function(t){t[t.REGULAR=0]="REGULAR",t[t.TRANSPOSED=1]="TRANSPOSED"}(o=e.MatrixOrientation||(e.MatrixOrientation={}));var c=function(){function t(){}return t.matMul=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),u=[l(n),l(r)],r=u[1];var o=(n=u[0])?t.shape[0]:t.shape[1],a=r?e.shape[1]:e.shape[0];s.assert(2===t.rank&&2===e.rank,"Error in matMul: inputs must be rank 2, got ranks "+t.rank+" and "+e.rank+"."),s.assert(o===a,"Error in matMul: inner shapes ("+o+") and ("+a+") of Tensors with shapes "+t.shape+" and "+e.shape+" and transposeA="+n+" and transposeB="+r+" must match.");var u;return i.ENV.engine.runKernel(function(o){return o.matMul(t,e,n,r)},{a:t,b:e},function(o){if(n||r)throw new Error("Backprop for transposed MatMul not yet implemented.");return{a:function(){return o.matMul(e.toFloat(),!1,!0)},b:function(){return t.toFloat().matMul(o,!0,!1)}}})},t.vectorTimesMatrix=function(t,e){return s.assert(1===t.rank,"Error in vectorTimesMatrix: first input must be rank 1, but got rank "+t.rank+"."),s.assert(2===e.rank,"Error in vectorTimesMatrix: second input must be rank 2, but got rank "+e.rank+"."),s.assert(t.size===e.shape[0],"Error in vectorTimesMatrix: size of vector ("+t.size+") must match first dimension of matrix ("+e.shape[0]+")"),t.as2D(1,-1).matMul(e).as1D()},t.matrixTimesVector=function(t,e){return s.assert(1===e.rank,"Error in matrixTimesVector: second input must rank 1, but got rank "+e.rank+"."),s.assert(2===t.rank,"Error in matrixTimesVector: first input must be a rank 2, but got rank "+t.rank+"."),s.assert(e.size===t.shape[1],"Error in matrixTimesVector: size of first rank 1 input "+e.size+" must match inner dimension of second rank 2 input, but got shape "+t.shape+"."),t.matMul(e.as2D(-1,1)).as1D()},t.dotProduct=function(t,e){return s.assert(1===t.rank&&1===e.rank,"Error in dotProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+e.rank+"."),s.assert(t.size===e.size,"Error in dotProduct: size of inputs ("+t.size+") and ("+e.size+") must match."),t.as2D(1,-1).matMul(e.as2D(-1,1)).asScalar()},t.outerProduct=function(t,e){return s.assert(1===t.rank&&1===e.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+e.rank+"."),t.as2D(-1,1).matMul(e.as2D(1,-1))},r([a.doc({heading:"Operations",subheading:"Matrices"}),u.operation],t,"matMul",null),r([u.operation],t,"vectorTimesMatrix",null),r([u.operation],t,"matrixTimesVector",null),r([u.operation],t,"dotProduct",null),r([a.doc({heading:"Operations",subheading:"Matrices"}),u.operation],t,"outerProduct",null),t}();function l(t){return t!==o.REGULAR&&(t===o.TRANSPOSED||t)}e.MatmulOps=c},function(t,e,n){var r=n(5).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(5),o=n(14),a=n(56),i=n(83),s=n(22),u=n(48),c=n(6),l=n(50),p=n(33),h=n(12),f=n(174),d=n(52).f,v=n(13).f,m=n(109),g=n(65),y="prototype",b="Wrong index!",w=r.ArrayBuffer,x=r.DataView,k=r.Math,E=r.RangeError,S=r.Infinity,T=w,O=k.abs,_=k.pow,A=k.floor,C=k.log,N=k.LN2,M=o?"_b":"buffer",P=o?"_l":"byteLength",R=o?"_o":"byteOffset";function I(t,e,n){var r,o,a,i=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?_(2,-24)-_(2,-77):0,p=0,h=t<0||0===t&&1/t<0?1:0;for((t=O(t))!=t||t===S?(o=t!=t?1:0,r=u):(r=A(C(t)/N),t*(a=_(2,-r))<1&&(r--,a*=2),(t+=r+c>=1?l/a:l*_(2,1-c))*a>=2&&(r++,a/=2),r+c>=u?(o=0,r=u):r+c>=1?(o=(t*a-1)*_(2,e),r+=c):(o=t*_(2,c-1)*_(2,e),r=0));e>=8;i[p++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;i[p++]=255&r,r/=256,s-=8);return i[--p]|=128*h,i}function D(t,e,n){var r,o=8*n-e-1,a=(1<<o)-1,i=a>>1,s=o-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-i;else{if(l===a)return r?NaN:c?-S:S;r+=_(2,e),l-=i}return(c?-1:1)*r*_(2,l-e)}function F(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function L(t){return[255&t,t>>8&255]}function z(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function j(t){return I(t,52,8)}function V(t){return I(t,23,4)}function G(t,e,n){v(t[y],e,{get:function(){return this[n]}})}function U(t,e,n,r){var o=f(+n);if(o+e>t[P])throw E(b);var a=t[M]._b,i=o+t[R],s=a.slice(i,i+e);return r?s:s.reverse()}function q(t,e,n,r,o,a){var i=f(+n);if(i+e>t[P])throw E(b);for(var s=t[M]._b,u=i+t[R],c=r(+o),l=0;l<e;l++)s[u+l]=c[a?l:e-l-1]}if(i.ABV){if(!c(function(){w(1)})||!c(function(){new w(-1)})||c(function(){return new w,new w(1.5),new w(NaN),"ArrayBuffer"!=w.name})){for(var W,X=(w=function(t){return l(this,w),new T(f(t))})[y]=T[y],K=d(T),H=0;K.length>H;)(W=K[H++])in w||s(w,W,T[W]);a||(X.constructor=w)}var Q=new x(new w(2)),Y=x[y].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||u(x[y],{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},!0)}else w=function(t){l(this,w,"ArrayBuffer");var e=f(t);this._b=m.call(new Array(e),0),this[P]=e},x=function(t,e,n){l(this,x,"DataView"),l(t,w,"DataView");var r=t[P],o=p(e);if(o<0||o>r)throw E("Wrong offset!");if(o+(n=void 0===n?r-o:h(n))>r)throw E("Wrong length!");this[M]=t,this[R]=o,this[P]=n},o&&(G(w,"byteLength","_l"),G(x,"buffer","_b"),G(x,"byteLength","_l"),G(x,"byteOffset","_o")),u(x[y],{getInt8:function(t){return U(this,1,t)[0]<<24>>24},getUint8:function(t){return U(this,1,t)[0]},getInt16:function(t){var e=U(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=U(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return F(U(this,4,t,arguments[1]))},getUint32:function(t){return F(U(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(U(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(U(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){q(this,1,t,B,e)},setUint8:function(t,e){q(this,1,t,B,e)},setInt16:function(t,e){q(this,2,t,L,e,arguments[2])},setUint16:function(t,e){q(this,2,t,L,e,arguments[2])},setInt32:function(t,e){q(this,4,t,z,e,arguments[2])},setUint32:function(t,e){q(this,4,t,z,e,arguments[2])},setFloat32:function(t,e){q(this,4,t,V,e,arguments[2])},setFloat64:function(t,e){q(this,8,t,j,e,arguments[2])}});g(w,"ArrayBuffer"),g(x,"DataView"),s(x[y],i.VIEW,!0),e.ArrayBuffer=w,e.DataView=x},function(t,e,n){"use strict";var r=n(18);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){var r=n(5),o=n(107).set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,s=r.Promise,u="process"==n(29)(i);t.exports=function(){var t,e,n,c=function(){var r,o;for(u&&(r=i.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){i.nextTick(c)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve();n=function(){l.then(c)}}else n=function(){o.call(r,c)};else{var p=!0,h=document.createTextNode("");new a(c).observe(h,{characterData:!0}),n=function(){h.data=p=!p}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r,o,a,i=n(30),s=n(193),u=n(125),c=n(129),l=n(5),p=l.process,h=l.setImmediate,f=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,m=0,g={},y=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){y.call(t.data)};h&&f||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},f=function(t){delete g[t]},"process"==n(29)(p)?r=function(t){p.nextTick(i(y,t,1))}:v&&v.now?r=function(t){v.now(i(y,t,1))}:d?(a=(o=new d).port2,o.port1.onmessage=b,r=i(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(i(y,t,1),0)}),t.exports={set:h,clear:f}},function(t,e,n){"use strict";var r=n(43),o=n(183),a=n(63),i=n(27);t.exports=n(117)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r=n(17),o=n(54),a=n(12);t.exports=function(t){for(var e=r(this),n=a(e.length),i=arguments.length,s=o(i>1?arguments[1]:void 0,n),u=i>2?arguments[2]:void 0,c=void 0===u?n:o(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){var r=n(407);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(70),o=n(10)("iterator"),a=n(63);t.exports=n(36).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||a[r(t)]}},function(t,e,n){"use strict";var r=n(13),o=n(58);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var r=n(63),o=n(10)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[o]===t)}},function(t,e,n){var r=n(10)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(89),o=n(34);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){"use strict";var r=n(53),o=n(58),a=n(65),i={};n(22)(i,n(10)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:o(1,n)}),a(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(56),o=n(0),a=n(21),i=n(22),s=n(23),u=n(63),c=n(116),l=n(65),p=n(25),h=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,m,g,y){c(n,e,v);var b,w,x,k=function(t){if(!f&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",S="values"==m,T=!1,O=t.prototype,_=O[h]||O["@@iterator"]||m&&O[m],A=!f&&_||k(m),C=m?S?k("entries"):A:void 0,N="Array"==e&&O.entries||_;if(N&&(x=p(N.call(new t)))!==Object.prototype&&x.next&&(l(x,E,!0),r||s(x,h)||i(x,h,d)),S&&_&&"values"!==_.name&&(T=!0,A=function(){return _.call(this)}),r&&!y||!f&&!T&&O[h]||i(O,h,A),u[e]=A,u[E]=d,m)if(b={values:S?A:k("values"),keys:g?A:k("keys"),entries:C},y)for(w in b)w in O||a(O,w,b[w]);else o(o.P+o.F*(f||T),e,b);return b}},function(t,e,n){var r=n(33),o=n(34);t.exports=function(t){return function(e,n){var a,i,s=String(o(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(i=s.charCodeAt(u+1))<56320||i>57343?t?s.charAt(u):a:t?s.slice(u,u+2):i-56320+(a-55296<<10)+65536}}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";var r=n(33),o=n(34);t.exports=function(t){var e=String(o(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},function(t,e,n){var r=n(8),o=n(124).set;t.exports=function(t,e,n){var a,i=e.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&r(a)&&o&&o(t,a),t}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){var r=n(8),o=n(4),a=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(30)(Function.call,n(26).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var r=n(5).document;t.exports=r&&r.documentElement},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(93)("keys"),o=n(57);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(5),o=n(36),a=n(56),i=n(199),s=n(13).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},function(t,e,n){var r=n(8),o=n(5).document,a=r(o)&&r(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(213);e.SqueezeNet=r.SqueezeNet},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultCompare=function(t,e){return t===e?0:t<e?-1:1};var r=function(){function t(t,e){this.comparator=t,this.indexObserver=e,this.heap=[]}return t.prototype.enqueue=function(t){this.heap.push(t),this.onIndexChanged(t,this.heap.length-1),this.siftUp(this.heap.length-1)},t.prototype.dequeue=function(){if(this.empty())throw new Error("dequeue called on empty priority queue.");var t=this.heap[0];return this.swap(0,this.heap.length-1),this.heap.pop(),this.siftDown(0),t},t.prototype.update=function(t,e){var n=e===this.heap.length-1;n||this.swap(e,this.heap.length-1),this.heap.pop(),n||(-1!==this.siftUpIndex(e)?this.siftUp(e):-1!==this.siftDownIndex(e)&&this.siftDown(e)),this.enqueue(t)},t.prototype.empty=function(){return 0===this.heap.length},t.prototype.onIndexChanged=function(t,e){this.indexObserver&&this.indexObserver(t,e)},t.prototype.getParentIndex=function(t){return 0===t?-1:Math.floor((t-1)/2)},t.prototype.getLeftChildIndex=function(t){var e=2*t+1;return e<this.heap.length?e:-1},t.prototype.getRightChildIndex=function(t){var e=2*t+2;return e<this.heap.length?e:-1},t.prototype.siftUpIndex=function(t){var e=this.getParentIndex(t);return-1===e?-1:this.compare(e,t)>0?e:-1},t.prototype.siftUp=function(t){for(var e=this.siftUpIndex(t);-1!==e;)this.swap(t,e),t=e,e=this.siftUpIndex(t)},t.prototype.siftDownIndex=function(t){if(t>=this.heap.length)return-1;var e=t,n=this.getLeftChildIndex(t);-1!==n&&this.compare(n,e)<0&&(e=n);var r=this.getRightChildIndex(t);return-1!==r&&this.compare(r,e)<0&&(e=r),e===t?-1:e},t.prototype.siftDown=function(t){for(var e=this.siftDownIndex(t);-1!==e;)this.swap(t,e),t=e,e=this.siftDownIndex(t)},t.prototype.compare=function(t,e){return this.comparator(this.heap[t],this.heap[e])},t.prototype.swap=function(t,e){var n=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=n,this.onIndexChanged(this.heap[t],t),this.onIndexChanged(this.heap[e],e)},t}();e.PriorityQueue=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(3),a=n(7),i=n(1),s=n(238),u=n(100),c=n(37),l=function(){return function(t){var e=this;this.dict={},t&&t.forEach(function(t){return e.dict[t.tensor.id]=t})}}();e.FeedDictionary=l,function(t){t[t.NONE=0]="NONE",t[t.SUM=1]="SUM",t[t.MEAN=2]="MEAN"}(r=e.CostReduction||(e.CostReduction={}));var p=function(){function t(t,e){this.math=e,this.activationArrayMap=new c.TensorArrayMap,this.runtimeCache={},this.oneScalar=a.Scalar.new(1),this.gradientArrayMap=new c.SummedTensorArrayMap(this.math)}return t.prototype.dispose=function(){var t=this;this.activationArrayMap.dispose(),Object.keys(this.runtimeCache).forEach(function(e){var n=t.runtimeCache[e];n.operations&&n.operations.forEach(function(t){return t.dispose()})}),this.runtimeCache={},null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.oneScalar.dispose()},t.prototype.evalAll=function(t,e){var n=this;return o.tidy(function(){var r=new l(e),o=n.getOrCreateRuntime(t,r),a=n.activationArrayMap;u.disposeAndInitializeOperationOutputs(o.nodes,a),u.disposeTransientOperationArrays(o.operations,n.activationArrayMap,n.gradientArrayMap),u.addPersistentArraysToTensorArrayMap(o.nodes,a),u.loadInputsFromFeedDictionaryToTensorArrayMap(r,a,n.math),o.operations.forEach(function(t){return t.feedForward(n.math,a)});var i=t.map(function(t){return a.get(t)});return t.forEach(function(t){return a.delete(t)}),u.releaseFeedDictionaryInputsFromTensorArrayMap(r,a,n.math),i})},t.prototype.eval=function(t,e){return this.evalAll([t],e)[0]},t.prototype.train=function(t,e,n,s,c){var p=this;void 0===c&&(c=r.NONE),i.assert(i.isScalarShape(t.shape),"Cost tensor for training must be a scalar value."),this.prevBatchSize!==n&&(this.prevBatchSize=n,null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.batchSizeScalar=this.math.keep(a.Scalar.new(n)));var h=new l(e);u.throwIfFeedDictionaryContainsNDArrays(h);var f=this.getOrCreateRuntime([t],h),d=f.operations,v=f.operations.slice().reverse(),m=this.activationArrayMap,g=this.gradientArrayMap;return g.nullify(t),g.add(t,this.oneScalar),u.addPersistentArraysToTensorArrayMap(f.nodes,m),s.beforeBatch(this.math,n,f,m,g),o.tidy(function(){for(var e=a.Scalar.new(0),r=0;r<n;++r)u.disposeAndInitializeOperationOutputs(f.nodes,m),u.disposeAndInitializeOperationInputGradients(f.nodes,g),u.disposeTransientOperationArrays(f.operations,m,g),u.loadInputsFromFeedDictionaryToTensorArrayMap(h,m,p.math),d.forEach(function(t){return t.feedForward(p.math,m)}),v.forEach(function(t){return t.backProp(p.math,m,g)}),s.afterExample(p.math,f,m,g),u.releaseFeedDictionaryInputsFromTensorArrayMap(h,m,p.math),e=p.updateCostForExample(e,m.get(t),c);return s.afterBatch(p.math,n,f,m,g),p.updateCostForBatch(e,c)})},t.prototype.updateCostForExample=function(t,e,n){return n===r.MEAN||n===r.SUM?this.math.add(t,e):t},t.prototype.updateCostForBatch=function(t,e){return e===r.MEAN?this.math.divide(t,this.batchSizeScalar):t},t.prototype.getOrCreateRuntime=function(t,e){var n=this.makeRuntimeCacheKey(t,e),r=this.runtimeCache[n];if(void 0===r){var o=u.getOrderedEvaluationSetFromEvalTensor(t,e);u.removeFeedDictionaryNodesFromEvaluationSet(e,o),u.throwErrorIfEvaluationSetContainsPlaceholderNodes(o),r={nodes:o,operations:s.emitFromGraphNodes(o)},this.runtimeCache[n]=r}return r},t.prototype.makeRuntimeCacheKey=function(t,e){return t.map(function(t){return t.id}).sort().join("_")+"__"+Object.keys(e.dict).sort().join("_")},t}();e.Session=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=function(){function t(t,e,n){void 0===t&&(t=1),void 0===e&&(e="fan_in"),void 0===n&&(n="normal"),this.scale=t,this.mode=e,this.distribution=n}return t.prototype.initialize=function(t,e,n){var o=0;if("fan_in"===this.mode)o=e;else if("fan_out"===this.mode)o=n;else{if("fan_avg"!==this.mode)throw new Error("Unexpected mode for variance scaling initializer: "+this.mode);o=(e+n)/2}if("normal"===this.distribution)return r.truncatedNormal(t,0,Math.sqrt(this.scale/o));if("uniform"===this.distribution)return r.randomUniform(t,0,Math.sqrt(3*this.scale/o));throw new Error("Unexpected distribution for variance scaling initializer: "+this.distribution)},t}();e.VarianceScalingInitializer=o;var a=function(){function t(){}return t.prototype.initialize=function(t,e,n){return r.zeros(t)},t}();e.ZerosInitializer=a;var i=function(){function t(){}return t.prototype.initialize=function(t,e,n){return r.ones(t)},t}();e.OnesInitializer=i;var s=function(){function t(t){void 0===t&&(t=0),this.value=t}return t.prototype.initialize=function(t,e,n){return r.fill(t,this.value)},t}();e.ConstantInitializer=s;var u=function(){function t(t){this.tensor=t}return t.prototype.initialize=function(t,e,n){return this.tensor},t}();e.TensorInitializer=u;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=.05),this.mean=t,this.stdev=e}return t.prototype.initialize=function(t,e,n){return r.randomNormal(t,this.mean,this.stdev)},t}();e.RandomNormalInitializer=c;var l=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=.05),this.mean=t,this.stdev=e}return t.prototype.initialize=function(t,e,n){return r.truncatedNormal(t,this.mean,this.stdev)},t}();e.RandomTruncatedNormalInitializer=l;var p=function(){function t(t,e){void 0===t&&(t=-.05),void 0===e&&(e=.05),this.minval=t,this.maxval=e}return t.prototype.initialize=function(t,e,n){return r.randomUniform(t,this.minval,this.maxval)},t}();e.RandomUniformInitializer=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(101),o=function(){return function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}}();e.UnaryOpProgram=o;var a="\n  if (isNaN(x)) return x;\n";e.ABS="\n  return abs(x);\n",e.RELU=a+"\n  return (x < 0.0) ? 0.0 : x;\n",e.ELU="\n  return (x >= 0.0) ? x : (exp(x) - 1.0);\n",e.ELU_DER="\n  return (x >= 0.0) ? 1.0 : exp(x);\n",e.SELU="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+r.SELU_SCALEALPHA+";\n  float scale = "+r.SELU_SCALE+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",e.LEAKY_RELU=function(t){return"\n    return (x >= 0.0) ? x : "+t+" * x;\n  "},e.STEP=function(t){return void 0===t&&(t=0),a+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "},e.NEG="\n  return -x;\n",e.CEIL="\n  return ceil(x);\n",e.FLOOR="\n  return floor(x);\n",e.EXP="\n  return exp(x);\n",e.LOG="\n  return log(x);\n",e.SQRT=a+"\n  return sqrt(x);\n",e.SIGMOID="\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",e.SIN=a+"\n  return sin(x);\n",e.COS=a+"\n  return cos(x);\n",e.TAN="\n  return tan(x);\n",e.ASIN=a+"\n  return asin(x);\n",e.ACOS=a+"\n  return acos(x);\n",e.ATAN=a+"\n  return atan(x);\n",e.SINH="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",e.COSH="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",e.TANH="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",e.SQUARE="\n  return x * x;\n",e.LOGICAL_NOT=a+"\n  return float(!(x >= 1.0));\n",e.TO_INT="\n  return float(int(x));\n"},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(1),s=n(139),u=n(67),c=n(76),l=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.firstProgram=!0,this.gl=null!=t?t:s.createWebGLContext(),1===a.ENV.get("WEBGL_VERSION")?(this.textureFloatExtension=c.getExtensionOrThrow(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float")):this.colorBufferFloatExtension=c.getExtensionOrThrow(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=c.getExtensionOrThrow(this.gl,"WEBGL_lose_context"),a.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=s.createVertexBuffer(this.gl),this.indexBuffer=s.createIndexBuffer(this.gl),this.framebuffer=c.createFramebuffer(this.gl)}return t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;c.callAndCheck(e,function(){return e.finish()}),c.callAndCheck(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),c.callAndCheck(e,function(){return e.deleteFramebuffer(t.framebuffer)}),c.callAndCheck(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),c.callAndCheck(e,function(){return e.deleteBuffer(t.vertexBuffer)}),c.callAndCheck(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),c.callAndCheck(e,function(){return e.deleteBuffer(t.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},t.prototype.enableAutomaticDebugValidation=function(t){this.autoDebugValidate=t,c.enableDebugWebGLErrorChecking(t)},t.prototype.createMatrixTexture=function(t,e){return this.throwIfDisposed(),s.createMatrixTexture(this.gl,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),s.uploadPixelDataToTexture(this.gl,t,e)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),s.createPackedMatrixTexture(this.gl,t,e)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),c.callAndCheck(this.gl,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,n,r){this.throwIfDisposed();return s.uploadMatrixToTexture(this.gl,t,e,n,r,1)},t.prototype.uploadMatrixToPackedTexture=function(t,e,n,r){return this.throwIfDisposed(),s.uploadMatrixToPackedTexture(this.gl,t,e,n,r)},t.prototype.downloadMatrixFromTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromOutputTexture(r.gl,e,n)})},t.prototype.downloadMatrixFromTextureAsync=function(t,e,n){return r(this,void 0,void 0,function(){var r=this;return o(this,function(o){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return[2,this.downloadMatrixDriverAsync(t,function(){return s.downloadMatrixFromOutputTextureAsync(r.gl,r.getBufferSubDataAsyncExtension,e,n)})]})})},t.prototype.downloadMatrixFromRGBAColorTexture=function(t,e,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromRGBAColorTexture(o.gl,e,n,r)})},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromPackedOutputTexture(r.gl,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=c.createFragmentShader(e,t),r=s.createVertexShader(e),o=c.createProgram(e);return c.callAndCheck(e,function(){return e.attachShader(o,r)}),c.callAndCheck(e,function(){return e.attachShader(o,n)}),c.linkProgram(e,o),this.autoDebugValidate&&c.validateProgram(e,o),this.firstProgram&&(this.firstProgram=!1,this.setProgram(o),s.bindVertexProgramAttributeStreams(e,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&c.callAndCheck(this.gl,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&c.validateProgram(this.gl,this.program),c.callAndCheck(this.gl,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?c.getProgramUniformLocationOrThrow(this.gl,t,e):c.getProgramUniformLocation(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),c.bindTextureToProgramUniformSampler(this.gl,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=u.getPackedMatrixTextureShapeWidthHeight(e,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(t,o,a)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&c.validateProgram(this.gl,this.program),c.validateFramebuffer(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.autoDebugValidate&&this.debugValidate(),c.callAndCheck(t,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=c.getExtensionOrThrow(this.gl,2===a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.runQuery=function(t){var e=this.beginQuery();return t(),this.endQuery(),this.pollQueryTime(e)},t.prototype.beginQuery=function(){if(2===a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE),a=this.gl.getParameter(r.GPU_DISJOINT_EXT);return o&&!a}o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),a=this.gl.getParameter(r.GPU_DISJOINT_EXT);return o&&!a},t.prototype.pollQueryTime=function(t){var e=this;return new Promise(function(n,r){var o=a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION");i.repeatedTry(function(){return e.isQueryAvailable(t,o)}).then(function(){return n(e.getQueryTime(t,o))}).catch(function(){console.warn("Disjoint query timer never available."),n(-1)})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.downloadMatrixDriverSetup=function(t){this.throwIfDisposed(),c.bindColorTextureToFramebuffer(this.gl,t,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)},t.prototype.downloadMatrixDriverTeardown=function(){null!=this.outputTexture?(c.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)):c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.downloadMatrixDriverSetup(t);var n=e();return this.downloadMatrixDriverTeardown(),n},t.prototype.downloadMatrixDriverAsync=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return this.downloadMatrixDriverSetup(t),[4,e()];case 1:return n=r.sent(),this.downloadMatrixDriverTeardown(),[2,n]}})})},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;c.bindColorTextureToFramebuffer(r,t,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(r),this.outputTexture=t,c.callAndCheck(r,function(){return r.viewport(0,0,e,n)}),c.callAndCheck(r,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();e.GPGPUContext=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(46),o="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n";e.ADD="return a + b;",e.SUB="return a - b;",e.MUL="return a * b;",e.DIV="return a / b;",e.POW="\n  return (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.EQUAL=o+"\n  return float(a == b);\n",e.NOT_EQUAL=o+"\n  return float(a != b);\n",e.LESS=o+"\n  return float(a < b);\n",e.LESS_EQUAL=o+"\n  return float(a <= b);\n",e.GREATER=o+"\n  return float(a > b);\n",e.GREATER_EQUAL=o+"\n  return float(a >= b);\n",e.LOGICAL_AND=o+"\n  return float(a >= 1.0 && b >= 1.0);\n",e.LOGICAL_OR=o+"\n  return float(a >= 1.0 || b >= 1.0);\n",e.LOGICAL_XOR=o+"\n  return float(a >= 1.0 ^^ b >= 1.0);\n",e.PRELU="\n  return (a >= 0.0) ? a : b * a;\n",e.PRELU_DER="\n  return (a > 0.0) ? 1.0 : ((a < 0.0) ? b : a);\n",e.MAX=o+"\n  return max(a, b);\n",e.MIN=o+"\n  return min(a, b);\n";var a=function(){return function(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=r.assertAndGetBroadcastShape(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}}();e.BinaryOpProgram=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),u=n(77),c=n(38),l=n(269),p=n(7),h=n(68),f=n(1),d=n(268),v=n(267),m=n(266),g=n(136),y=n(136),b=n(265),w=n(264),x=n(263),k=n(262),E=n(261),S=n(260),T=n(259),O=n(135),_=n(258),A=n(257),C=n(256),N=n(255),M=n(254),P=n(253),R=n(252),I=n(251),D=n(250),F=n(249),B=n(248),L=n(247),z=n(246),j=n(67),V=n(245),G=n(244),U=n(243),q=n(134),W=n(134),X=n(76),K=function(){function t(t,e){if(void 0===e&&(e=!0),this.gpgpu=t,this.delayedStorage=e,this.texData=new WeakMap,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,s.ENV.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");null==t?(this.gpgpu=new O.GPGPUContext,this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,"undefined"!=typeof document&&(this.canvas=document.createElement("canvas")),this.textureManager=new V.TextureManager(this.gpgpu)}return t.prototype.register=function(t,e,n){if(this.texData.has(t))throw new Error("Data buffer is already registered");this.texData.set(t,{shape:e,dtype:n,values:null,texture:null,texShape:null,texType:j.TextureType.FLOAT})},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("MathBackendWebGL.writePixels(): pixels can not be null");var n=[t.height,t.width],r=[t.height,t.width,e];if(t instanceof HTMLVideoElement){if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),t=this.canvas}var o=p.Tensor.make(n,{},"int32");this.texData.get(o.dataId).texType=j.TextureType.UNSIGNED_BYTE,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),t);var a=new S.FromPixelsProgram(r),i=this.compileAndRun(a,[o]);return o.dispose(),i},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(t);var n=this.texData.get(t),r=n.texture,o=n.texShape,a=n.texType;null!=r&&(this.textureManager.releaseTexture(r,o,a),n.texture=null,n.texShape=null),n.values=e,this.delayedStorage||this.uploadToGPU(t)},t.prototype.readSync=function(t){this.throwIfNoData(t);var e=this.texData.get(t),n=e.texture,r=e.values,o=e.texShape;if(null!=r)return this.cacheOnCPU(t),r;var a,i=null!=this.activeTimers;i&&(a=performance.now());var s=this.gpgpu.downloadMatrixFromTexture(n,o[0],o[1]);return i&&(this.downloadWaitMs+=performance.now()-a),this.cacheOnCPU(t,s),e.values},t.prototype.read=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a;return i(this,function(i){switch(i.label){case 0:return this.throwIfNoData(t),e=this.texData.get(t),n=e.texture,r=e.values,o=e.texShape,null!=r?(this.cacheOnCPU(t),[2,r]):s.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")?[4,this.gpgpu.downloadMatrixFromTextureAsync(n,o[0],o[1])]:[3,2];case 1:return a=i.sent(),this.cacheOnCPU(t,a),[2,e.values];case 2:return 0===s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?[2,this.readSync(t)]:[4,this.gpgpu.runQuery(function(){})];case 3:return i.sent(),[2,this.readSync(t)]}})})},t.prototype.time=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),o=f.flatten(this.activeTimers),this.activeTimers=e,r&&(this.programTimersStack=null),[4,Promise.all(o).then(function(t){var e=0;return t.forEach(function(t){return e+=t}),e})];case 1:return a=i.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:a,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},t.prototype.memory=function(){return{unreliable:!1}},t.prototype.startTimer=function(){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),t):(t.endMs=performance.now(),t)},t.prototype.getQueryTime=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.pollQueryTime(t)]:[2,(e=t).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(this.texData.has(t)){var e=this.texData.get(t),n=e.texture,r=e.texShape,o=e.texType;null!=n&&this.textureManager.releaseTexture(n,r,o),this.texData.delete(t)}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},t.prototype.getTextureData=function(t){return this.uploadToGPU(t),this.texData.get(t)},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.slice=function(t,e,n){var r=new z.SliceProgram(n),o=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,o)},t.prototype.reverse=function(t,e){var n=new L.ReverseProgram(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.concat=function(t,e){var n=new w.ConcatProgram(t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.neg=function(t){var e=new W.UnaryOpProgram(t.shape,q.NEG);return this.compileAndRun(e,[t])},t.prototype.matMul=function(t,e,n,r){var o=new M.MatMulProgram(t.shape,e.shape,n,r);return this.compileAndRun(o,[t,e])},t.prototype.multiply=function(t,e){var n=new y.BinaryOpProgram(g.MUL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,h.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.batchNormalization4D=function(t,e,n,r,o,a){var i=[t,e,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;null!=o&&(u=o.shape,i.push(o));var c=new m.BatchNormProgram(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o,a){var i=new C.LRNProgram(t.shape,e,n,r,o,a);return this.compileAndRun(i,[t])},t.prototype.tile=function(t,e){var n=new G.TileProgram(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.pad=function(t,e,n){var r=new I.PadProgram(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.transpose=function(t,e){var n=new U.TransposeProgram(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.gather=function(t,e,n){var r=new T.GatherProgram(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},t.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],a={windowSize:l.computeOptimalWindowSize(o),inSize:o,batchSize:r},i=new F.ReduceProgram(a,e),s=i.outputShape,u=s[0],c=s[1],p=this.makeOutputArray([u,c],n);return this.compileAndRun(i,[t],p),1===p.shape[1]?p:this.reduce(p,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a={windowSize:l.computeOptimalWindowSize(o),inSize:o,batchSize:r},i=new d.ArgMinMaxProgram(a,e,null==n),s=i.outputShape,u=s[0],c=s[1],p=this.makeOutputArray([u,c],"int32"),h=[t];return null!=n&&h.push(n),this.compileAndRun(i,h,p),1===p.shape[1]?p:this.argReduce(t,e,p)},t.prototype.sum=function(t,e){c.assertAxesAreInnerMostDims("sum",e,t.rank);var n=c.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.sizeFromShape(o),i=t.as2D(-1,a),s=h.sumOutType(t.dtype);return this.reduce(i,"sum",s).reshape(r)},t.prototype.argMin=function(t,e){c.assertAxesAreInnerMostDims("argMin",e,t.rank);var n=c.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.sizeFromShape(o),i=t.as2D(-1,a);return this.argReduce(i,"min").reshape(r)},t.prototype.argMax=function(t,e){c.assertAxesAreInnerMostDims("argMax",e,t.rank);var n=c.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.sizeFromShape(o),i=t.as2D(-1,a);return this.argReduce(i,"max").reshape(r)},t.prototype.equal=function(t,e){var n=new y.BinaryOpProgram(g.EQUAL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.notEqual=function(t,e){var n=new y.BinaryOpProgram(g.NOT_EQUAL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.less=function(t,e){var n=new y.BinaryOpProgram(g.LESS,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.lessEqual=function(t,e){var n=new y.BinaryOpProgram(g.LESS_EQUAL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greater=function(t,e){var n=new y.BinaryOpProgram(g.GREATER,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greaterEqual=function(t,e){var n=new y.BinaryOpProgram(g.GREATER_EQUAL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalNot=function(t){var e=new W.UnaryOpProgram(t.shape,q.LOGICAL_NOT);return this.compileAndRun(e,[t])},t.prototype.logicalAnd=function(t,e){var n=new y.BinaryOpProgram(g.LOGICAL_AND,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalOr=function(t,e){var n=new y.BinaryOpProgram(g.LOGICAL_OR,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalXor=function(t,e){var n=new y.BinaryOpProgram(g.LOGICAL_XOR,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.where=function(t,e,n,r){var o=new A.WhereProgram(t.rank,e.shape,e.rank),a=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[t,e,n],a)},t.prototype.topKValues=function(t,e){throw new Error("topKValues GPU not yet implemented!")},t.prototype.topKIndices=function(t,e){throw new Error("topKIndices GPU not yet implemented!")},t.prototype.min=function(t,e){c.assertAxesAreInnerMostDims("min",e,t.rank);var n=c.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.sizeFromShape(o),i=t.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(t,e){var n=new y.BinaryOpProgram(g.MIN,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.max=function(t,e){c.assertAxesAreInnerMostDims("max",e,t.rank);var n=c.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.sizeFromShape(o),i=t.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(t,e){var n=new y.BinaryOpProgram(g.MAX,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.divide=function(t,e){var n=new y.BinaryOpProgram(g.DIV,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){var n=new y.BinaryOpProgram(g.ADD,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,h.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.subtract=function(t,e){var n=new y.BinaryOpProgram(g.SUB,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,h.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.pow=function(t,e){var n=new y.BinaryOpProgram(g.POW,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,h.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.ceil=function(t){var e=new W.UnaryOpProgram(t.shape,q.CEIL);return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new W.UnaryOpProgram(t.shape,q.FLOOR);return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e=new W.UnaryOpProgram(t.shape,q.EXP);return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e=new W.UnaryOpProgram(t.shape,q.LOG);return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new W.UnaryOpProgram(t.shape,q.SQRT);return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new W.UnaryOpProgram(t.shape,q.SQUARE);return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e=new W.UnaryOpProgram(t.shape,q.RELU);return this.compileAndRun(e,[t])},t.prototype.elu=function(t){var e=new W.UnaryOpProgram(t.shape,q.ELU);return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t){var e=new W.UnaryOpProgram(t.shape,q.ELU_DER);return this.compileAndRun(e,[t])},t.prototype.selu=function(t){var e=new W.UnaryOpProgram(t.shape,q.SELU);return this.compileAndRun(e,[t])},t.prototype.leakyRelu=function(t,e){var n=new W.UnaryOpProgram(t.shape,q.LEAKY_RELU(e));return this.compileAndRun(n,[t])},t.prototype.prelu=function(t,e){var n=new y.BinaryOpProgram(g.PRELU,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.preluDer=function(t,e){var n=new y.BinaryOpProgram(g.PRELU_DER,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.int=function(t){var e=new W.UnaryOpProgram(t.shape,q.TO_INT),n=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[t],n)},t.prototype.clip=function(t,e,n){var r=new b.ClipProgram(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.abs=function(t){var e=new W.UnaryOpProgram(t.shape,q.ABS);return this.compileAndRun(e,[t])},t.prototype.sigmoid=function(t){var e=new W.UnaryOpProgram(t.shape,q.SIGMOID);return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new W.UnaryOpProgram(t.shape,q.SIN);return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new W.UnaryOpProgram(t.shape,q.COS);return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new W.UnaryOpProgram(t.shape,q.TAN);return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new W.UnaryOpProgram(t.shape,q.ASIN);return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new W.UnaryOpProgram(t.shape,q.ACOS);return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new W.UnaryOpProgram(t.shape,q.ATAN);return this.compileAndRun(e,[t])},t.prototype.sinh=function(t){var e=new W.UnaryOpProgram(t.shape,q.SINH);return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new W.UnaryOpProgram(t.shape,q.COSH);return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new W.UnaryOpProgram(t.shape,q.TANH);return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n=new W.UnaryOpProgram(t.shape,q.STEP(e));return this.compileAndRun(n,[t])},t.prototype.conv2d=function(t,e,n){var r=new k.Conv2DProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerInput=function(t,e,n){var r=new x.Conv2DDerInputProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new x.Conv2DDerFilterProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2D=function(t,e,n){var r=new E.DepthwiseConv2DProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new D.Pool2DProgram(e,"max",!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.minPool=function(t,e){var n=new D.Pool2DProgram(e,"min",!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.avgPool=function(t,e){var n=new D.Pool2DProgram(e,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t],r)},t.prototype.maxPoolBackprop=function(t,e,n){var r=new D.Pool2DProgram(n,"max",!0),o=this.compileAndRun(r,[e]),a=new N.MaxPool2DBackpropProgram(n),i=this.makeOutputArray(a.outputShape,e.dtype),s=this.compileAndRun(a,[t,o],i);return o.dispose(),s},t.prototype.avgPoolBackprop=function(t,e,n){var r=new v.AvgPool2DBackpropProgram(n),o=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[t],o)},t.prototype.resizeBilinear=function(t,e,n,r){var o=new B.ResizeBilinearProgram(t.shape,e,n,r);return this.compileAndRun(o,[t])},t.prototype.multinomial=function(t,e,n){var r=t.shape[0],o=t.shape[1],a=new P.MultinomialProgram(r,o,e),i=this.makeOutputArray(a.outputShape,"int32"),s=a.getCustomSetupFunc(n);return this.compileAndRun(a,[t],i,s)},t.prototype.oneHot=function(t,e,n,r){var o=new R.OneHotProgram(t.size,e,n,r);return this.compileAndRun(o,[t])},t.prototype.makeOutputArray=function(t,e){return p.Tensor.make(t,{},e)},t.prototype.compileAndRun=function(t,e,n,r){var o=this;null==n&&(n=this.makeOutputArray(t.outputShape,e[0].dtype));var a=e.map(function(t){return o.uploadToGPU(t.dataId),{tensor:t,texData:o.texData.get(t.dataId)}});this.uploadToGPU(n.dataId);var i,s={tensor:n,texData:this.texData.get(n.dataId)},u=_.makeShaderKey(t,a,s),c=this.getAndSaveBinary(u,function(){return _.compileProgram(o.gpgpu,t,a,s)}),l=null!=this.activeTimers;return l&&(i=this.startTimer()),_.runProgram(c,a,s,r),l&&(i=this.endTimer(i),this.activeTimers.push(this.getQueryTime(i))),n},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){if(!this.disposed){for(var t in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},t.prototype.throwIfNoData=function(t){if(!this.texData.has(t))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},t.prototype.uploadToGPU=function(t){this.throwIfNoData(t);var e=this.texData.get(t),n=e.shape,r=e.values,o=e.texture,a=e.dtype,i=e.texType;if(null==o){var s,u=null!=this.activeTimers;u&&(s=performance.now());var c=X.getTextureShapeFromLogicalShape(this.gpgpu.gl,n);e.texShape=c;var l=this.textureManager.acquireTexture(c,i);e.texture=l,null!=r&&(this.gpgpu.uploadMatrixToTexture(l,c[0],c[1],function(t,e){if(t instanceof Float32Array)return t;for(var n=new Float32Array(t.length),r=0;r<n.length;r++){var o=t[r];n[r]=f.isValNaN(o,e)?NaN:o}return n}(r,a)),e.values=null,u&&(this.uploadWaitMs+=performance.now()-s))}},t.prototype.cacheOnCPU=function(t,e){var n=this.delayedStorage,r=this.texData.get(t),o=r.texture,a=r.texShape,i=r.dtype,s=r.texType;n&&null!=o&&(this.textureManager.releaseTexture(o,a,s),r.texture=null,r.texShape=null),null!=e&&(r.values=function(t,e){if("float32"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r){var o=t[r];o=isNaN(o)?f.getNaN(e):Math.round(o),n[r]=o}return n}throw new Error("Unknown dtype "+e)}(e,i))},t}();e.MathBackendWebGL=K,s.ENV.registerBackend("webgl",function(){return new K});var H=function(t){function e(e,n){void 0===n&&(n=!1);return console.warn("new NDArrayMathGPU() is deprecated. Please use dl.setBackend('webgl')."),t.call(this,new K(e),n)||this}return o(e,t),e}(u.NDArrayMath);e.NDArrayMathGPU=H},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(78),u=n(2),c=n(77),l=n(38),p=n(46),h=n(69),f=n(11),d=n(11),v=n(101),m=n(7),g=n(68),y=n(1),b=function(){function t(){this.data=new WeakMap,"undefined"!=typeof document&&(this.canvas=document.createElement("canvas"))}return t.prototype.register=function(t,e,n){if(this.data.has(t))throw new Error("Data buffer is already registered");this.data.set(t,null)},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(t),this.data.set(t,e)},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("MathBackendCPU.writePixels(): pixels can not be null");var n,r;if(t instanceof ImageData)n=t.data;else if(t instanceof HTMLCanvasElement)n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error("pixels is of unknown type: "+t.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),n=this.canvas.getContext("2d").getImageData(0,0,t.width,t.height).data}if(4===e)r=new Int32Array(n);else{var o=t.width*t.height;r=new Int32Array(o*e);for(var a=0;a<o;a++)for(var i=0;i<e;++i)r[a*e+i]=n[4*a+i]}var s=[t.height,t.width,e];return d.tensor3d(r,s,"int32")},t.prototype.read=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.readSync(t)]})})},t.prototype.readSync=function(t){return this.throwIfNoData(t),this.data.get(t)},t.prototype.disposeData=function(t){this.data.has(t)&&this.data.delete(t)},t.prototype.time=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return e=performance.now(),t(),[2,{kernelMs:performance.now()-e}]})})},t.prototype.memory=function(){return{unreliable:!0}},t.prototype.throwIfNoData=function(t){if(!this.data.has(t))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},t.prototype.slice=function(t,e,n){for(var r=f.buffer(n,t.dtype),o=0;o<r.size;++o){var a=r.indexToLoc(o),i=a.map(function(t,n){return t+e[n]});r.set.apply(r,[t.get.apply(t,i)].concat(a))}return r.toTensor()},t.prototype.reverse=function(t,e){for(var n=f.buffer(t.shape,t.dtype),r=t.buffer(),o=function(o){var a=n.indexToLoc(o),i=a.slice();e.forEach(function(e){return i[e]=t.shape[e]-1-i[e]}),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)o(a);return n.toTensor()},t.prototype.concat=function(t,e){var n=h.computeOutShape(t.shape,e.shape,1),r=f.buffer(n,t.dtype);if(1===t.shape[0]&&1===e.shape[0]){var o=t.dataSync(),a=e.dataSync(),i=r.values;return i.set(o,0),i.set(a,t.size),r.toTensor()}for(var s=0;s<n[0];++s){for(var u=0;u<t.shape[1];++u)r.set(t.get(s,u),s,u);for(u=0;u<e.shape[1];++u)r.set(e.get(s,u),s,u+t.shape[1])}return r.toTensor()},t.prototype.neg=function(t){return this.multiply(f.scalar(-1),t)},t.prototype.add=function(t,e){return this.broadcastedBinaryOp(t,e,g.upcastType(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.subtract=function(t,e){return this.broadcastedBinaryOp(t,e,g.upcastType(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.matMul=function(t,e,n,r){for(var o=n?t.shape[0]:t.shape[1],a=n?t.shape[1]:t.shape[0],i=r?e.shape[0]:e.shape[1],s=function(t,e,n){return t.get(e,n)},u=function(t,e,n){return t.get(n,e)},c=n?u:s,l=r?u:s,p=new Float32Array(a*i),h=0,d=0;d<a;++d)for(var v=0;v<i;++v){for(var m=0,g=0;g<o;++g)m+=c(t,d,g)*l(e,g,v);p[h++]=m}return f.tensor2d(p,[a,i])},t.prototype.multiply=function(t,e){return this.broadcastedBinaryOp(t,e,g.upcastType(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.divide=function(t,e){return this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.sum=function(t,e){l.assertAxesAreInnerMostDims("sum",e,t.rank);for(var n=l.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=g.upcastType(t.dtype,"int32"),i=f.zeros(r,a),s=y.sizeFromShape(o),u=i.dataSync(),c=t.dataSync(),p=0;p<u.length;++p){for(var h=p*s,d=0,v=0;v<s;++v)d+=c[h+v];u[p]=d}return i},t.prototype.argMin=function(t,e){l.assertAxesAreInnerMostDims("argMin",e,t.rank);for(var n=l.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.zeros(r,"int32"),i=y.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],d=0,v=0;v<i;++v){var m=u[p+v];if(isNaN(m)){d=y.NAN_INT32;break}m<h&&(h=m,d=v)}s[c]=d}return a},t.prototype.argMax=function(t,e){l.assertAxesAreInnerMostDims("argMax",e,t.rank);for(var n=l.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.zeros(r,"int32"),i=y.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],d=0,v=0;v<i;++v){var m=u[p+v];if(isNaN(m)){d=y.NAN_INT32;break}m>h&&(h=m,d=v)}s[c]=d}return a},t.prototype.equal=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n===r?1:0})},t.prototype.notEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n!==r?1:0})},t.prototype.less=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n<r?1:0})},t.prototype.lessEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n<=r?1:0})},t.prototype.greater=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n>r?1:0})},t.prototype.greaterEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n>=r?1:0})},t.prototype.logicalNot=function(t){for(var e=t.dataSync(),n=new Int32Array(e.length),r=0;r<e.length;++r)y.isValNaN(e[r],t.dtype)?n[r]=y.getNaN("bool"):n[r]=e[r]?0:1;return m.Tensor.make(t.shape,{values:n},"bool")},t.prototype.logicalAnd=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n&&r})},t.prototype.logicalOr=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n||r})},t.prototype.logicalXor=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return y.isValNaN(n,t.dtype)||y.isValNaN(r,e.dtype)?y.getNaN("bool"):n^r})},t.prototype.where=function(t,e,n,r){for(var o=t.dataSync(),a=e.dataSync(),i=n.dataSync(),s=f.zeros(e.shape,r),u=s.dataSync(),c=0,l=0===t.rank||t.rank>1||1===e.rank?1:e.shape[1],p=0;p<o.length;p++)for(var h=0;h<l;h++)1===o[p]?u[c++]=a[p]:u[c++]=i[p];return s},t.prototype.topKValues=function(t,e){return this.topK(t,e).values},t.prototype.topKIndices=function(t,e){return this.topK(t,e).indices},t.prototype.topK=function(t,e){for(var n=t.dataSync(),r=[],o=0;o<n.length;o++)r.push({value:n[o],index:o});r.sort(function(t,e){return e.value-t.value});var a=y.getTypedArrayFromDType(t.dtype,e),i=new Int32Array(e);for(o=0;o<e;o++)a[o]=r[o].value,i[o]=r[o].index;return{values:f.tensor1d(a,t.dtype),indices:m.Tensor1D.new(i)}},t.prototype.min=function(t,e){l.assertAxesAreInnerMostDims("min",e,t.rank);for(var n=l.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.zeros(r,t.dtype),i=y.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[0],d=0;d<i;++d){var v=u[p+d];if(isNaN(v)){h=Number.NaN;break}v<h&&(h=v)}s[c]=h}return a},t.prototype.minimum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.max=function(t,e){l.assertAxesAreInnerMostDims("max",e,t.rank);for(var n=l.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=f.zeros(r,t.dtype),i=y.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],d=0;d<i;++d){var v=u[p+d];if(isNaN(v)){h=Number.NaN;break}v>h&&(h=v)}s[c]=h}return a},t.prototype.maximum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.ceil=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return m.Tensor.make(t.shape,{values:n})},t.prototype.floor=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return m.Tensor.make(t.shape,{values:n})},t.prototype.exp=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return m.Tensor.make(t.shape,{values:n})},t.prototype.log=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.log(o)}return m.Tensor.make(t.shape,{values:n})},t.prototype.sqrt=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.sqrt(o)}return m.Tensor.make(t.shape,{values:n})},t.prototype.square=function(t){for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=o*o}return m.Tensor.make(t.shape,{values:n})},t.prototype.relu=function(t){for(var e=f.zeros(t.shape,t.dtype),n=e.dataSync(),r=t.dataSync(),o=0;o<r.length;++o){var a=r[o];y.isValNaN(a,t.dtype)?n[o]=y.getNaN(e.dtype):n[o]=Math.max(0,r[o])}return e},t.prototype.elu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return m.Tensor.make(t.shape,{values:e})},t.prototype.eluDer=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?1:Math.exp(o)}return m.Tensor.make(t.shape,{values:e})},t.prototype.selu=function(t){for(var e=v.SELU_SCALEALPHA,n=v.SELU_SCALE,r=new Float32Array(t.size),o=t.dataSync(),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?n*i:e*(Math.exp(i)-1)}return m.Tensor.make(t.shape,{values:r})},t.prototype.leakyRelu=function(t,e){for(var n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;o++){var a=r[o];n[o]=a>=0?a:e*a}return m.Tensor.make(t.shape,{values:n})},t.prototype.prelu=function(t,e){for(var n=new Float32Array(t.size),r=t.dataSync(),o=e.dataSync(),a=0;a<r.length;a++){var i=r[a];n[a]=i>=0?i:o[a]*i}return m.Tensor.make(t.shape,{values:n})},t.prototype.preluDer=function(t,e){for(var n=new Float32Array(t.size),r=t.dataSync(),o=e.dataSync(),a=0;a<r.length;a++){var i=r[a];n[a]=i>0?1:i<0?o[a]:i}return m.Tensor.make(t.shape,{values:n})},t.prototype.clip=function(t,e,n){for(var r=new Float32Array(t.size),o=t.dataSync(),a=0;a<o.length;++a)r[a]=Math.min(n,Math.max(e,o[a]));return m.Tensor.make(t.shape,{values:r})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.int=function(t){for(var e=new Int32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=n[r];return m.Tensor.make(t.shape,{values:e},"int32")},t.prototype.sigmoid=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return m.Tensor.make(t.shape,{values:e})},t.prototype.sin=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.cos=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.tan=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.asin=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.acos=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.atan=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.sinh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.cosh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.tanh=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=y.tanh(n[r]);return m.Tensor.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0);for(var n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;++o){var a=r[o];y.isValNaN(a,t.dtype)?n[o]=y.getNaN(t.dtype):n[o]=a>0?1:e}return m.Tensor.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,a=n.padInfo.left,i=n.padInfo.top,s=f.buffer(n.outShape,t.dtype),u=0;u<n.batchSize;++u)for(var c=0;c<n.outChannels;++c)for(var l=0;l<n.outHeight;++l)for(var p=l*n.strideHeight-a,h=Math.max(0,p),d=Math.min(n.inHeight,r+p),v=0;v<n.outWidth;++v){for(var m=v*n.strideWidth-i,g=Math.max(0,m),y=Math.min(n.inWidth,o+m),b=0,w=h;w<d;++w)for(var x=w-p,k=g;k<y;++k)for(var E=k-m,S=0;S<n.inChannels;++S){b+=t.get(u,w,k,S)*e.get(x,E,S,c)}s.set(b,u,l,v,c)}return s.toTensor()},t.prototype.conv2dDerInput=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,a=r-1-n.padInfo.top,i=o-1-n.padInfo.left,s=n.strideHeight,u=n.strideWidth,c=f.buffer(n.inShape,"float32"),l=0;l<n.batchSize;++l)for(var p=0;p<n.inChannels;++p)for(var h=0;h<n.inHeight;++h)for(var d=h-i,v=Math.max(0,Math.ceil(d/s)),m=Math.min(n.outHeight,(r+d)/s),g=0;g<n.inWidth;++g){for(var y=g-a,b=Math.max(0,Math.ceil(y/u)),w=Math.min(n.outWidth,(o+y)/u),x=0,k=v;k<m;++k)for(var E=k*s-d,S=b;S<w;++S)for(var T=S*u-y,O=0;O<n.outChannels;++O){x+=t.get(l,k,S,O)*e.get(r-1-E,o-1-T,p,O)}c.set(x,l,h,g,p)}return c.toTensor()},t.prototype.conv2dDerFilter=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=f.buffer(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=0;l<a;++l)for(var p=Math.max(0,Math.ceil((c-l)/r)),h=Math.min(n.outHeight,(n.inHeight+c-l)/r),d=0;d<i;++d)for(var v=Math.max(0,Math.ceil((u-d)/o)),m=Math.min(n.outWidth,(n.inWidth+u-d)/o),g=0;g<n.inChannels;++g)for(var y=0;y<n.outChannels;++y){for(var b=0,w=0;w<n.batchSize;++w)for(var x=p;x<h;++x)for(var k=l+x*r-c,E=v;E<m;++E){var S=d+E*o-u;b+=t.get(w,k,S,g)*e.get(w,x,E,y)}s.set(b,l,d,g,y)}return s.toTensor()},t.prototype.depthwiseConv2D=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,a=n.padInfo.left,i=n.padInfo.top,s=n.outChannels/n.inChannels,u=f.buffer(n.outShape,t.dtype),c=0;c<n.batchSize;++c)for(var l=0;l<n.inChannels;++l)for(var p=0;p<n.outHeight;++p)for(var h=p*n.strideHeight-a,d=Math.max(0,h),v=Math.min(n.inHeight,r+h),m=0;m<n.outWidth;++m)for(var g=m*n.strideWidth-i,y=Math.max(0,g),b=Math.min(n.inWidth,o+g),w=0;w<s;++w){for(var x=0,k=d;k<v;++k)for(var E=k-h,S=y;S<b;++S){var T=S-g;x+=t.get(c,k,S,l)*e.get(E,T,l,w)}u.set(x,c,p,m,l*s+w)}return u.toTensor()},t.prototype.tile=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=f.buffer(n,t.dtype),a=t.dataSync();for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),s=new Array(t.rank),u=0;u<s.length;u++)s[u]=i[u]%t.shape[u];var c=t.locToIndex(s);o.values[r]=a[c]}return o.toTensor()},t.prototype.pad=function(t,e,n){var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),o=e.map(function(t){return t[0]}),a=t.buffer(),i=f.buffer(r,t.dtype);0!==n&&i.values.fill(n);for(var s=0;s<t.size;s++){var u=a.indexToLoc(s),c=u.map(function(t,e){return t+o[e]});i.set.apply(i,[t.get.apply(t,u)].concat(c))}return i.toTensor()},t.prototype.transpose=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var o=new Float32Array(t.size),a=t.dataSync(),i=m.Tensor.make(n,{values:o});for(r=0;r<t.size;++r){for(var s=t.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[e[c]];o[i.locToIndex(u)]=a[r]}return i},t.prototype.gather=function(t,e,n){var r=t.shape.slice(),o=e.dataSync();r[n]=o.length;for(var a=f.zeros(r,t.dtype),i=t.dataSync(),s=a.dataSync(),u=0;u<a.size;++u){var c=a.indexToLoc(u),l=c.slice();l[n]=o[c[n]];var p=t.locToIndex(l);s[u]=i[p]}return a},t.prototype.pool=function(t,e,n){for(var r=e.strideHeight,o=e.strideWidth,a=e.filterHeight,i=e.filterWidth,s=f.buffer(e.outShape,"float32"),u=e.padInfo.top,c=e.padInfo.left,l=0;l<e.batchSize;++l)for(var p=0;p<e.inChannels;++p)for(var h=0;h<e.outHeight;++h)for(var d=h*r-u,v=Math.max(0,d),m=Math.min(e.inHeight,a+d),g=0;g<e.outWidth;++g){for(var y=g*o-c,b=Math.max(0,y),w=Math.min(e.inWidth,i+y),x="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=0,E=v;E<m;++E){for(var S=b;S<w;++S){var T=t.get(l,E,S,p);if(isNaN(T)){x=NaN,k=NaN;break}"max"===n&&T>x||"min"===n&&T<x?x=T:"avg"===n&&(k+=T/(a*i))}if(isNaN(x))break}s.set("avg"===n?k:x,l,h,g,p)}return s.toTensor()},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var n=f.buffer(e.outShape,"int32"),r=e.strideHeight,o=e.strideWidth,a=e.filterHeight,i=e.filterWidth,s=e.padInfo.top,u=e.padInfo.left,c=0;c<e.batchSize;++c)for(var l=0;l<e.inChannels;++l)for(var p=0;p<e.outHeight;++p)for(var h=p*r-s,d=Math.max(0,h),v=Math.min(e.inHeight,a+h),m=0;m<e.outWidth;++m){for(var g=m*o-u,y=Math.max(0,g),b=Math.min(e.inWidth,i+g),w=Number.NEGATIVE_INFINITY,x=-1,k=d;k<v;++k)for(var E=k-h,S=y;S<b;++S){var T=S-g,O=t.get(c,k,S,l);O>w&&(w=O,x=E*i+T)}n.set(x,c,p,m,l)}return n.toTensor()},t.prototype.maxPoolBackprop=function(t,e,n){for(var r=this.maxPoolPositions(e,n),o=n.strideHeight,a=n.strideWidth,i=n.filterHeight,s=n.filterWidth,u=s-1-n.padInfo.left,c=i-1-n.padInfo.top,l=f.buffer(e.shape,"float32"),p=0;p<n.batchSize;++p)for(var h=0;h<n.inChannels;++h)for(var d=0;d<n.inHeight;++d)for(var v=0;v<n.inWidth;++v){for(var m=d-c,g=v-u,y=0,b=0;b<i;++b){var w=(m+b)/o;if(!(w<0||w>=n.outHeight||Math.floor(w)!==w))for(var x=0;x<s;++x){var k=(g+x)/a;if(!(k<0||k>=n.outWidth||Math.floor(k)!==k)){var E=i*s-1-r.get(p,w,k,h)===b*s+x?1:0;if(0!==E)y+=t.get(p,w,k,h)*E}}}l.set(y,p,d,v,h)}return l.toTensor()},t.prototype.avgPoolBackprop=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=i-1-n.padInfo.left,u=a-1-n.padInfo.top,c=f.buffer(e.shape,"float32"),l=1/(a*i),p=0;p<n.batchSize;++p)for(var h=0;h<n.inChannels;++h)for(var d=0;d<n.inHeight;++d)for(var v=0;v<n.inWidth;++v){for(var m=d-u,g=v-s,y=0,b=0;b<a;++b){var w=(m+b)/r;if(!(w<0||w>=n.outHeight||Math.floor(w)!==w))for(var x=0;x<i;++x){var k=(g+x)/o;if(!(k<0||k>=n.outWidth||Math.floor(k)!==k))y+=t.get(p,w,k,h)}}c.set(y*l,p,d,v,h)}return c.toTensor()},t.prototype.minPool=function(t,e){return this.pool(t,e,"min")},t.prototype.avgPool=function(t,e){return this.pool(t,e,"avg").toFloat()},t.prototype.resizeBilinear=function(t,e,n,r){for(var o=t.shape,a=o[0],i=o[1],s=o[2],u=o[3],c=f.buffer([a,e,n,u],t.dtype),l=r?[i-1,s-1]:[i,s],p=r?[e-1,n-1]:[e,n],h=0;h<a;h++)for(var d=0;d<e;d++)for(var v=0;v<n;v++)for(var m=0;m<u;m++){var g=l[0]*d/p[0],y=l[1]*v/p[1],b=Math.floor(g),w=Math.min(i-1,Math.ceil(g)),x=Math.floor(y),k=Math.min(s-1,Math.ceil(y)),E=t.get(h,b,x,m),S=t.get(h,w,x,m),T=y-x,O=E+(t.get(h,b,k,m)-E)*T,_=O+(S+(t.get(h,w,k,m)-S)*T-O)*(g-b);c.set(_,h,d,v,m)}return c.toTensor()},t.prototype.batchNormalization4D=function(t,e,n,r,o,a){for(var i=t.dataSync(),s=e.dataSync(),u=n.dataSync(),c=o?o.dataSync():new Float32Array([1]),l=a?a.dataSync():new Float32Array([0]),p=new Float32Array(i.length),h=0;h<i.length;h++)p[h]=l[h%l.length]+(i[h]-s[h%s.length])*c[h%c.length]/Math.sqrt(u[h%u.length]+r);return d.tensor4d(p,t.shape)},t.prototype.localResponseNormalization4D=function(t,e,n,r,o,a){for(var i=f.buffer(t.shape,"float32"),s=e,u=i.shape[1]-1,c=i.shape[2]-1,l=i.shape[3]-1,p=function(e,n,r,o){for(var a=0,i=Math.max(0,o-s);i<=Math.min(o+s,l);i++){var u=t.get(e,n,r,i);a+=u*u}return a},h=function(e,n,r,o){for(var a=0,i=Math.max(0,n-s);i<=Math.min(n+s,u);i++)for(var l=Math.max(0,r-s);l<=Math.min(r+s,c);l++)a+=Math.pow(t.get(e,i,l,o),2);return a},d=0;d<i.shape[0];d++)for(var v=0;v<=i.shape[1];v++)for(var m=0;m<i.shape[2];m++)for(var g=0;g<i.shape[3];g++){var y="withinChannel"===a?h(d,v,m,g):p(d,v,m,g),b=t.get(d,v,m,g)*Math.pow(n+r*y,-o);i.set(b,d,v,m,g)}return i.toTensor()},t.prototype.multinomial=function(t,e,n){for(var r=t.shape[0],o=t.shape[1],a=f.zeros([r,e],"int32"),i=a.dataSync(),u=t.dataSync(),c=0;c<r;++c){var l=c*o,p=new Float32Array(o-1);p[0]=u[l];for(var h=1;h<p.length;++h)p[h]=p[h-1]+u[l+h];for(var d=s.alea(n.toString()),v=c*e,m=0;m<e;++m){var g=d();i[v+m]=p.length;for(var y=0;y<p.length;y++)if(g<p[y]){i[v+m]=y;break}}}return a},t.prototype.oneHot=function(t,e,n,r){var o=new Float32Array(t.size*e);o.fill(r);for(var a=0;a<t.size;++a)o[a*e+t.get(a)]=n;return f.tensor2d(o,[t.size,e])},t.prototype.broadcastedBinaryOp=function(t,e,n,r){for(var o=p.assertAndGetBroadcastShape(t.shape,e.shape),a=f.buffer(o,n),i=t.dataSync(),s=e.dataSync(),u=p.getBroadcastDims(t.shape,o),c=p.getBroadcastDims(e.shape,o),l=function(n){var o=a.indexToLoc(n),l=o.slice(-t.rank);u.forEach(function(t){return l[t]=0});var p=t.locToIndex(l),h=o.slice(-e.rank);c.forEach(function(t){return h[t]=0});var f=e.locToIndex(h);a.values[n]=r(i[p],s[f])},h=0;h<a.values.length;++h)l(h);return a.toTensor()},t.prototype.dispose=function(){},t}();e.MathBackendCPU=b,u.ENV.registerBackend("cpu",function(){return new b});var w=function(t){function e(e){void 0===e&&(e=!1);return console.warn("new NDArrayMathCPU() is deprecated. Please use dl.setBackend('cpu')."),t.call(this,"cpu",e)||this}return o(e,t),e}(c.NDArrayMath);e.NDArrayMathCPU=w},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(67),s=n(76);function u(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}}function c(t,e){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===a.ENV.get("WEBGL_VERSION")?4===e?t.RGBA:t.RED:t.RGBA}function l(t){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?t.FLOAT:t.UNSIGNED_BYTE}function p(t,e,n,r){s.validateTextureSize(t,e,n);var o=s.createTexture(t),i=t.TEXTURE_2D,u=function(t,e){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===a.ENV.get("WEBGL_VERSION")?4===e?t.RGBA32F:t.R32F:t.RGBA}(t,r),p=c(t,r);return s.callAndCheck(t,function(){return t.bindTexture(i,o)}),s.callAndCheck(t,function(){return t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),s.callAndCheck(t,function(){return t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),s.callAndCheck(t,function(){return t.texParameteri(i,t.TEXTURE_MIN_FILTER,t.NEAREST)}),s.callAndCheck(t,function(){return t.texParameteri(i,t.TEXTURE_MAG_FILTER,t.NEAREST)}),s.callAndCheck(t,function(){return t.texImage2D(i,0,u,e,n,0,p,l(t),null)}),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)}),o}function h(t,e,n,r,o,a){var i=c(t,a);s.validateTextureSize(t,n,r),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),s.callAndCheck(t,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,i,l(t),o)}),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function f(t,e,n){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?new Float32Array(i.getUnpackedArraySizeFromMatrixSize(t*e,n)):new Uint8Array(t*e*n)}function d(t,e,n,r){if(a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var o=new Float32Array(e*n);return i.decodeMatrixFromUnpackedArray(t,o,r),o}return i.decodeToFloatArray(t)}e.getWebGLContextAttributes=u,e.createWebGLContext=function(t){var e,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return e=null!=t?s.createWebGLRenderingContextFromCanvas(t,n):s.createWebGLRenderingContext(n),s.callAndCheck(e,function(){return e.disable(e.DEPTH_TEST)}),s.callAndCheck(e,function(){return e.disable(e.STENCIL_TEST)}),s.callAndCheck(e,function(){return e.disable(e.BLEND)}),s.callAndCheck(e,function(){return e.disable(e.DITHER)}),s.callAndCheck(e,function(){return e.disable(e.POLYGON_OFFSET_FILL)}),s.callAndCheck(e,function(){return e.disable(e.SAMPLE_COVERAGE)}),s.callAndCheck(e,function(){return e.enable(e.SCISSOR_TEST)}),s.callAndCheck(e,function(){return e.enable(e.CULL_FACE)}),s.callAndCheck(e,function(){return e.cullFace(e.BACK)}),e},e.createVertexShader=function(t){return s.createVertexShader(t,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")},e.createVertexBuffer=function(t){var e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return s.createStaticVertexBuffer(t,e)},e.createIndexBuffer=function(t){var e=new Uint16Array([0,1,2,2,1,3]);return s.createStaticIndexBuffer(t,e)},e.createMatrixTexture=function(t,e,n){var r=i.getUnpackedMatrixTextureShapeWidthHeight(e,n);return p(t,r[0],r[1],1)},e.createColorMatrixTexture=function(t,e,n){var r=i.getColorMatrixTextureShapeWidthHeight(e,n);return p(t,r[0],r[1],4)},e.createPackedMatrixTexture=function(t,e,n){var r=i.getPackedMatrixTextureShapeWidthHeight(e,n);return p(t,r[0],r[1],4)},e.bindVertexProgramAttributeStreams=function(t,e,n){s.callAndCheck(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),s.bindVertexBufferToProgramAttribute(t,e,"clipSpacePos",n,3,20,0),s.bindVertexBufferToProgramAttribute(t,e,"uv",n,2,20,12)},e.uploadPixelDataToTexture=function(t,e,n){s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),s.callAndCheck(t,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},e.uploadMatrixToTexture=function(t,e,n,r,o,u){var c,l=i.getUnpackedMatrixTextureShapeWidthHeight(n,r),p=l[0],f=l[1];if(a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var d=1===u?s.getChannelsPerTexture():u;1===d?c=o:(c=new Float32Array(i.getUnpackedArraySizeFromMatrixSize(o.length,d)),i.encodeMatrixToUnpackedArray(o,c,d))}else c=i.encodeFloatArray(o);h(t,e,p,f,c,u)},e.uploadMatrixToPackedTexture=function(t,e,n,r,o){var a=i.getPackedMatrixTextureShapeWidthHeight(n,r),s=a[0],u=a[1],c=new Float32Array(i.getPackedRGBAArraySizeFromMatrixShape(n,r));i.encodeMatrixToPackedRGBA(o,n,r,c),h(t,e,s,u,c,4)},e.downloadMatrixFromOutputTextureAsync=function(t,e,n,a){return r(this,void 0,void 0,function(){var r,i,u,c,p;return o(this,function(o){switch(o.label){case 0:return r=t,u=f(n,a,i=4),c=u instanceof Float32Array?4*u.length:u,p=t.createBuffer(),s.callAndCheck(t,function(){return t.bindBuffer(r.PIXEL_PACK_BUFFER,p)}),s.callAndCheck(t,function(){return t.bufferData(r.PIXEL_PACK_BUFFER,c,t.STATIC_DRAW)}),s.callAndCheck(t,function(){return r.readPixels(0,0,a,n,t.RGBA,l(t),0)}),[4,e.getBufferSubDataAsync(r.PIXEL_PACK_BUFFER,0,u)];case 1:return o.sent(),[2,d(u,n,a,i)]}})})},e.downloadMatrixFromOutputTexture=function(t,e,n){var r=i.getUnpackedMatrixTextureShapeWidthHeight(e,n),o=r[0],a=r[1],u=f(e,n,4);return s.callAndCheck(t,function(){return t.readPixels(0,0,o,a,t.RGBA,l(t),u)}),d(u,e,n,4)},e.downloadMatrixFromRGBAColorTexture=function(t,e,n,r){var o=e*n*4,a=new Uint8Array(o);s.callAndCheck(t,function(){return t.readPixels(0,0,n,e,t.RGBA,t.UNSIGNED_BYTE,a)});for(var u=new Float32Array(o),c=0;c<a.length;c++)u[c]=a[c];var l=new Float32Array(e*n*r);return i.decodeMatrixFromUnpackedColorRGBAArray(u,l,r),l},e.downloadMatrixFromPackedOutputTexture=function(t,e,n){var r=i.getPackedMatrixTextureShapeWidthHeight(e,n),o=r[0],a=r[1],u=new Float32Array(i.getPackedRGBAArraySizeFromMatrixShape(e,n));s.callAndCheck(t,function(){return t.readPixels(0,0,o,a,t.RGBA,l(t),u)});var c=new Float32Array(e*n);return i.decodeMatrixFromPackedRGBA(u,e,n,c)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=n(1),a=function(){function t(t){this.dataShapes=t,this.normalizationInfo={}}return t.prototype.getDataShape=function(t){return this.dataShapes[t]},t.prototype.getData=function(){return this.dataset},t.prototype.getStats=function(){var t=this;if(null==this.dataset)throw new Error("Data is null.");return this.dataset.map(function(e){return t.getStatsForData(e)})},t.prototype.getStatsForData=function(t){var e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=t.map(function(t,e){return e});o.shuffle(r),r=r.slice(.1*r.length);for(var a=0;a<r.length;a++)for(var i=t[r[a]].dataSync(),s=0;s<i.length;s++)e=Math.min(e,i[s]),n=Math.max(n,i[s]);return{inputMin:e,inputMax:n,exampleCount:t.length,shape:t[0].shape}},t.prototype.normalizeExamplesToRange=function(t,e,n,a,i){var s=n instanceof Float32Array&&e instanceof Float32Array,u=a instanceof Float32Array&&i instanceof Float32Array,c=o.sizeFromShape(t[0].shape),l=[];return t.forEach(function(t){for(var o=t.dataSync(),p=new Float32Array(c),h=0;h<c;h++){var f=s?e[h]:e,d=(s?n[h]:n)-f,v=u?a[h]:a,m=(u?i[h]:i)-v;p[h]=0===d?v:v+m*(o[h]-f)/d}l.push(r.Tensor.make(t.shape,{values:p},"float32"))}),l},t.prototype.computeBounds=function(t){var e=this;if(null==this.dataset)throw new Error("Data is null.");var n=o.sizeFromShape(this.dataset[t][0].shape);this.normalizationInfo[t]={isNormalized:!1,minValues:new Float32Array(n),maxValues:new Float32Array(n)};for(var r=0;r<n;r++)this.normalizationInfo[t].minValues[r]=Number.POSITIVE_INFINITY,this.normalizationInfo[t].maxValues[r]=Number.NEGATIVE_INFINITY;this.dataset[t].forEach(function(r){for(var o=r.dataSync(),a=0;a<n;a++)e.normalizationInfo[t].minValues[a]=Math.min(e.normalizationInfo[t].minValues[a],o[a]),e.normalizationInfo[t].maxValues[a]=Math.max(e.normalizationInfo[t].maxValues[a],o[a])})},t.prototype.normalizeWithinBounds=function(t,e,n){if(null==this.dataset)throw new Error("Data is null.");if(t>=this.dataset.length)throw new Error("dataIndex out of bounds.");var r,o;null==this.normalizationInfo[t]&&this.computeBounds(t),this.normalizationInfo[t].isNormalized?(r=this.normalizationInfo[t].lowerBound,o=this.normalizationInfo[t].upperBound):(r=this.normalizationInfo[t].minValues,o=this.normalizationInfo[t].maxValues),this.dataset[t]=this.normalizeExamplesToRange(this.dataset[t],r,o,e,n),this.normalizationInfo[t].isNormalized=!0,this.normalizationInfo[t].lowerBound=e,this.normalizationInfo[t].upperBound=n},t.prototype.isNormalized=function(t){return null!=this.normalizationInfo&&this.normalizationInfo[t].isNormalized},t.prototype.removeNormalization=function(t){if(null==this.dataset)throw new Error("Training or test data is null.");this.isNormalized(t)&&(this.dataset[t]=this.normalizeExamplesToRange(this.dataset[t],this.normalizationInfo[t].lowerBound,this.normalizationInfo[t].upperBound,this.normalizationInfo[t].minValues,this.normalizationInfo[t].maxValues),this.normalizationInfo[t].isNormalized=!1)},t.prototype.unnormalizeExamples=function(t,e){return this.isNormalized(e)?this.normalizeExamplesToRange(t,this.normalizationInfo[e].lowerBound,this.normalizationInfo[e].upperBound,this.normalizationInfo[e].minValues,this.normalizationInfo[e].maxValues):t},t.prototype.dispose=function(){if(null!=this.dataset){for(var t=0;t<this.dataset.length;t++)for(var e=0;e<this.dataset[t].length;e++)this.dataset[t][e].dispose();this.dataset=[]}},t}();e.InMemoryDataset=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),i=n(1),s=n(140),u=1e3;e.getXhrDatasetConfig=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){e(JSON.parse(r.responseText))},r.onerror=function(t){n(t)},r.send()})};var c=function(t){function e(e){var n=t.call(this,e.data.map(function(t){return t.shape}))||this;return n.xhrDatasetConfig=e,n}return o(e,t),e.prototype.getTensor=function(t){var e="png"===t.dataType?function(t,e){return new Promise(function(n,r){var o=new Image;o.setAttribute("crossOrigin",""),o.onload=function(){var t=function(t,e){var n=document.createElement("canvas"),r=n.getContext("2d"),o=t.height,a=i.sizeFromShape(e),s=new Uint8Array(o*a);if(t.width!==e[0]*e[1])throw new Error("Image width ("+t.width+") must be multiple of rows*columns ("+e[0]+"*"+e[1]+") of the tensor");n.width=t.width,n.height=u;for(var c=n.width,h=n.height,f=c,d=h,v=e[2],m=0,g=Math.ceil(o/n.height),y=0;y<g;++y){var b=y*n.height;y===g-1&&o%n.height>0&&(n.height=o%n.height,h=n.height,d=h),r.drawImage(t,0,b,c,h,0,0,f,d);var w=r.getImageData(0,0,n.width,n.height).data;1===v?l(w,s,m):p(w,s,m),m+=n.height*a}return s}(o,e);o.src="",o=null,n(t)},o.src=t.path})}(t,t.shape):function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.path),r.responseType="arraybuffer",r.onload=function(n){var o="float32"===t.dataType?new Float32Array(r.response):new Uint8Array(r.response);e(o)},r.onerror=function(t){return n(t)},r.send()})}(t),n=i.sizeFromShape(t.shape);return e.then(function(e){for(var r=[],o=0;o<e.length/n;o++){var i=e.subarray(o*n,(o+1)*n),s=a.Tensor.make(t.shape,{values:new Float32Array(i)},"float32");r.push(s)}return r})},e.prototype.fetchData=function(){var t=this;return new Promise(function(e,n){var r=t.xhrDatasetConfig.data.map(function(e){return t.getTensor(e)});Promise.all(r).then(function(n){t.dataset=n,e()})})},e}(s.InMemoryDataset);function l(t,e,n){for(var r=n,o=0;o<t.length;o+=4)e[r++]=t[o]}function p(t,e,n){for(var r=n,o=0;o<t.length;o+=4)e[r]=t[o],e[r+1]=t[o+1],e[r+2]=t[o+2],r+=3}e.XhrDataset=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(274),u=n(59),c=n(273),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.decodeUTF8=function(){return new p(this)},e}(u.DataStream);e.ByteStream=l;var p=function(t){function e(e){var n=t.call(this)||this;return n.impl=new h(e),n}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.impl.next()]})})},e}(c.StringStream),h=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.partial=new Uint8Array([]),n.partialBytesValid=0,n}return o(e,t),e.prototype.pump=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a,u,c;return i(this,function(i){switch(i.label){case 0:return[4,this.upstream.next()];case 1:if((t=i.sent()).done){if(0===this.partial.length)return[2,!1];e=new Uint8Array([])}else e=t.value;for(n=this.partial.length-this.partialBytesValid,o=r=n,a=0;r<e.length;)o=r,a=f(e[r]),r=o+a;return r===e.length&&(o=r),u=s.decode(String.fromCharCode.apply(null,e.slice(n,o))),n>0?(this.partial.set(e.slice(0,n),this.partialBytesValid),c=s.decode(String.fromCharCode.apply(null,this.partial)),this.outputQueue.push(c+u)):this.outputQueue.push(u),o===e.length?(this.partial=new Uint8Array([]),this.partialBytesValid=0):(this.partial=new Uint8Array(new ArrayBuffer(a)),this.partial.set(e.slice(o),0),this.partialBytesValid=e.length-o),[2,!0]}})})},e}(u.QueueStream);function f(t){return t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.file=e,r.options=n,r.offset=n.offset||0,r.chunkSize=n.chunkSize||1048576,r}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){var t,e,n=this;return i(this,function(r){switch(r.label){case 0:return this.offset>=this.file.size?[2,{value:null,done:!0}]:(t=new Promise(function(t,e){var r=new FileReader;r.onload=function(n){var o=r.result;if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),!(o instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(o)},r.onabort=function(t){return e(new Error("Aborted"))},r.onerror=function(t){return e(new Error(t.error))};var o=n.offset+n.chunkSize,a=n.file.slice(n.offset,o);r.readAsArrayBuffer(a),n.offset=o}),e={},[4,t]);case 1:return[2,(e.value=r.sent(),e.done=!1,e)]}})})},e}(n(142).ByteStream);e.FileReaderStream=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){}}();e.DataSource=r},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){void 0===n&&(n="line");var r=t.call(this)||this;return r.input=e,r.columnName=n,r}return o(e,t),e.prototype.getStream=function(){var t=this;return this.input.getStream().decodeUTF8().split("\n").map(function(e){return(n={})[t.columnName]=e,n;var n})},e}(n(79).Dataset);e.TextLineDataset=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){if(this.capacity=t,this.begin=0,this.end=0,t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return t.prototype.wrap=function(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity},t.prototype.get=function(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]},t.prototype.set=function(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e},t.prototype.length=function(){var t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t},t.prototype.isFull=function(){return this.length()===this.capacity},t.prototype.isEmpty=function(){return 0===this.length()},t.prototype.push=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)},t.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var t=this.get(this.end);return this.set(this.end,void 0),t},t.prototype.unshift=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)},t.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t},t.prototype.shuffleExcise=function(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n},t}();e.RingBuffer=r},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=function(){function t(){}return t.tidy=function(t,e,n){void 0===n&&(n=!1);var r=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to dl.tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to dl.tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to dl.tidy() must be a function");r=t}a.ENV.engine.startScope(r,n);var o=e();return o instanceof Promise&&console.warn("Returning a promise inside of tidy is dangerous. This will be a run-time error in 0.6.0"),a.ENV.engine.endScope(o,n),o},t.dispose=function(t){i.extractTensorsFromAny(t).forEach(function(t){return t.dispose()})},t.keep=function(t){return a.ENV.engine.keep(t)},t.time=function(t){return a.ENV.engine.time(t)},r([o.doc({heading:"Performance",subheading:"Memory"})],t,"tidy",null),r([o.doc({heading:"Performance",subheading:"Memory"})],t,"keep",null),r([o.doc({heading:"Performance",subheading:"Timing"})],t,"time",null),t}();e.Tracking=s},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(15),u=n(11),c=n(11),l=n(101),p=function(){function t(){}return t.neg=function(t){return a.ENV.engine.runKernel(function(e){return e.neg(t)},{x:t},function(t){return{x:function(){return t.neg()}}})},t.ceil=function(t){return a.ENV.engine.runKernel(function(e){return e.ceil(t)},{x:t},function(t){return{x:function(){return u.zerosLike(t)}}})},t.floor=function(t){return a.ENV.engine.runKernel(function(e){return e.floor(t)},{x:t},function(t){return{x:function(){return u.zerosLike(t)}}})},t.exp=function(t){return a.ENV.engine.runKernel(function(e,n){return n(e.exp(t))},{x:t},function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n)}}})},t.log=function(t){return a.ENV.engine.runKernel(function(e){return e.log(t)},{x:t},function(e){return{x:function(){return e.divStrict(t.toFloat())}}})},t.sqrt=function(t){return a.ENV.engine.runKernel(function(e){return e.sqrt(t)},{x:t},function(e){return{x:function(){return e.divStrict(t.toFloat().sqrt().mul(u.scalar(2)))}}})},t.square=function(t){return a.ENV.engine.runKernel(function(e){return e.square(t)},{x:t},function(e){return{x:function(){return e.mulStrict(t.toFloat().mul(u.scalar(2)))}}})},t.abs=function(t){return a.ENV.engine.runKernel(function(e){return e.abs(t)},{x:t},function(e){return{x:function(){return e.mulStrict(t.toFloat().step(-1))}}})},t.clipByValue=function(t,e,n){i.assert(e<=n,"Error in clip: min ("+e+") must beless than or equal to max ("+n+").");return a.ENV.engine.runKernel(function(r){return r.clip(t,e,n)},{x:t},function(r){return{x:function(){return r.where(t.greater(u.scalar(e)).logicalAnd(t.less(u.scalar(n))),c.zerosLike(r))}}})},t.relu=function(t){return a.ENV.engine.runKernel(function(e){return e.relu(t)},{x:t},function(e){var n=t.step();return{x:function(){return e.mulStrict(n.toFloat())}}})},t.elu=function(t){return a.ENV.engine.runKernel(function(e){return e.elu(t)},{x:t},function(e){return{x:function(){return e.mulStrict(function(t){return a.ENV.engine.runKernel(function(e){return e.eluDer(t)},{x:t})}(t))}}})},t.selu=function(t){return a.ENV.engine.runKernel(function(e){return e.selu(t)},{x:t},function(e){return{x:function(){var n=t.greater(u.scalar(0)),r=u.scalar(l.SELU_SCALEALPHA),o=u.scalar(l.SELU_SCALE),a=e.mul(o),i=e.mul(r).mul(t.toFloat().exp());return u.where(n,a,i)}}})},t.leakyRelu=function(t,e){void 0===e&&(e=.2);return a.ENV.engine.runKernel(function(n){return n.leakyRelu(t,e)},{x:t},function(n){return{x:function(){return n.mulStrict(t.step(e))}}})},t.prelu=function(t,e){return a.ENV.engine.runKernel(function(n){return n.prelu(t,e)},{x:t},function(n){return{x:function(){return n.mulStrict(function(t,e){return a.ENV.engine.runKernel(function(n){return n.preluDer(t,e)},{x:t,alpha:e})}(t,e))}}})},t.sigmoid=function(t){return a.ENV.engine.runKernel(function(e,n){return n(e.sigmoid(t))},{x:t},function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n.mul(u.scalar(1).sub(n)))}}})},t.sin=function(t){return a.ENV.engine.runKernel(function(e){return e.sin(t)},{x:t},function(e){return{x:function(){return t.toFloat().cos().mulStrict(e)}}})},t.cos=function(t){return a.ENV.engine.runKernel(function(e){return e.cos(t)},{x:t},function(e){return{x:function(){return t.toFloat().sin().neg().mulStrict(e)}}})},t.tan=function(t){return a.ENV.engine.runKernel(function(e){return e.tan(t)},{x:t},function(e){return{x:function(){return e.divStrict(t.cos().square())}}})},t.asin=function(e){return a.ENV.engine.runKernel(function(t){return t.asin(e)},{x:e},function(n){return{x:function(){return n.divStrict(t.sqrt(u.scalar(1).sub(e.toFloat().square())))}}})},t.acos=function(e){return a.ENV.engine.runKernel(function(t){return t.acos(e)},{x:e},function(n){return{x:function(){return n.divStrict(t.sqrt(u.scalar(1).sub(e.toFloat().square()))).neg()}}})},t.atan=function(t){return a.ENV.engine.runKernel(function(e){return e.atan(t)},{x:t},function(e){return{x:function(){return e.divStrict(u.scalar(1).add(t.toFloat().square()))}}})},t.sinh=function(t){return a.ENV.engine.runKernel(function(e){return e.sinh(t)},{x:t},function(e){return{x:function(){return t.toFloat().cosh().mulStrict(e)}}})},t.cosh=function(t){return a.ENV.engine.runKernel(function(e){return e.cosh(t)},{x:t},function(e){return{x:function(){return t.toFloat().sinh().mulStrict(e)}}})},t.tanh=function(t){return a.ENV.engine.runKernel(function(e,n){return n(e.tanh(t))},{x:t},function(t,e){var n=e[0];return{x:function(){return u.scalar(1).sub(n.square()).mulStrict(t)}}})},t.step=function(t,e){void 0===e&&(e=0);return a.ENV.engine.runKernel(function(n){return n.step(t,e)},{x:t},function(t){return{x:function(){return u.zerosLike(t)}}})},r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"neg",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"ceil",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"floor",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"exp",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"log",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"sqrt",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"square",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"abs",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"clipByValue",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"relu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"elu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"selu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"leakyRelu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"prelu",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"sigmoid",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"sin",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"cos",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"tan",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"asin",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"acos",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"atan",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"sinh",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"cosh",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"tanh",null),r([o.doc({heading:"Operations",subheading:"Basic math"}),s.operation],t,"step",null),t}();e.UnaryOps=p},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(38),u=n(15),c=function(){function t(){}return t.transpose=function(t,e){null==e&&(e=t.shape.map(function(t,e){return e}).reverse());return i.assert(t.rank===e.length,"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."),a.ENV.engine.runKernel(function(n){return n.transpose(t,e)},{x:t},function(t){var n=s.getUndoAxesPermutation(e);return{x:function(){return t.transpose(n)}}})},r([o.doc({heading:"Operations",subheading:"Matrices"}),u.operation],t,"transpose",null),t}();e.TransposeOps=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(3),i=n(1),s=n(38),u=n(15),c=n(11),l=function(){function t(){}return t.softmax=function(t,e){if(void 0===e&&(e=-1),-1===e&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return a.customGrad(function(t){var n=t.logSumExp([e],!0),r=t.toFloat().sub(n).exp();return{value:r,gradFunc:function(t){var n=t.mul(r);return n.sub(n.sum([e],!0).mul(r))}}})(t)},t.softmaxCrossEntropy=function(t,e,n){if(void 0===n&&(n=-1),i.assertShapesMatch(t.shape,e.shape,"Error in softmaxCrossEntropy: "),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return a.customGrad(function(t,e){var r=e.softmax(n);return{value:c.scalar(1e-5).add(r).log().mul(t).neg().sum([n]),gradFunc:function(e){var o=s.expandShapeToKeepDim(e.shape,[n]);return[e.reshape(o).mul(t.toFloat().sub(r)),e.reshape(o).mul(r.sub(t.toFloat()))]}}})(t,e)},r([o.doc({heading:"Operations",subheading:"Normalization"}),u.operation],t,"softmax",null),r([o.doc({heading:"Training",subheading:"Losses",namespace:"losses"}),u.operation],t,"softmaxCrossEntropy",null),t}();e.SoftmaxOps=l},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(15),u=n(282),c=function(){function t(){}return t.slice1d=function(e,n,r){return i.assert(1===e.rank,"slice1d expects a rank-1 tensor, but got a rank-"+e.rank+" tensor"),t.slice(e,[n],[r])},t.slice2d=function(e,n,r){return i.assert(2===e.rank,"slice1d expects a rank-2 tensor, but got a rank-"+e.rank+" tensor"),t.slice(e,n,r)},t.slice3d=function(e,n,r){return i.assert(3===e.rank,"slice1d expects a rank-3 tensor, but got a rank-"+e.rank+" tensor"),t.slice(e,n,r)},t.slice4d=function(e,n,r){return i.assert(4===e.rank,"slice1d expects a rank-4 tensor, but got a rank-"+e.rank+" tensor"),t.slice(e,n,r)},t.slice=function(t,e,n){if(u.assertParamsValid(t,e,n),0===t.rank)throw new Error("Slicing scalar is not possible");var r=t.shape;return a.ENV.engine.runKernel(function(r){return r.slice(t,e,n)},{x:t},function(t){for(var o=[],a=0;a<t.rank;a++)o.push([e[a],r[a]-e[a]-n[a]]);return{x:function(){return t.pad(o)}}})},r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),s.operation],t,"slice",null),t}();e.SliceOps=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(38),u=n(15),c=function(){function t(){}return t.reverse1d=function(e){return i.assert(1===e.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+e.rank+"."),t.reverse(e,0)},t.reverse2d=function(e,n){return i.assert(2===e.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+e.rank+"."),t.reverse(e,n)},t.reverse3d=function(e,n){return i.assert(3===e.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+e.rank+"."),t.reverse(e,n)},t.reverse4d=function(e,n){return i.assert(4===e.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+e.rank+"."),t.reverse(e,n)},t.reverse=function(t,e){if(0===t.rank)return t.clone();var n=s.parseAxisParam(e,t.shape);return a.ENV.engine.runKernel(function(e){return e.reverse(t,n)},{x:t},function(t){return{x:function(){return t.reverse(n)}}}).reshapeAs(t)},r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),u.operation],t,"reverse",null),t}();e.ReverseOps=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(3),s=n(7),u=n(1),c=n(38),l=n(15),p=n(11),h=function(){function t(){}return t.logSumExp=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=c.parseAxisParam(e,t.shape),o=t.max(r,!0),a=t.sub(o).exp().sum(r).log(),i=o.reshape(a.shape).add(a);if(n){var s=c.expandShapeToKeepDim(i.shape,r);return i.reshape(s)}return i},t.sum=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=c.parseAxisParam(e,t.shape);return i.customGrad(function(t){var e=c.getAxesPermutation(r,t.rank),o=r,i=t;null!=e&&(i=t.transpose(e),o=c.getInnerMostAxes(o.length,t.rank));var u=a.ENV.engine.runKernel(function(t){return t.sum(i,o)},{permutedX:i});if(n){var l=c.expandShapeToKeepDim(u.shape,r);u=u.reshape(l)}return{value:u,gradFunc:function(e){var n=t.shape.slice();return r.forEach(function(t){n[t]=1}),e.reshape(n).mul(s.Tensor.ones(t.shape,"float32"))}}})(t)},t.mean=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=c.parseAxisParam(e,t.shape),o=c.computeOutAndReduceShapes(t.shape,r)[1],a=u.sizeFromShape(o);return i.customGrad(function(t){var o=p.scalar(a);return{value:t.div(o).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return r.forEach(function(t){n[t]=1}),e.reshape(n).mul(s.Tensor.ones(t.shape,"float32")).div(o)}}})(t)},t.min=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=c.parseAxisParam(e,t.shape),o=r,i=c.getAxesPermutation(o,t.rank);null!=i&&(t=t.transpose(i),o=c.getInnerMostAxes(o.length,t.rank));var s=a.ENV.engine.runKernel(function(e){return e.min(t,o)},{x:t});if(n){var u=c.expandShapeToKeepDim(s.shape,r);return s.reshape(u)}return s},t.max=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=c.parseAxisParam(e,t.shape),o=r,i=c.getAxesPermutation(o,t.rank);null!=i&&(t=t.transpose(i),o=c.getInnerMostAxes(o.length,t.rank));var s=a.ENV.engine.runKernel(function(e){return e.max(t,o)},{x:t});if(n){var u=c.expandShapeToKeepDim(s.shape,r);return s.reshape(u)}return s},t.argMin=function(t,e){void 0===e&&(e=null);var n=c.parseAxisParam(e,t.shape),r=c.getAxesPermutation(n,t.rank);return null!=r&&(t=t.transpose(r),n=c.getInnerMostAxes(n.length,t.rank)),a.ENV.engine.runKernel(function(e){return e.argMin(t,n)},{x:t})},t.argMax=function(t,e){void 0===e&&(e=null);var n=c.parseAxisParam(e,t.shape),r=c.getAxesPermutation(n,t.rank);return null!=r&&(t=t.transpose(r),n=c.getInnerMostAxes(n.length,t.rank)),a.ENV.engine.runKernel(function(e){return e.argMax(t,n)},{x:t})},t.moments=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=c.parseAxisParam(e,t.shape),o=t.mean(r,n),a=o.shape;return n||(a=c.expandShapeToKeepDim(o.shape,r)),{mean:o,variance:t.toFloat().sub(o.reshape(a)).square().mean(r,n)}},r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"logSumExp",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"sum",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"mean",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"min",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"max",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"argMin",null),r([o.doc({heading:"Operations",subheading:"Reduction"}),l.operation],t,"argMax",null),r([o.doc({heading:"Operations",subheading:"Normalization"}),l.operation],t,"moments",null),t}();e.ReductionOps=h},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(60),u=n(15),c=function(){function t(){}return t.maxPool=function(e,n,r,o,u){var c=e,l=!1;3===e.rank&&(l=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i.assert(4===c.rank,"Error in maxPool: input must be rank 4 but got rank "+c.rank+"."),null!=u&&i.assert(i.isInt(o),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var p=s.computePool2DInfo(c.shape,n,r,o,u),h=a.ENV.engine.runKernel(function(t){return t.maxPool(c,p)},{x:c},function(e){return{x:function(){return t.maxPoolBackprop(e,c,n,r,o)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.maxPoolBackprop=function(t,e,n,r,o,u){i.assert(e.rank===t.rank,"Rank of input ("+e.rank+") does not match rank of dy ("+t.rank+")");var c=e,l=t,p=!1;3===e.rank&&(p=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),i.assert(4===l.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."),i.assert(4===c.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."),null!=u&&i.assert(i.isInt(o),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var h=s.computePool2DInfo(c.shape,n,r,o,u),f=a.ENV.engine.runKernel(function(t){return t.maxPoolBackprop(l,c,h)},{dy4D:l,input4D:c});return p?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f},t.minPool=function(t,e,n,r,o){var u=t,c=!1;3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),i.assert(4===u.rank,"Error in minPool: x must be rank 4 but got rank "+u.rank+"."),null!=o&&i.assert(i.isInt(r),"Error in minPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var l=s.computePool2DInfo(u.shape,e,n,r,o),p=a.ENV.engine.runKernel(function(t){return t.minPool(u,l)},{input4D:u});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p},t.avgPool=function(e,n,r,o,u){var c=e,l=!1;3===e.rank&&(l=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i.assert(4===c.rank,"Error in avgPool: x must be rank 4 but got rank "+c.rank+"."),null!=u&&i.assert(i.isInt(o),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var p=s.computePool2DInfo(c.shape,n,r,o),h=a.ENV.engine.runKernel(function(t){return t.avgPool(c,p)},{x:c},function(e){return{x:function(){return t.avgPoolBackprop(e,c,n,r,o)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.avgPoolBackprop=function(t,e,n,r,o){i.assert(e.rank===t.rank,"Rank of input ("+e.rank+") does not match rank of dy ("+t.rank+")");var u=e,c=t,l=!1;3===e.rank&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),i.assert(4===c.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."),i.assert(4===u.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+".");var p=s.computePool2DInfo(u.shape,n,r,o),h=a.ENV.engine.runKernel(function(t){return t.avgPoolBackprop(c,u,p)},{dy4D:c,input4D:u});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"maxPool",null),r([u.operation],t,"maxPoolBackprop",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"minPool",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"avgPool",null),r([u.operation],t,"avgPoolBackprop",null),t}();e.PoolOps=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(38),i=n(15),s=n(11),u=function(){function t(){}return t.norm=function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function t(e,n,r){void 0===r&&(r=null);if(0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(s.scalar(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(r instanceof Array&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t,e,n),i=o.shape;if(r){var u=a.parseAxisParam(n,t.shape);i=a.expandShapeToKeepDim(o.shape,u)}return o.reshape(i)},r([o.doc({heading:"Operations",subheading:"Matrices"}),i.operation],t,"norm",null),t}();e.NormOps=u},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(15),i=function(){function t(){}return t.multiRNNCell=function(t,e,n,r){for(var o=e,a=[],i=0;i<t.length;i++){var s=t[i](o,n[i],r[i]);a.push(s[0]),a.push(s[1]),o=s[1]}var u=[],c=[];for(i=0;i<a.length;i+=2)u.push(a[i]),c.push(a[i+1]);return[u,c]},t.basicLSTMCell=function(t,e,n,r,o,a){var i=r.concat(a,1).matMul(e).add(n),s=i.shape[0],u=i.shape[1]/4,c=[s,u],l=i.slice([0,0],c),p=i.slice([0,u],c),h=i.slice([0,2*u],c),f=i.slice([0,3*u],c),d=l.sigmoid().mulStrict(p.tanh()).addStrict(o.mulStrict(t.add(h).sigmoid()));return[d,d.tanh().mulStrict(f.sigmoid())]},r([o.doc({heading:"Operations",subheading:"RNN"}),a.operation],t,"multiRNNCell",null),r([o.doc({heading:"Operations",subheading:"RNN"}),a.operation],t,"basicLSTMCell",null),t}();e.LSTMOps=i},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(15),u=function(){function t(){}return t.localResponseNormalization=function(t,e,n,r,o,s){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5),void 0===s&&(s="acrossChannels"),i.assert(4===t.rank||3===t.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+t.rank+"."),i.assert(i.isInt(e),"Error in localResponseNormalization3D: radius must be an integer\n                     but got radius "+e+".");var u=t,c=!1;3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var l=a.ENV.engine.runKernel(function(t){return t.localResponseNormalization4D(u,e,n,r,o,s)},{x4D:u});return c?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l},r([o.doc({heading:"Operations",subheading:"Normalization"}),s.operation],t,"localResponseNormalization",null),t}();e.LRNOps=u},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(68),s=n(1),u=n(46),c=n(15),l=function(){function t(){}return t.logicalNot=function(t){return s.assert("bool"===t.dtype,"Error Array must be of type bool."),a.ENV.engine.runKernel(function(e){return e.logicalNot(t)},{x:t})},t.logicalAnd=function(t,e){return s.assert("bool"===t.dtype&&"bool"===e.dtype,"Error Array must be of type bool."),u.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.logicalAnd(t,e)},{a:t,b:e})},t.logicalOr=function(t,e){return s.assert("bool"===t.dtype&&"bool"===e.dtype,"Error Array must be of type bool."),u.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.logicalOr(t,e)},{a:t,b:e})},t.logicalXor=function(t,e){return s.assert("bool"===t.dtype&&"bool"===e.dtype,"Error Array must be of type bool."),u.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.logicalXor(t,e)},{a:t,b:e})},t.where=function(t,e,n){s.assert("bool"===t.dtype||"bool"===e.dtype||"bool"===n.dtype,"Error Array must be of type bool."),s.assertShapesMatch(e.shape,n.shape,"Error in where: "),1===t.rank?s.assert(t.shape[0]===e.shape[0],"The first dimension of `a` must match the size of `condition`."):s.assertShapesMatch(t.shape,n.shape,"Error in where: ");var r=i.upcastType(e.dtype,n.dtype);return a.ENV.engine.runKernel(function(o){return o.where(t,e,n,r)},{condition:t,a:e,b:n})},r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],t,"logicalNot",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],t,"logicalAnd",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],t,"logicalOr",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],t,"logicalXor",null),r([o.doc({heading:"Operations",subheading:"Logical"}),c.operation],t,"where",null),t}();e.LogicalOps=l},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(15),u=function(){function t(){}return t.resizeBilinear=function(t,e,n){void 0===n&&(n=!1),i.assert(3===t.rank||4===t.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+t.rank+"."),i.assert(2===e.length,"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");var r=t,o=!1;3===t.rank&&(o=!0,r=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e[0],u=e[1],c=a.ENV.engine.runKernel(function(t){return t.resizeBilinear(r,s,u,n)},{batchImages:r});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c},r([o.doc({heading:"Operations",subheading:"Images",namespace:"image"}),s.operation],t,"resizeBilinear",null),t}();e.ImageOps=u},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(60),u=n(15),c=function(){function t(){}return t.conv1d=function(e,n,r,o,a){var s=e,u=!1;2===e.rank&&(u=!0,s=e.as3D(1,e.shape[0],e.shape[1])),i.assert(3===s.rank,"Error in conv1d: input must be rank 3, but got rank "+s.rank+"."),i.assert(3===n.rank,"Error in conv1d: filter must be rank 3, but got rank "+n.rank+"."),null!=a&&i.assert(i.isInt(o),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."),i.assert(s.shape[2]===n.shape[1],"Error in conv1d: depth of input ("+s.shape[2]+") must match  input depth for filter "+n.shape[1]+".");var c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),l=s.as4D(s.shape[0],1,s.shape[1],s.shape[2]),p=[1,r],h=t.conv2d(l,c,p,o,a);return u?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])},t.conv2d=function(e,n,r,o,u){var c=e,l=!1;3===e.rank&&(l=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i.assert(4===c.rank,"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."),i.assert(4===n.rank,"Error in conv2d: filter must be rank 4, but got rank "+n.rank+"."),null!=u&&i.assert(i.isInt(o),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+"."),i.assert(c.shape[3]===n.shape[2],"Error in conv2d: depth of input ("+c.shape[3]+") must match  input depth for filter "+n.shape[2]+".");var p=s.computeConv2DInfo(c.shape,n.shape,r,1,o,u),h=a.ENV.engine.runKernel(function(t){return t.conv2d(c,n,p)},{x:c,filter:n},function(e){return{x:function(){return t.conv2dDerInput(c.shape,e,n,r,o)},filter:function(){return t.conv2dDerFilter(c,e,n.shape,r,o)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.conv2dDerInput=function(t,e,n,r,o,u){i.assert(t.length===e.rank,"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match");var c=t,l=e,p=!1;3===e.rank&&(p=!0,l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),c=[1,t[0],t[1],t[2]]);var h=c[3],f=l.shape[3];i.assert(4===c.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+c.length+"."),i.assert(4===l.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),i.assert(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),i.assert(h===n.shape[2],"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+n.shape[2]+"."),i.assert(f===n.shape[3],"Error in conv2dDerInput: depth of output ("+f+") mustmatch output depth for filter "+n.shape[3]+"."),null!=u&&i.assert(i.isInt(o),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var d=s.computeConv2DInfo(c,n.shape,r,1,o,u),v=a.ENV.engine.runKernel(function(t){return t.conv2dDerInput(l,n,d)},{dy4D:l});return p?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v},t.conv2dDerFilter=function(t,e,n,r,o,u){var c=t;3===t.rank&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var l=e;3===l.rank&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),i.assert(4===c.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+c.shape+"."),i.assert(4===l.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."),i.assert(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),i.assert(c.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+c.shape[3]+") must match input depth in filter ("+n[2]+"."),i.assert(l.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+l.shape[3]+") must match output depth for filter ("+n[3]+")."),null!=u&&i.assert(i.isInt(o),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+".");var p=s.computeConv2DInfo(c.shape,n,r,1,o,u);return a.ENV.engine.runKernel(function(t){return t.conv2dDerFilter(c,l,p)},{x4D:c,dy4D:l})},t.conv2dTranspose=function(e,n,r,o,a,i){return t.conv2dDerInput(r,e,n,o,a,i)},t.depthwiseConv2d=function(t,e,n,r,o,u){void 0===o&&(o=[1,1]);var c=t,l=!1;3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),i.assert(4===c.rank,"Error in depthwiseConv2D: input must be rank 4, but got rank "+c.rank+"."),i.assert(4===e.rank,"Error in depthwiseConv2D: filter must be rank 4, but got rank "+e.rank+"."),i.assert(c.shape[3]===e.shape[2],"Error in depthwiseConv2D: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+e.shape[2]+"."),null==o&&(o=[1,1]);var p,h="number"==typeof(p=o)?[p,p]:p,f=h[0],d=h[1];i.assert(1===f&&1===d,"Error in depthwiseConv2D: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"),null!=u&&i.assert(i.isInt(r),"Error in depthwiseConv2D: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+".");var v=s.computeConv2DInfo(c.shape,e.shape,n,o,r,u,!0),m=a.ENV.engine.runKernel(function(t){return t.depthwiseConv2D(c,e,v)},{input4D:c,filter:e});return l?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m},r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"conv1d",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"conv2d",null),r([u.operation],t,"conv2dDerInput",null),r([u.operation],t,"conv2dDerFilter",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"conv2dTranspose",null),r([o.doc({heading:"Operations",subheading:"Convolution"}),u.operation],t,"depthwiseConv2d",null),t}();e.ConvOps=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(46),u=n(15),c=function(){function t(){}return t.notEqual=function(t,e){return i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.notEqual(t,e)},{a:t,b:e})},t.notEqualStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in notEqualStrict: "),t.notEqual(e)},t.less=function(t,e){return i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.less(t,e)},{a:t,b:e})},t.lessStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in lessStrict: "),t.less(e)},t.equal=function(t,e){return i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.equal(t,e)},{a:t,b:e})},t.equalStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in equalStrict: "),t.equal(e)},t.lessEqual=function(t,e){return i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.lessEqual(t,e)},{a:t,b:e})},t.lessEqualStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in lessEqualStrict: "),t.lessEqual(e)},t.greater=function(t,e){return i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.greater(t,e)},{a:t,b:e})},t.greaterStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in greaterStrict: "),t.greater(e)},t.greaterEqual=function(t,e){return i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape),a.ENV.engine.runKernel(function(n){return n.greaterEqual(t,e)},{a:t,b:e})},t.greaterEqualStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in greaterEqualStrict: "),t.greaterEqual(e)},r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],t,"notEqual",null),r([u.operation],t,"notEqualStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],t,"less",null),r([u.operation],t,"lessStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],t,"equal",null),r([u.operation],t,"equalStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],t,"lessEqual",null),r([u.operation],t,"lessEqualStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],t,"greater",null),r([u.operation],t,"greaterStrict",null),r([o.doc({heading:"Operations",subheading:"Logical"}),u.operation],t,"greaterEqual",null),r([u.operation],t,"greaterEqualStrict",null),t}();e.CompareOps=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(46),u=n(15),c=n(11),l=function(){function t(){}return t.add=function(t,e){i.assertTypesMatch(t,e);var n=s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.add(t,e)},{a:t,b:e},function(r){return{a:function(){var e=r,o=s.getReductionAxes(t.shape,n);return o.length>0&&(e=e.sum(o)),e.reshape(t.shape)},b:function(){var t=r,o=s.getReductionAxes(e.shape,n);return o.length>0&&(t=t.sum(o)),t.reshape(e.shape)}}})},t.addStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in addStrict: "),t.add(e)},t.sub=function(t,e){i.assertTypesMatch(t,e);var n=s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.subtract(t,e)},{a:t,b:e},function(r){return{a:function(){var e=r,o=s.getReductionAxes(t.shape,n);return o.length>0&&(e=e.sum(o)),e.reshape(t.shape)},b:function(){var t=r,o=s.getReductionAxes(e.shape,n);return o.length>0&&(t=t.sum(o)),t.neg().reshape(e.shape)}}})},t.subStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in subStrict: "),t.sub(e)},t.pow=function(t,e){s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.pow(t,e)},{base:t},function(n){if(!i.arraysEqual(t.shape,e.shape)&&!i.isScalarShape(e.shape))throw new Error("Gradient of pow not yet supported for broadcasted shapes.");return{base:function(){var r=e.toFloat(),o=r.mul(t.toFloat().pow(r.sub(c.scalar(1))));return n.mulStrict(o)}}})},t.powStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in powStrict: "),t.pow(e)},t.mul=function(t,e){i.assertTypesMatch(t,e);var n=s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.multiply(t,e)},{a:t,b:e},function(r){return{a:function(){var o=r.mul(e.toFloat()),a=s.getReductionAxes(t.shape,n);return a.length>0?o.sum(a).reshape(t.shape):o},b:function(){var o=r.mul(t.toFloat()),a=s.getReductionAxes(e.shape,n);return a.length>0?o.sum(a).reshape(e.shape):o}}})},t.mulStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in multiplyStrict: "),t.mul(e)},t.div=function(t,e){var n=s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.divide(t,e)},{a:t,b:e},function(r){return{a:function(){var o=r.div(e.toFloat()),a=s.getReductionAxes(t.shape,n);return a.length>0?o.sum(a).reshape(t.shape):o},b:function(){var o=r.mul(t.toFloat()),a=s.getReductionAxes(e.shape,n);a.length>0&&(o=o.sum(a).reshape(e.shape));var i=e.square();return o.div(i.toFloat()).neg()}}})},t.divStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in divideStrict: "),t.div(e)},t.minimum=function(t,e){i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.minimum(t,e)},{a:t,b:e},function(n){return{a:function(){return n.mul(t.lessEqual(e).toFloat())},b:function(){return n.mul(t.greater(e).toFloat())}}})},t.minimumStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in minimumStrict: "),t.minimum(e)},t.maximum=function(t,e){i.assertTypesMatch(t,e),s.assertAndGetBroadcastShape(t.shape,e.shape);return a.ENV.engine.runKernel(function(n){return n.maximum(t,e)},{a:t,b:e},function(n){return{a:function(){return n.mul(t.greaterEqual(e).toFloat())},b:function(){return n.mul(t.less(e).toFloat())}}})},t.maximumStrict=function(t,e){return i.assertShapesMatch(t.shape,e.shape,"Error in minimumStrict: "),t.maximum(e)},r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"add",null),r([u.operation],t,"addStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"sub",null),r([u.operation],t,"subStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"pow",null),r([u.operation],t,"powStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"mul",null),r([u.operation],t,"mulStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"div",null),r([u.operation],t,"divStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"minimum",null),r([u.operation],t,"minimumStrict",null),r([o.doc({heading:"Operations",subheading:"Arithmetic"}),u.operation],t,"maximum",null),r([u.operation],t,"maximumStrict",null),t}();e.BinaryOps=l},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(15),u=function(){function t(){}return t.batchNormalization2d=function(e,n,r,o,a,s){return void 0===o&&(o=.001),i.assert(2===e.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+e.rank+"."),i.assert(2===n.rank||1===n.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+n.rank+"."),i.assert(2===r.rank||1===r.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+r.rank+"."),null!=a&&i.assert(2===a.rank||1===a.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."),null!=s&&i.assert(2===s.rank||1===s.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."),t.batchNormalization(e,n,r,o,a,s)},t.batchNormalization3d=function(e,n,r,o,a,s){return void 0===o&&(o=.001),i.assert(3===e.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+e.rank+"."),i.assert(3===n.rank||1===n.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+n.rank+"."),i.assert(3===r.rank||1===r.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+r.rank+"."),null!=a&&i.assert(3===a.rank||1===a.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."),null!=s&&i.assert(3===s.rank||1===s.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."),t.batchNormalization(e,n,r,o,a,s)},t.batchNormalization4d=function(e,n,r,o,a,s){return void 0===o&&(o=.001),i.assert(4===e.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+e.rank+"."),i.assert(4===n.rank||1===n.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+n.rank+"."),i.assert(4===r.rank||1===r.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+r.rank+"."),null!=a&&i.assert(4===a.rank||1===a.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."),null!=s&&i.assert(4===s.rank||1===s.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."),t.batchNormalization(e,n,r,o,a,s)},t.batchNormalization=function(t,e,n,r,o,i){var s;return void 0===r&&(r=.001),s=0===t.rank||1===t.rank?t.as4D(1,1,1,t.size):2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t,a.ENV.engine.runKernel(function(t){return t.batchNormalization4D(s,c(e),c(n),r,c(o),c(i))},{x:t,mean:e,variance:n}).reshape(t.shape)},r([s.operation],t,"batchNormalization2d",null),r([s.operation],t,"batchNormalization3d",null),r([s.operation],t,"batchNormalization4d",null),r([o.doc({heading:"Operations",subheading:"Normalization"})],t,"batchNormalization",null),t}();function c(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}e.BatchNormOps=u},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(1),s=n(38),u=n(69),c=n(15),l=function(){function t(){}return t.concat1d=function(e){return t.concat(e,0)},t.concat2d=function(e,n){return t.concat(e,n)},t.concat3d=function(e,n){return t.concat(e,n)},t.concat4d=function(e,n){return t.concat(e,n)},t.concat=function(t,e){void 0===e&&(e=0),i.assert(t.length>=2,"Pass at least two tensors to concat");for(var n=t[0],r=s.parseAxisParam(e,n.shape),o=1;o<t.length;++o)n=p(n,t[o],r[0]);return n},r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),c.operation],t,"concat",null),t}();function p(t,e,n){u.assertParams(t.shape,e.shape,n);var r=u.computeOutShape(t.shape,e.shape,n),o=t.as2D(-1,i.sizeFromShape(t.shape.slice(n))),s=e.as2D(-1,i.sizeFromShape(e.shape.slice(n))),c=u.computeGradientSliceShapes(o.shape,s.shape),l=c.aBegin,p=c.aSize,h=c.bBegin,f=c.bSize;return a.ENV.engine.runKernel(function(t){return t.concat(o,s)},{a:o,b:s},function(t){return{a:function(){return t.slice(l,p)},b:function(){return t.slice(h,f)}}}).reshape(r)}e.ConcatOps=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=20,a=3,i=7;function s(t,e){return r.rightPad(parseFloat(t.toFixed(i)).toString(),e)}e.tensorToString=function(t,e){var n=t.dataSync(),r=function(t){var e=t.dataSync(),n=t.size,r=t.strides[t.strides.length-1],o=new Array(r).fill(0);if(t.rank>1)for(var a=0;a<n/r;a++)for(var i=a*r,u=0;u<r;u++)o[u]=Math.max(o[u],s(e[i+u],0).length);return o}(t),i=function t(e,n,r,i,u){void 0===u&&(u=!0);var c=n[0],l=n.length;if(0===l)return[e[0].toString()];if(1===l){if(c>o){var p=Array.from(e.subarray(0,a)),h=Array.from(e.subarray(c-a,c));return["["+p.map(function(t,e){return s(t,i[e])}).join(", ")+", ..., "+h.map(function(t,e){return s(t,i[c-a+e])}).join(", ")+"]"]}return["["+Array.from(e).map(function(t,e){return s(t,i[e])}).join(", ")+"]"]}var f=n.slice(1),d=r.slice(1),v=r[0],m=[];if(c>o){for(var g=0;g<a;g++){var y=g*v,b=y+v;m.push.apply(m,t(e.subarray(y,b),f,d,i,!1))}m.push("...");for(var g=c-a;g<c;g++){var y=g*v,b=y+v;m.push.apply(m,t(e.subarray(y,b),f,d,i,g===c-1))}}else for(var g=0;g<c;g++){var y=g*v,b=y+v;m.push.apply(m,t(e.subarray(y,b),f,d,i,g===c-1))}var w=2===l?",":"";m[0]="["+m[0]+w;for(var g=1;g<m.length-1;g++)m[g]=" "+m[g]+w;for(var x=",\n",g=2;g<l;g++)x+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(u?"":x),m}(n,t.shape,t.strides,r),u=["Tensor"];return e&&(u.push("  dtype: "+t.dtype),u.push("  rank: "+t.rank),u.push("  shape: ["+t.shape+"]"),u.push("  values:")),u.push(i.map(function(t){return"    "+t}).join("\n")),u.join("\n")}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(7),s=n(165),u=n(1),c=n(38),l=n(164),p=n(15),h=n(283),f=function(){function t(){}return t.tensor=function(t,e,n){void 0===n&&(n="float32");var r=u.inferShape(t);return null!=e&&1!==r.length&&u.assertShapesMatch(e,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "),u.isTypedArray(t)||Array.isArray(t)||(t=[t]),e=e||r,i.Tensor.make(e,{values:function(t,e){if(function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;Array.isArray(t)&&(t=u.flatten(t));return u.copyTypedArray(t,e)}(t,n)},n)},t.scalar=function(e,n){if(void 0===n&&(n="float32"),u.isTypedArray(e)||Array.isArray(e))throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return t.tensor(e,[],n)},t.tensor1d=function(e,n){void 0===n&&(n="float32");var r=u.inferShape(e);if(1!==r.length)throw new Error("Error creating a new Tensor1D: values must be a flat/TypedArray");return t.tensor(e,r,n)},t.tensor2d=function(e,n,r){void 0===r&&(r="float32");var o=u.inferShape(e);if(2!==o.length&&1!==o.length)throw new Error("Error creating a new Tensor2D: values must be number[][] or flat/TypedArray");return n=n||o,t.tensor(e,n,r)},t.tensor3d=function(e,n,r){void 0===r&&(r="float32");var o=u.inferShape(e);if(3!==o.length&&1!==o.length)throw new Error("Error creating a new Tensor3D: values must be number[][][]or flat/TypedArray");return n=n||o,t.tensor(e,n,r)},t.tensor4d=function(e,n,r){void 0===r&&(r="float32");var o=u.inferShape(e);if(4!==o.length&&1!==o.length)throw new Error("Error creating a new Tensor4D: values must be number[][][][]or flat/TypedArray");return n=n||o,t.tensor(e,n,r)},t.ones=function(t,e){void 0===e&&(e="float32");var n=function(t,e){for(var n=d(t,e),r=0;r<n.length;r++)n[r]=1;return n}(u.sizeFromShape(t),e);return i.Tensor.make(t,{values:n},e)},t.zeros=function(t,e){void 0===e&&(e="float32");var n=d(u.sizeFromShape(t),e);return i.Tensor.make(t,{values:n},e)},t.fill=function(t,e,n){void 0===n&&(n="float32");var r=u.getTypedArrayFromDType(n,u.sizeFromShape(t));return r.fill(e),i.Tensor.make(t,{values:r},n)},t.onesLike=function(e){return t.ones(e.shape,e.dtype)},t.zerosLike=function(e){return t.zeros(e.shape,e.dtype)},t.clone=function(t){return i.Tensor.make(t.shape,{dataId:t.dataId},t.dtype)},t.randomNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new h.MPRandGauss(e,n,r,!1,o);return i.Tensor.rand(t,function(){return a.nextValue()},r)},t.truncatedNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new h.MPRandGauss(e,n,r,!0,o);return i.Tensor.rand(t,function(){return a.nextValue()},r)},t.randomUniform=function(t,e,n,r){return void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32"),i.Tensor.rand(t,function(){return u.randUniform(e,n)},r)},t.rand=function(t,e,n){var r=u.sizeFromShape(t),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return i.Tensor.make(t,{values:o},n)},t.multinomial=function(t,e,n){var r=t.size,o=t.rank;if(r<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+r+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var i=1===o?t.as2D(1,-1):t,s=a.ENV.engine.runKernel(function(t){return t.multinomial(i,e,n)},{prob2D:i});return 1===o?s.as1D():s},t.oneHot=function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);return a.ENV.engine.runKernel(function(o){return o.oneHot(t,e,n,r)},{indices:t})},t.fromPixels=function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return a.ENV.engine.fromPixels(t,e)},t.reshape=function(t,e){e=u.inferFromImplicitShape(e,t.size),u.assert(t.size===u.sizeFromShape(e),"new shape and old shape must have the same number of elements.");return a.ENV.engine.runKernel(function(n){return i.Tensor.make(e,{dataId:t.dataId},t.dtype)},{x:t},function(e){return{x:function(){return e.reshape(t.shape)}}})},t.squeeze=function(e,n){return t.reshape(e,u.squeezeShape(e.shape,n).newShape)},t.cast=function(e,n){return a.ENV.engine.runKernel(function(r){if(!u.hasEncodingLoss(e.dtype,n))return i.Tensor.make(e.shape,{dataId:e.dataId},n);if("int32"===n)return r.int(e);if("bool"===n)return r.notEqual(e,t.scalar(0,e.dtype));throw new Error("Error in Cast: unknown dtype argument ("+n+")")},{x:e},function(t){return{x:function(){return t.clone()}}})},t.tile=function(e,n){u.assert(e.rank===n.length,"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+".");return a.ENV.engine.runKernel(function(t){return t.tile(e,n)},{x:e},function(r){return{x:function(){var o=t.zerosLike(e);if(1===e.rank)for(var a=0;a<n[0];++a)o=o.add(r.slice([a*e.shape[0]],[e.shape[0]]));else if(2===e.rank)for(a=0;a<n[0];++a)for(var i=0;i<n[1];++i)o=o.add(r.slice([a*e.shape[0],i*e.shape[1]],[e.shape[0],e.shape[1]]));else if(3===e.rank)for(a=0;a<n[0];++a)for(i=0;i<n[1];++i)for(var s=0;s<n[2];++s)o=o.add(r.slice([a*e.shape[0],i*e.shape[1],s*e.shape[2]],[e.shape[0],e.shape[1],e.shape[2]]));else{if(4!==e.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+e.rank+" tensors yet.");for(a=0;a<n[0];++a)for(i=0;i<n[1];++i)for(s=0;s<n[2];++s)for(var u=0;u<n[3];++u)o=o.add(r.slice([a*e.shape[0],i*e.shape[1],s*e.shape[2],u*e.shape[3]],[e.shape[0],e.shape[1],e.shape[2],e.shape[3]]))}return o}}})},t.gather=function(t,e,n){void 0===n&&(n=0);var r=c.parseAxisParam(n,t.shape);return a.ENV.engine.runKernel(function(n){return n.gather(t,e,r[0])},{x:t,indices:e})},t.pad1d=function(e,n,r){return void 0===r&&(r=0),u.assert(2===n.length,"Invalid number of paddings. Must be length of 2."),t.pad(e,[n],r)},t.pad2d=function(e,n,r){return void 0===r&&(r=0),u.assert(2===n.length&&2===n[0].length&&2===n[1].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad3d=function(e,n,r){return void 0===r&&(r=0),u.assert(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad4d=function(e,n,r){return void 0===r&&(r=0),u.assert(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)},t.pad=function(t,e,n){if(void 0===n&&(n=0),0===t.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var r=e.map(function(t){return t[0]});return a.ENV.engine.runKernel(function(r){return r.pad(t,e,n)},{x:t},function(e){return{x:function(){return e.slice(r,t.shape)}}})},t.stack=function(t,e){void 0===e&&(e=0),u.assert(t.length>=2,"Pass at least two tensors to dl.stack");var n=t[0].rank,r=t[0].shape,o=t[0].dtype;u.assert(e<=n,"Axis must be <= rank of the tensor"),t.forEach(function(t){u.assertShapesMatch(r,t.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(t){u.assert(o===t.dtype,"All tensors passed to stack must have matching dtypes")});var a=t.map(function(t){return t.expandDims(e)});return l.ConcatOps.concat(a,e)},t.expandDims=function(e,n){void 0===n&&(n=0),u.assert(n<=e.rank,"Axis must be <= rank of the tensor");var r=e.shape.slice();return r.splice(n,0,1),t.reshape(e,r)},t.linspace=function(t,e,n){if(0===n)throw new Error("Cannot request zero samples");var r=(e-t)/(n-1),o=d(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return i.Tensor1D.new(o,"float32")},t.range=function(e,n,r,o){if(void 0===r&&(r=1),void 0===o&&(o="float32"),0===r)throw new Error("Cannot have a step of zero");if(e===n||e<n&&r<0||n<e&&r>1)return t.zeros([0],o);var a=d(Math.abs(Math.ceil((n-e)/r)),o);n<e&&1===r&&(r=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return t.tensor1d(a,o)},t.buffer=function(t,e,n){return void 0===e&&(e="float32"),new i.TensorBuffer(t,e,n)},t.print=function(t,e){void 0===e&&(e=!1),console.log(s.tensorToString(t,e))},r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"tensor",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"scalar",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"tensor1d",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"tensor2d",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"tensor3d",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"tensor4d",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"ones",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"zeros",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"fill",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"onesLike",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"zerosLike",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"clone",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"randomNormal",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"truncatedNormal",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"randomUniform",null),r([p.operation],t,"rand",null),r([p.operation],t,"multinomial",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"oneHot",null),r([o.doc({heading:"Tensors",subheading:"Creation"}),p.operation],t,"fromPixels",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],t,"reshape",null),r([o.doc({heading:"Tensors",subheading:"Transformations"})],t,"squeeze",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],t,"cast",null),r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),p.operation],t,"tile",null),r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),p.operation],t,"gather",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],t,"pad",null),r([o.doc({heading:"Tensors",subheading:"Slicing and Joining"}),p.operation],t,"stack",null),r([o.doc({heading:"Tensors",subheading:"Transformations"}),p.operation],t,"expandDims",null),r([p.operation,o.doc({heading:"Tensors",subheading:"Creation"})],t,"linspace",null),r([p.operation,o.doc({heading:"Tensors",subheading:"Creation"})],t,"range",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"buffer",null),r([o.doc({heading:"Tensors",subheading:"Creation"})],t,"print",null),t}();function d(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type $ {dtype}")}e.ArrayOps=f},function(t,e){t.exports=Math.scale||function(t,e,n,r,o){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||o!=o?NaN:t===1/0||t===-1/0?t:(t-e)*(o-r)/(n-e)+r}},function(t,e,n){var r=n(49);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){var r=n(70),o=n(168);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var r=n(55),o=n(27),a=n(71).f;t.exports=function(t){return function(e){for(var n,i=o(e),s=r(i),u=s.length,c=0,l=[];u>c;)a.call(i,n=s[c++])&&l.push(t?[n,i[n]]:i[n]);return l}}},function(t,e,n){var r=n(12),o=n(121),a=n(34);t.exports=function(t,e,n,i){var s=String(a(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var p=l-u,h=o.call(c,Math.ceil(p/c.length));return h.length>p&&(h=h.slice(0,p)),i?h+s:s+h}},function(t,e,n){"use strict";var r=n(90),o=n(8),a=n(12),i=n(30),s=n(10)("isConcatSpreadable");t.exports=function t(e,n,u,c,l,p,h,f){for(var d,v,m=l,g=0,y=!!h&&i(h,f,3);g<c;){if(g in u){if(d=y?y(u[g],g,n):u[g],v=!1,o(d)&&(v=void 0!==(v=d[s])?!!v:r(d)),v&&p>0)m=t(e,n,d,a(d.length),m,p-1)-1;else{if(m>=9007199254740991)throw TypeError();e[m]=d}m++}g++}return m}},function(t,e,n){var r=n(52),o=n(91),a=n(4),i=n(5).Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(33),o=n(12);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){"use strict";var r=n(48),o=n(44).getWeak,a=n(4),i=n(8),s=n(50),u=n(49),c=n(31),l=n(23),p=n(62),h=c(5),f=c(6),d=0,v=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,void 0!=r&&u(r,n,t[a],t)});return r(c.prototype,{delete:function(t){if(!i(t))return!1;var n=o(t);return!0===n?v(p(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!i(t))return!1;var n=o(t);return!0===n?v(p(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=o(a(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){"use strict";var r,o=n(31)(0),a=n(21),i=n(44),s=n(195),u=n(175),c=n(8),l=n(6),p=n(62),h=i.getWeak,f=Object.isExtensible,d=u.ufstore,v={},m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(c(t)){var e=h(t);return!0===e?d(p(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(p(this,"WeakMap"),t,e)}},y=t.exports=n(84)("WeakMap",m,g,u,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(v),7).get(v)})&&(s((r=u.getConstructor(m,"WeakMap")).prototype,g),i.NEED=!0,o(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];a(e,t,function(e,o){if(c(e)&&!f(e)){this._f||(this._f=new r);var a=this._f[t](e,o);return"set"==t?this:a}return n.call(this,e,o)})}))},function(t,e,n){"use strict";var r=n(178),o=n(62);t.exports=n(84)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(o(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r=n(13).f,o=n(53),a=n(48),i=n(30),s=n(50),u=n(49),c=n(117),l=n(183),p=n(51),h=n(14),f=n(44).fastKey,d=n(62),v=h?"_s":"size",m=function(t,e){var n,r=f(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&u(r,n,t[c],t)});return a(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=m(n,t);if(r){var o=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=o),o&&(o.p=a),n._f==r&&(n._f=o),n._l==r&&(n._l=a),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=i(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(d(this,e),t)}}),h&&r(l.prototype,"size",{get:function(){return d(this,e)[v]}}),l},def:function(t,e,n){var r,o,a=m(t,e);return a?a.v=n:(t._l=a={i:o=f(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=a),r&&(r.n=a),t[v]++,"F"!==o&&(t._i[o]=a)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),p(e)}}},function(t,e,n){"use strict";var r=n(178),o=n(62);t.exports=n(84)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){var r=n(4),o=n(8),a=n(105);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){n(14)&&"g"!=/./g.flags&&n(13).f(RegExp.prototype,"flags",{configurable:!0,get:n(87)})},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(17),o=n(54),a=n(12);t.exports=[].copyWithin||function(t,e){var n=r(this),i=a(n.length),s=o(t,i),u=o(e,i),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?i:o(c,i))-u,i-s),p=1;for(u<s&&s<u+l&&(p=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=p,u+=p;return n}},function(t,e,n){var r=n(18),o=n(17),a=n(72),i=n(12);t.exports=function(t,e,n,s,u){r(e);var c=o(t),l=a(c),p=i(c.length),h=u?p-1:0,f=u?-1:1;if(n<2)for(;;){if(h in l){s=l[h],h+=f;break}if(h+=f,u?h<0:p<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:p>h;h+=f)h in l&&(s=e(s,l[h],h,c));return s}},function(t,e,n){var r=n(4);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&r(a.call(t)),e}}},function(t,e,n){var r=n(120),o=Math.pow,a=o(2,-52),i=o(2,-23),s=o(2,127)*(2-i),u=o(2,-126);t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),c=r(t);return o<u?c*(o/u/i+1/a-1/a)*u*i:(n=(e=(1+i/a)*o)-(e-o))>s||n!=n?c*(1/0):c*n}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(8),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var r=n(29);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(5).parseFloat,o=n(64).trim;t.exports=1/r(n(123)+"-0")!=-1/0?function(t){var e=o(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(5).parseInt,o=n(64).trim,a=n(123),i=/^[-+]?0[xX]/;t.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(t,e){var n=o(String(t),3);return r(n,e>>>0||(i.test(n)?16:10))}:r},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var r=n(18),o=n(8),a=n(193),i=[].slice,s={};t.exports=Function.bind||function(t){var e=r(this),n=i.call(arguments,1),u=function(){var r=n.concat(i.call(arguments));return this instanceof u?function(t,e,n){if(!(e in s)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)}(e,r.length,r):a(e,r,t)};return o(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e,n){"use strict";var r=n(55),o=n(91),a=n(71),i=n(17),s=n(72),u=Object.assign;t.exports=!u||n(6)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=i(t),u=arguments.length,c=1,l=o.f,p=a.f;u>c;)for(var h,f=s(arguments[c++]),d=l?r(f).concat(l(f)):r(f),v=d.length,m=0;v>m;)p.call(f,h=d[m++])&&(n[h]=f[h]);return n}:u},function(t,e,n){var r=n(27),o=n(52).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return i&&"[object Window]"==a.call(t)?function(t){try{return o(t)}catch(t){return i.slice()}}(t):o(r(t))}},function(t,e,n){var r=n(13),o=n(4),a=n(55);t.exports=n(14)?Object.defineProperties:function(t,e){o(t);for(var n,i=a(e),s=i.length,u=0;s>u;)r.f(t,n=i[u++],e[n]);return t}},function(t,e,n){var r=n(23),o=n(27),a=n(92)(!1),i=n(127)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),u=0,c=[];for(n in s)n!=i&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(c,n)||c.push(n));return c}},function(t,e,n){e.f=n(10)},function(t,e,n){t.exports=!n(14)&&!n(6)(function(){return 7!=Object.defineProperty(n(129)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(42)),i=n(74);var s=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ready=!1,this.variableDictionary={},this.timesScalar=a.scalar(150),this.plusScalar=a.scalar(127.5),this.epsilonScalar=a.scalar(.001),this.loadCheckpoints(e).then(function(){r.ready=!0,n&&n()})}return o(t,[{key:"loadCheckpoints",value:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new a.CheckpointLoader(e),t.next=3,n.getAllVariables();case 3:this.variables=t.sent;case 4:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})});return function(t){return e.apply(this,arguments)}}()},{key:"instanceNorm",value:function(e,n){var o=r(e.shape,3),i=o[0],s=o[1],u=o[2],c=a.moments(e,[0,1]),l=c.mean,p=c.variance,h=this.variables[t.getVariableName(n)],f=this.variables[t.getVariableName(n+1)],d=this.epsilonScalar,v=a.div(a.sub(e.asType("float32"),l),a.sqrt(a.add(p,d)));return a.add(a.mul(f,v),h).as3D(i,s,u)}},{key:"convLayer",value:function(e,n,r,o){var i=a.conv2d(e,this.variables[t.getVariableName(o)],[n,n],"same"),s=this.instanceNorm(i,o+1);return r?a.relu(s):s}},{key:"residualBlock",value:function(t,e){var n=this.convLayer(t,1,!0,e),r=this.convLayer(n,1,!1,e+3);return a.add(r,t)}},{key:"convTransposeLayer",value:function(e,n,o,i){var s=r(e.shape,2),u=[s[0]*o,s[1]*o,n],c=a.conv2dTranspose(e,this.variables[t.getVariableName(i)],u,[o,o],"same"),l=this.instanceNorm(c,i+1);return a.relu(l)}},{key:"transfer",value:function(t){var e=this,n=a.fromPixels(t),r=a.tidy(function(){var t=e.convLayer(n,1,!0,0),r=e.convLayer(t,2,!0,3),o=e.convLayer(r,2,!0,6),i=e.residualBlock(o,9),s=e.residualBlock(i,15),u=e.residualBlock(s,21),c=e.residualBlock(u,27),l=e.residualBlock(c,33),p=e.convTransposeLayer(l,64,2,39),h=e.convTransposeLayer(p,32,2,42),f=e.convLayer(h,1,!1,45),d=a.tanh(f),v=a.mul(e.timesScalar,d),m=a.add(e.plusScalar,v),g=a.clipByValue(m,0,255);return a.div(g,a.scalar(255))});return(0,i.array3DToImage)(r)}}],[{key:"getVariableName",value:function(t){return 0===t?"Variable":"Variable_"+t}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(42);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ready=!1,this.model={},this.modelSize=0,this.loadVectors(e,n)}return r(t,[{key:"loadVectors",value:function(t,e){var n=this;fetch(t).then(function(t){return t.json()}).then(function(t){Object.keys(t.vectors).forEach(function(e){n.model[e]=(0,o.tensor)(t.vectors[e])}),n.modelSize=Object.keys(t).length,n.ready=!0,e&&e()}).catch(function(t){console.log("There has been a problem loading the vocab: "+t.message)})}},{key:"add",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t.addOrSubtract(this.model,e,"ADD");return t.nearest(this.model,r,e.length,e.length+n)}},{key:"subtract",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t.addOrSubtract(this.model,e,"SUBTRACT");return t.nearest(this.model,r,e.length,e.length+n)}},{key:"average",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t.addOrSubtract(this.model,e,"ADD"),a=(0,o.div)(r,(0,o.tensor)(e.length));return t.nearest(this.model,a,e.length,e.length+n)}},{key:"nearest",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=this.model[e];return r?t.nearest(this.model,r,1,n+1):null}},{key:"getRandomWord",value:function(){var t=Object.keys(this.model);return t[Math.floor(Math.random()*t.length)]}}],[{key:"addOrSubtract",value:function(t,e,n){var r=[],a=[];if(e.length<2)throw new Error("Invalid input, must be passed more than 1 value");if(e.forEach(function(e){var n=t[e];n?r.push(n):a.push(e)}),a.length>0)throw new Error("Invalid input, vector not found for: "+a.toString());var i=r[0];if("ADD"===n)for(var s=1;s<r.length;s+=1)i=(0,o.add)(i,r[s]);else for(var u=1;u<r.length;u+=1)i=(0,o.sub)(i,r[u]);return i}},{key:"nearest",value:function(t,e,n,r){var a=[];return Object.keys(t).forEach(function(n){var r=o.util.distSquared(e.dataSync(),t[n].dataSync());a.push({vector:n,distance:r})}),a.sort(function(t,e){return t.distance-e.distance}),a.slice(n,r)}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){for(var e=Math.random(),n=0,r=void 0,o=0;o<t.length;o+=1)if(e<(n+=t[o])){r=o;break}return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(42)),i=n(203),s=(r=i)&&r.__esModule?r:{default:r};function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}var c=/cell_[0-9]|lstm_[0-9]/gi,l=/weights|weight|kernel|kernels|w/gi,p=/softmax/gi,h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ready=!1,this.model={},this.cellsAmount=0,this.vocab={},this.vocabSize=0,this.defaults={seed:"a",length:20,temperature:.5},this.loadCheckpoints(e,n)}return o(t,[{key:"loadCheckpoints",value:function(t,e){var n,r=this;new a.CheckpointLoader(t).getAllVariables().then((n=u(regeneratorRuntime.mark(function n(o){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object.keys(o).forEach(function(t){t.match(c)?t.match(l)?(r.model["Kernel_"+t.match(/[0-9]/)[0]]=o[t],r.cellsAmount+=1):r.model["Bias_"+t.match(/[0-9]/)[0]]=o[t]:t.match(p)?t.match(l)?r.model.fullyConnectedWeights=o[t]:r.model.fullyConnectedBiases=o[t]:r.model[t]=o[t]}),r.loadVocab(t,e);case 2:case"end":return n.stop()}},n,r)})),function(t){return n.apply(this,arguments)}))}},{key:"loadVocab",value:function(t,e){var n=this;fetch(t+"/vocab.json").then(function(t){return t.json()}).then(function(t){n.vocab=t,n.vocabSize=Object.keys(t).length,n.ready=!0,e()}).catch(function(t){console.error("There has been a problem loading the vocab: "+t.message)})}},{key:"generate",value:function(){var t=u(regeneratorRuntime.mark(function t(e,n){var r,o,i,u,c,l,p,h,f,d,v,m,g,y,b,w,x,k,E,S,T,O,_,A,C,N,M,P=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.seed||this.defaults.seed,o=+e.length||this.defaults.length,i=+e.temperature||this.defaults.temperature,u=[],!this.ready){t.next=41;break}for(c=a.tensor(1),l=[],p=[],h=[],f=function(t){return function(e,n,r){return a.basicLSTMCell(c,P.model["Kernel_"+t],P.model["Bias_"+t],e,n,r)}},d=0;d<this.cellsAmount;d+=1)p.push(a.zeros([1,this.model["Bias_"+d].shape[0]/4])),h.push(a.zeros([1,this.model["Bias_"+d].shape[0]/4])),l.push(f(d));v=Array.from(r),m=[],v.forEach(function(t,e){e<100&&m.push(P.vocab[t])}),y=m[g=0],b=0;case 17:if(!(b<v.length+o)){t.next=38;break}return(w=a.buffer([1,this.vocabSize])).set(1,0,y),x=w.toTensor(),k=void 0,this.model.embedding?(E=a.matMul(x,this.model.embedding),k=a.multiRNNCell(l,E,p,h)):k=a.multiRNNCell(l,x,p,h),p=k[0],h=k[1],S=h[1],T=a.matMul(S,this.model.fullyConnectedWeights),O=a.add(T,this.model.fullyConnectedBiases),_=a.div(O,a.tensor(i)),A=a.exp(_),t.next=32,a.div(A,a.sum(A)).data();case 32:C=t.sent,N=(0,s.default)(C),v.length>g?(y=m[g],g+=1):(y=N,u.push(N));case 35:b+=1,t.next=17;break;case 38:M="",u.forEach(function(t){var e=Object.keys(P.vocab).find(function(e){return P.vocab[e]===t});e&&(M+=e)}),n({generated:M});case 41:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}]),t}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.saveFile=function(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},e.loadFile=function(t,e){fetch(t).then(function(t){return t.json()}).then(function(t){return e(t)}).catch(function(t){console.error("There has been a problem loading the file: "+t.message)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.topK=function(t,e){for(var n=[],r=0;r<t.length;r++)n.push({value:t[r],index:r});n.sort(function(t,e){return e.value-t.value});var o=new Float32Array(e),a=new Int32Array(e);for(r=0;r<e;r++)o[r]=n[r].value,a[r]=n[r].index;return{values:o,indices:a}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(42),i=n(130),s=n(206),u=function(){function t(t,e){this.numClasses=t,this.k=e,this.classLogitsMatrices=[],this.classExampleCount=[],this.varsLoaded=!1,this.squashLogitsDenominator=a.scalar(300);for(var n=0;n<this.numClasses;n++)this.classLogitsMatrices.push(null),this.classExampleCount.push(0);this.squeezeNet=new i.SqueezeNet}return t.prototype.load=function(){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.squeezeNet.load()];case 1:return t.sent(),this.varsLoaded=!0,[2]}})})},t.prototype.clearClass=function(t){t>=this.numClasses?console.log("Cannot clear invalid class ${classIndex}"):(this.classLogitsMatrices[t]=null,this.classExampleCount[t]=0,this.clearTrainLogitsMatrix())},t.prototype.addImage=function(t,e){var n=this;this.varsLoaded?(e>=this.numClasses&&console.warn("Cannot add to invalid class ${classIndex}"),this.clearTrainLogitsMatrix(),a.tidy(function(){var r=n.squeezeNet.predict(t),o=n.normalizeVector(r),i=o.shape[0];if(null==n.classLogitsMatrices[e])n.classLogitsMatrices[e]=o.as2D(1,i);else{var s=n.classLogitsMatrices[e].as2D(n.classExampleCount[e],i).concat(o.as2D(1,i),0);n.classLogitsMatrices[e].dispose(),n.classLogitsMatrices[e]=s}a.keep(n.classLogitsMatrices[e]),n.classExampleCount[e]++})):console.warn("Cannot add images until vars have been loaded.")},t.prototype.predict=function(t){var e=this;if(!this.varsLoaded)throw new Error("Cannot predict until vars have been loaded.");return a.tidy(function(){var n=e.squeezeNet.predict(t),r=e.normalizeVector(n),o=r.shape[0];if(null==e.trainLogitsMatrix){for(var i=null,s=0;s<e.numClasses;s++)i=e.concatWithNulls(i,e.classLogitsMatrices[s]);e.trainLogitsMatrix=i}if(null==e.trainLogitsMatrix)return console.warn("Cannot predict without providing training images."),null;a.keep(e.trainLogitsMatrix);var u=e.getNumExamples();return e.trainLogitsMatrix.as2D(u,o).matMul(r.as2D(o,1)).as1D()})},t.prototype.predictClass=function(t){return r(this,void 0,void 0,function(){var e,n,r,a,i,u,c,l,p,h,f,d,v,m,g,y;return o(this,function(o){switch(o.label){case 0:if(e=-1,n=new Array(this.numClasses),!this.varsLoaded)throw new Error("Cannot predict until vars have been loaded.");return r=this.predict(t).asType("float32"),a=this.getNumExamples(),i=Math.min(this.k,a),l=(c=s).topK,[4,r.data()];case 1:if(u=l.apply(c,[o.sent(),i]),r.dispose(),null==(p=u.indices))return[2,{classIndex:e,confidences:n}];for(h=[],f=[],g=0;g<this.numClasses;g++)f.push(0),d=this.classExampleCount[g],g>0&&(d+=h[g-1]),h.push(d);for(g=0;g<p.length;g++)for(v=0;v<h.length;v++)if(p[g]<h[v]){f[v]++;break}for(m=0,g=0;g<this.numClasses;g++)(y=f[g]/i)>m&&(m=y,e=g),n[g]=y;return[2,{classIndex:e,confidences:n}]}})})},t.prototype.getClassExampleCount=function(){return this.classExampleCount},t.prototype.getClassLogitsMatrices=function(){return this.classLogitsMatrices},t.prototype.setClassLogitsMatrices=function(t){this.classLogitsMatrices=t,this.classExampleCount=t.map(function(t){return null!=t?t.shape[0]:0}),this.clearTrainLogitsMatrix()},t.prototype.clearTrainLogitsMatrix=function(){null!=this.trainLogitsMatrix&&(this.trainLogitsMatrix.dispose(),this.trainLogitsMatrix=null)},t.prototype.concatWithNulls=function(t,e){return null==t&&null==e?null:null==t?e.clone():null===e?t.clone():t.concat(e,0)},t.prototype.normalizeVector=function(t){var e=a.div(t,this.squashLogitsDenominator),n=e.square().sum().sqrt();return a.div(e,n)},t.prototype.getNumExamples=function(){for(var t=0,e=0;e<this.classExampleCount.length;e++)t+=this.classExampleCount[e];return t},t.prototype.dispose=function(){this.squeezeNet.dispose(),this.clearTrainLogitsMatrix(),this.classLogitsMatrices.forEach(function(t){return t.dispose()}),this.squashLogitsDenominator.dispose()},t}();e.KNNImageClassifier=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(207);e.KNNImageClassifier=r.KNNImageClassifier},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(42)),a=n(208),i=n(74),s=u(n(205));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}var l=function(){function t(e,n,r,o){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ready=!1,this.hasAnyTrainedClass=!1,this.knnKValue=n,this.numClasses=15,this.knn=new a.KNNImageClassifier(this.numClasses,this.knnKValue),t.loadModel(this.knn).then(function(){s.ready=!0,r()}),o instanceof HTMLVideoElement&&(this.video=(0,i.processVideo)(o,"127"))}return r(t,[{key:"addImage",value:function(){var t=c(regeneratorRuntime.mark(function t(e,n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.ready&&(a=o.fromPixels(e),this.knn.addImage(a,n),this.hasAnyTrainedClass=!0,r&&r());case 1:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"addImageFromVideo",value:function(){var t=c(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.ready&&this.video&&(r=o.fromPixels(this.video),this.knn.addImage(r,e),this.hasAnyTrainedClass=!0,n&&n());case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"predictFromImage",value:function(){var t=c(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ready||!this.hasAnyTrainedClass){t.next=6;break}return r=o.fromPixels(e),t.next=4,this.knn.predictClass(r);case 4:a=t.sent,n(a);case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"predictFromVideo",value:function(){var t=c(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.ready&&this.hasAnyTrainedClass&&this.video)){t.next=6;break}return n=o.fromPixels(this.video),t.next=4,this.knn.predictClass(n);case 4:r=t.sent,e(r);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getClassExampleCount",value:function(){return this.ready?this.knn.getClassExampleCount():null}},{key:"clearClass",value:function(t,e){this.ready&&this.hasAnyTrainedClass&&(this.knn.clearClass(t),e&&e())}},{key:"save",value:function(t){var e=this.knn.classLogitsMatrices,n=e.map(function(t){return t?t.dataSync():null}),r=t||Date.now();s.saveFile(r+".json",JSON.stringify({logits:e,tensors:n}))}},{key:"load",value:function(t,e){var n=this;s.loadFile(t,function(t){var r=t.tensors.map(function(e,n){if(e){var r=Object.keys(e).map(function(t){return e[t]});return o.tensor(r,t.logits[n].shape,t.logits[n].dtype)}return null});n.hasAnyTrainedClass=!0,n.knn.setClassLogitsMatrices(r),e&&e()})}}],[{key:"loadModel",value:function(){var t=c(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();e.default=l},function(t,e,n){"use strict";(function(n){var r,o,a,i,s,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};s=function(){return function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){if(!u&&"function"==typeof i&&i)return i(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}}()({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IMAGENET_CLASSES={0:"background",1:"tench, Tinca tinca",2:"goldfish, Carassius auratus",3:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",4:"tiger shark, Galeocerdo cuvieri",5:"hammerhead, hammerhead shark",6:"electric ray, crampfish, numbfish, torpedo",7:"stingray",8:"cock",9:"hen",10:"ostrich, Struthio camelus",11:"brambling, Fringilla montifringilla",12:"goldfinch, Carduelis carduelis",13:"house finch, linnet, Carpodacus mexicanus",14:"junco, snowbird",15:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",16:"robin, American robin, Turdus migratorius",17:"bulbul",18:"jay",19:"magpie",20:"chickadee",21:"water ouzel, dipper",22:"kite",23:"bald eagle, American eagle, Haliaeetus leucocephalus",24:"vulture",25:"great grey owl, great gray owl, Strix nebulosa",26:"European fire salamander, Salamandra salamandra",27:"common newt, Triturus vulgaris",28:"eft",29:"spotted salamander, Ambystoma maculatum",30:"axolotl, mud puppy, Ambystoma mexicanum",31:"bullfrog, Rana catesbeiana",32:"tree frog, tree-frog",33:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",34:"loggerhead, loggerhead turtle, Caretta caretta",35:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",36:"mud turtle",37:"terrapin",38:"box turtle, box tortoise",39:"banded gecko",40:"common iguana, iguana, Iguana iguana",41:"American chameleon, anole, Anolis carolinensis",42:"whiptail, whiptail lizard",43:"agama",44:"frilled lizard, Chlamydosaurus kingi",45:"alligator lizard",46:"Gila monster, Heloderma suspectum",47:"green lizard, Lacerta viridis",48:"African chameleon, Chamaeleo chamaeleon",49:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",50:"African crocodile, Nile crocodile, Crocodylus niloticus",51:"American alligator, Alligator mississipiensis",52:"triceratops",53:"thunder snake, worm snake, Carphophis amoenus",54:"ringneck snake, ring-necked snake, ring snake",55:"hognose snake, puff adder, sand viper",56:"green snake, grass snake",57:"king snake, kingsnake",58:"garter snake, grass snake",59:"water snake",60:"vine snake",61:"night snake, Hypsiglena torquata",62:"boa constrictor, Constrictor constrictor",63:"rock python, rock snake, Python sebae",64:"Indian cobra, Naja naja",65:"green mamba",66:"sea snake",67:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",68:"diamondback, diamondback rattlesnake, Crotalus adamanteus",69:"sidewinder, horned rattlesnake, Crotalus cerastes",70:"trilobite",71:"harvestman, daddy longlegs, Phalangium opilio",72:"scorpion",73:"black and gold garden spider, Argiope aurantia",74:"barn spider, Araneus cavaticus",75:"garden spider, Aranea diademata",76:"black widow, Latrodectus mactans",77:"tarantula",78:"wolf spider, hunting spider",79:"tick",80:"centipede",81:"black grouse",82:"ptarmigan",83:"ruffed grouse, partridge, Bonasa umbellus",84:"prairie chicken, prairie grouse, prairie fowl",85:"peacock",86:"quail",87:"partridge",88:"African grey, African gray, Psittacus erithacus",89:"macaw",90:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",91:"lorikeet",92:"coucal",93:"bee eater",94:"hornbill",95:"hummingbird",96:"jacamar",97:"toucan",98:"drake",99:"red-breasted merganser, Mergus serrator",100:"goose",101:"black swan, Cygnus atratus",102:"tusker",103:"echidna, spiny anteater, anteater",104:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",105:"wallaby, brush kangaroo",106:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",107:"wombat",108:"jelly fish",109:"sea anemone, anemone",110:"brain coral",111:"flatworm, platyhelminth",112:"nematode, nematode worm, roundworm",113:"conch",114:"snail",115:"slug",116:"sea slug, nudibranch",117:"chiton, coat-of-mail shell, sea cradle, polyplacophore",118:"chambered nautilus, pearly nautilus, nautilus",119:"Dungeness crab, Cancer magister",120:"rock crab, Cancer irroratus",121:"fiddler crab",122:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",123:"American lobster, Northern lobster, Maine lobster, Homarus americanus",124:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",125:"crayfish, crawfish, crawdad, crawdaddy",126:"hermit crab",127:"isopod",128:"white stork, Ciconia ciconia",129:"black stork, Ciconia nigra",130:"spoonbill",131:"flamingo",132:"little blue heron, Egretta caerulea",133:"American egret, great white heron, Egretta albus",134:"bittern",135:"crane",136:"limpkin, Aramus pictus",137:"European gallinule, Porphyrio porphyrio",138:"American coot, marsh hen, mud hen, water hen, Fulica americana",139:"bustard",140:"ruddy turnstone, Arenaria interpres",141:"red-backed sandpiper, dunlin, Erolia alpina",142:"redshank, Tringa totanus",143:"dowitcher",144:"oystercatcher, oyster catcher",145:"pelican",146:"king penguin, Aptenodytes patagonica",147:"albatross, mollymawk",148:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",149:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",150:"dugong, Dugong dugon",151:"sea lion",152:"Chihuahua",153:"Japanese spaniel",154:"Maltese dog, Maltese terrier, Maltese",155:"Pekinese, Pekingese, Peke",156:"Shih-Tzu",157:"Blenheim spaniel",158:"papillon",159:"toy terrier",160:"Rhodesian ridgeback",161:"Afghan hound, Afghan",162:"basset, basset hound",163:"beagle",164:"bloodhound, sleuthhound",165:"bluetick",166:"black-and-tan coonhound",167:"Walker hound, Walker foxhound",168:"English foxhound",169:"redbone",170:"borzoi, Russian wolfhound",171:"Irish wolfhound",172:"Italian greyhound",173:"whippet",174:"Ibizan hound, Ibizan Podenco",175:"Norwegian elkhound, elkhound",176:"otterhound, otter hound",177:"Saluki, gazelle hound",178:"Scottish deerhound, deerhound",179:"Weimaraner",180:"Staffordshire bullterrier, Staffordshire bull terrier",181:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",182:"Bedlington terrier",183:"Border terrier",184:"Kerry blue terrier",185:"Irish terrier",186:"Norfolk terrier",187:"Norwich terrier",188:"Yorkshire terrier",189:"wire-haired fox terrier",190:"Lakeland terrier",191:"Sealyham terrier, Sealyham",192:"Airedale, Airedale terrier",193:"cairn, cairn terrier",194:"Australian terrier",195:"Dandie Dinmont, Dandie Dinmont terrier",196:"Boston bull, Boston terrier",197:"miniature schnauzer",198:"giant schnauzer",199:"standard schnauzer",200:"Scotch terrier, Scottish terrier, Scottie",201:"Tibetan terrier, chrysanthemum dog",202:"silky terrier, Sydney silky",203:"soft-coated wheaten terrier",204:"West Highland white terrier",205:"Lhasa, Lhasa apso",206:"flat-coated retriever",207:"curly-coated retriever",208:"golden retriever",209:"Labrador retriever",210:"Chesapeake Bay retriever",211:"German short-haired pointer",212:"vizsla, Hungarian pointer",213:"English setter",214:"Irish setter, red setter",215:"Gordon setter",216:"Brittany spaniel",217:"clumber, clumber spaniel",218:"English springer, English springer spaniel",219:"Welsh springer spaniel",220:"cocker spaniel, English cocker spaniel, cocker",221:"Sussex spaniel",222:"Irish water spaniel",223:"kuvasz",224:"schipperke",225:"groenendael",226:"malinois",227:"briard",228:"kelpie",229:"komondor",230:"Old English sheepdog, bobtail",231:"Shetland sheepdog, Shetland sheep dog, Shetland",232:"collie",233:"Border collie",234:"Bouvier des Flandres, Bouviers des Flandres",235:"Rottweiler",236:"German shepherd, German shepherd dog, German police dog, alsatian",237:"Doberman, Doberman pinscher",238:"miniature pinscher",239:"Greater Swiss Mountain dog",240:"Bernese mountain dog",241:"Appenzeller",242:"EntleBucher",243:"boxer",244:"bull mastiff",245:"Tibetan mastiff",246:"French bulldog",247:"Great Dane",248:"Saint Bernard, St Bernard",249:"Eskimo dog, husky",250:"malamute, malemute, Alaskan malamute",251:"Siberian husky",252:"dalmatian, coach dog, carriage dog",253:"affenpinscher, monkey pinscher, monkey dog",254:"basenji",255:"pug, pug-dog",256:"Leonberg",257:"Newfoundland, Newfoundland dog",258:"Great Pyrenees",259:"Samoyed, Samoyede",260:"Pomeranian",261:"chow, chow chow",262:"keeshond",263:"Brabancon griffon",264:"Pembroke, Pembroke Welsh corgi",265:"Cardigan, Cardigan Welsh corgi",266:"toy poodle",267:"miniature poodle",268:"standard poodle",269:"Mexican hairless",270:"timber wolf, grey wolf, gray wolf, Canis lupus",271:"white wolf, Arctic wolf, Canis lupus tundrarum",272:"red wolf, maned wolf, Canis rufus, Canis niger",273:"coyote, prairie wolf, brush wolf, Canis latrans",274:"dingo, warrigal, warragal, Canis dingo",275:"dhole, Cuon alpinus",276:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",277:"hyena, hyaena",278:"red fox, Vulpes vulpes",279:"kit fox, Vulpes macrotis",280:"Arctic fox, white fox, Alopex lagopus",281:"grey fox, gray fox, Urocyon cinereoargenteus",282:"tabby, tabby cat",283:"tiger cat",284:"Persian cat",285:"Siamese cat, Siamese",286:"Egyptian cat",287:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",288:"lynx, catamount",289:"leopard, Panthera pardus",290:"snow leopard, ounce, Panthera uncia",291:"jaguar, panther, Panthera onca, Felis onca",292:"lion, king of beasts, Panthera leo",293:"tiger, Panthera tigris",294:"cheetah, chetah, Acinonyx jubatus",295:"brown bear, bruin, Ursus arctos",296:"American black bear, black bear, Ursus americanus, Euarctos americanus",297:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",298:"sloth bear, Melursus ursinus, Ursus ursinus",299:"mongoose",300:"meerkat, mierkat",301:"tiger beetle",302:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",303:"ground beetle, carabid beetle",304:"long-horned beetle, longicorn, longicorn beetle",305:"leaf beetle, chrysomelid",306:"dung beetle",307:"rhinoceros beetle",308:"weevil",309:"fly",310:"bee",311:"ant, emmet, pismire",312:"grasshopper, hopper",313:"cricket",314:"walking stick, walkingstick, stick insect",315:"cockroach, roach",316:"mantis, mantid",317:"cicada, cicala",318:"leafhopper",319:"lacewing, lacewing fly",320:"dragonfly, darning needle, devil's darning needle, sewingneedle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",321:"damselfly",322:"admiral",323:"ringlet, ringlet butterfly",324:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",325:"cabbage butterfly",326:"sulphur butterfly, sulfur butterfly",327:"lycaenid, lycaenid butterfly",328:"starfish, sea star",329:"sea urchin",330:"sea cucumber, holothurian",331:"wood rabbit, cottontail, cottontail rabbit",332:"hare",333:"Angora, Angora rabbit",334:"hamster",335:"porcupine, hedgehog",336:"fox squirrel, eastern fox squirrel, Sciurus niger",337:"marmot",338:"beaver",339:"guinea pig, Cavia cobaya",340:"sorrel",341:"zebra",342:"hog, pig, grunter, squealer, Sus scrofa",343:"wild boar, boar, Sus scrofa",344:"warthog",345:"hippopotamus, hippo, river horse, Hippopotamus amphibius",346:"ox",347:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",348:"bison",349:"ram, tup",350:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",351:"ibex, Capra ibex",352:"hartebeest",353:"impala, Aepyceros melampus",354:"gazelle",355:"Arabian camel, dromedary, Camelus dromedarius",356:"llama",357:"weasel",358:"mink",359:"polecat, fitch, foulmart, foumart, Mustela putorius",360:"black-footed ferret, ferret, Mustela nigripes",361:"otter",362:"skunk, polecat, wood pussy",363:"badger",364:"armadillo",365:"three-toed sloth, ai, Bradypus tridactylus",366:"orangutan, orang, orangutang, Pongo pygmaeus",367:"gorilla, Gorilla gorilla",368:"chimpanzee, chimp, Pan troglodytes",369:"gibbon, Hylobates lar",370:"siamang, Hylobates syndactylus, Symphalangus syndactylus",371:"guenon, guenon monkey",372:"patas, hussar monkey, Erythrocebus patas",373:"baboon",374:"macaque",375:"langur",376:"colobus, colobus monkey",377:"proboscis monkey, Nasalis larvatus",378:"marmoset",379:"capuchin, ringtail, Cebus capucinus",380:"howler monkey, howler",381:"titi, titi monkey",382:"spider monkey, Ateles geoffroyi",383:"squirrel monkey, Saimiri sciureus",384:"Madagascar cat, ring-tailed lemur, Lemur catta",385:"indri, indris, Indri indri, Indri brevicaudatus",386:"Indian elephant, Elephas maximus",387:"African elephant, Loxodonta africana",388:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",389:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",390:"barracouta, snoek",391:"eel",392:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",393:"rock beauty, Holocanthus tricolor",394:"anemone fish",395:"sturgeon",396:"gar, garfish, garpike, billfish, Lepisosteus osseus",397:"lionfish",398:"puffer, pufferfish, blowfish, globefish",399:"abacus",400:"abaya",401:"academic gown, academic robe, judge's robe",402:"accordion, piano accordion, squeeze box",403:"acoustic guitar",404:"aircraft carrier, carrier, flattop, attack aircraft carrier",405:"airliner",406:"airship, dirigible",407:"altar",408:"ambulance",409:"amphibian, amphibious vehicle",410:"analog clock",411:"apiary, bee house",412:"apron",413:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",414:"assault rifle, assault gun",415:"backpack, back pack, knapsack, packsack, rucksack, haversack",416:"bakery, bakeshop, bakehouse",417:"balance beam, beam",418:"balloon",419:"ballpoint, ballpoint pen, ballpen, Biro",420:"Band Aid",421:"banjo",422:"bannister, banister, balustrade, balusters, handrail",423:"barbell",424:"barber chair",425:"barbershop",426:"barn",427:"barometer",428:"barrel, cask",429:"barrow, garden cart, lawn cart, wheelbarrow",430:"baseball",431:"basketball",432:"bassinet",433:"bassoon",434:"bathing cap, swimming cap",435:"bath towel",436:"bathtub, bathing tub, bath, tub",437:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",438:"beacon, lighthouse, beacon light, pharos",439:"beaker",440:"bearskin, busby, shako",441:"beer bottle",442:"beer glass",443:"bell cote, bell cot",444:"bib",445:"bicycle-built-for-two, tandem bicycle, tandem",446:"bikini, two-piece",447:"binder, ring-binder",448:"binoculars, field glasses, opera glasses",449:"birdhouse",450:"boathouse",451:"bobsled, bobsleigh, bob",452:"bolo tie, bolo, bola tie, bola",453:"bonnet, poke bonnet",454:"bookcase",455:"bookshop, bookstore, bookstall",456:"bottlecap",457:"bow",458:"bow tie, bow-tie, bowtie",459:"brass, memorial tablet, plaque",460:"brassiere, bra, bandeau",461:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",462:"breastplate, aegis, egis",463:"broom",464:"bucket, pail",465:"buckle",466:"bulletproof vest",467:"bullet train, bullet",468:"butcher shop, meat market",469:"cab, hack, taxi, taxicab",470:"caldron, cauldron",471:"candle, taper, wax light",472:"cannon",473:"canoe",474:"can opener, tin opener",475:"cardigan",476:"car mirror",477:"carousel, carrousel, merry-go-round, roundabout, whirligig",478:"carpenter's kit, tool kit",479:"carton",480:"car wheel",481:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",482:"cassette",483:"cassette player",484:"castle",485:"catamaran",486:"CD player",487:"cello, violoncello",488:"cellular telephone, cellular phone, cellphone, cell, mobile phone",489:"chain",490:"chainlink fence",491:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",492:"chain saw, chainsaw",493:"chest",494:"chiffonier, commode",495:"chime, bell, gong",496:"china cabinet, china closet",497:"Christmas stocking",498:"church, church building",499:"cinema, movie theater, movie theatre, movie house, picture palace",500:"cleaver, meat cleaver, chopper",501:"cliff dwelling",502:"cloak",503:"clog, geta, patten, sabot",504:"cocktail shaker",505:"coffee mug",506:"coffeepot",507:"coil, spiral, volute, whorl, helix",508:"combination lock",509:"computer keyboard, keypad",510:"confectionery, confectionary, candy store",511:"container ship, containership, container vessel",512:"convertible",513:"corkscrew, bottle screw",514:"cornet, horn, trumpet, trump",515:"cowboy boot",516:"cowboy hat, ten-gallon hat",517:"cradle",518:"crane",519:"crash helmet",520:"crate",521:"crib, cot",522:"Crock Pot",523:"croquet ball",524:"crutch",525:"cuirass",526:"dam, dike, dyke",527:"desk",528:"desktop computer",529:"dial telephone, dial phone",530:"diaper, nappy, napkin",531:"digital clock",532:"digital watch",533:"dining table, board",534:"dishrag, dishcloth",535:"dishwasher, dish washer, dishwashing machine",536:"disk brake, disc brake",537:"dock, dockage, docking facility",538:"dogsled, dog sled, dog sleigh",539:"dome",540:"doormat, welcome mat",541:"drilling platform, offshore rig",542:"drum, membranophone, tympan",543:"drumstick",544:"dumbbell",545:"Dutch oven",546:"electric fan, blower",547:"electric guitar",548:"electric locomotive",549:"entertainment center",550:"envelope",551:"espresso maker",552:"face powder",553:"feather boa, boa",554:"file, file cabinet, filing cabinet",555:"fireboat",556:"fire engine, fire truck",557:"fire screen, fireguard",558:"flagpole, flagstaff",559:"flute, transverse flute",560:"folding chair",561:"football helmet",562:"forklift",563:"fountain",564:"fountain pen",565:"four-poster",566:"freight car",567:"French horn, horn",568:"frying pan, frypan, skillet",569:"fur coat",570:"garbage truck, dustcart",571:"gasmask, respirator, gas helmet",572:"gas pump, gasoline pump, petrol pump, island dispenser",573:"goblet",574:"go-kart",575:"golf ball",576:"golfcart, golf cart",577:"gondola",578:"gong, tam-tam",579:"gown",580:"grand piano, grand",581:"greenhouse, nursery, glasshouse",582:"grille, radiator grille",583:"grocery store, grocery, food market, market",584:"guillotine",585:"hair slide",586:"hair spray",587:"half track",588:"hammer",589:"hamper",590:"hand blower, blow dryer, blow drier, hair dryer, hair drier",591:"hand-held computer, hand-held microcomputer",592:"handkerchief, hankie, hanky, hankey",593:"hard disc, hard disk, fixed disk",594:"harmonica, mouth organ, harp, mouth harp",595:"harp",596:"harvester, reaper",597:"hatchet",598:"holster",599:"home theater, home theatre",600:"honeycomb",601:"hook, claw",602:"hoopskirt, crinoline",603:"horizontal bar, high bar",604:"horse cart, horse-cart",605:"hourglass",606:"iPod",607:"iron, smoothing iron",608:"jack-o'-lantern",609:"jean, blue jean, denim",610:"jeep, landrover",611:"jersey, T-shirt, tee shirt",612:"jigsaw puzzle",613:"jinrikisha, ricksha, rickshaw",614:"joystick",615:"kimono",616:"knee pad",617:"knot",618:"lab coat, laboratory coat",619:"ladle",620:"lampshade, lamp shade",621:"laptop, laptop computer",622:"lawn mower, mower",623:"lens cap, lens cover",624:"letter opener, paper knife, paperknife",625:"library",626:"lifeboat",627:"lighter, light, igniter, ignitor",628:"limousine, limo",629:"liner, ocean liner",630:"lipstick, lip rouge",631:"Loafer",632:"lotion",633:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",634:"loupe, jeweler's loupe",635:"lumbermill, sawmill",636:"magnetic compass",637:"mailbag, postbag",638:"mailbox, letter box",639:"maillot",640:"maillot, tank suit",641:"manhole cover",642:"maraca",643:"marimba, xylophone",644:"mask",645:"matchstick",646:"maypole",647:"maze, labyrinth",648:"measuring cup",649:"medicine chest, medicine cabinet",650:"megalith, megalithic structure",651:"microphone, mike",652:"microwave, microwave oven",653:"military uniform",654:"milk can",655:"minibus",656:"miniskirt, mini",657:"minivan",658:"missile",659:"mitten",660:"mixing bowl",661:"mobile home, manufactured home",662:"Model T",663:"modem",664:"monastery",665:"monitor",666:"moped",667:"mortar",668:"mortarboard",669:"mosque",670:"mosquito net",671:"motor scooter, scooter",672:"mountain bike, all-terrain bike, off-roader",673:"mountain tent",674:"mouse, computer mouse",675:"mousetrap",676:"moving van",677:"muzzle",678:"nail",679:"neck brace",680:"necklace",681:"nipple",682:"notebook, notebook computer",683:"obelisk",684:"oboe, hautboy, hautbois",685:"ocarina, sweet potato",686:"odometer, hodometer, mileometer, milometer",687:"oil filter",688:"organ, pipe organ",689:"oscilloscope, scope, cathode-ray oscilloscope, CRO",690:"overskirt",691:"oxcart",692:"oxygen mask",693:"packet",694:"paddle, boat paddle",695:"paddlewheel, paddle wheel",696:"padlock",697:"paintbrush",698:"pajama, pyjama, pj's, jammies",699:"palace",700:"panpipe, pandean pipe, syrinx",701:"paper towel",702:"parachute, chute",703:"parallel bars, bars",704:"park bench",705:"parking meter",706:"passenger car, coach, carriage",707:"patio, terrace",708:"pay-phone, pay-station",709:"pedestal, plinth, footstall",710:"pencil box, pencil case",711:"pencil sharpener",712:"perfume, essence",713:"Petri dish",714:"photocopier",715:"pick, plectrum, plectron",716:"pickelhaube",717:"picket fence, paling",718:"pickup, pickup truck",719:"pier",720:"piggy bank, penny bank",721:"pill bottle",722:"pillow",723:"ping-pong ball",724:"pinwheel",725:"pirate, pirate ship",726:"pitcher, ewer",727:"plane, carpenter's plane, woodworking plane",728:"planetarium",729:"plastic bag",730:"plate rack",731:"plow, plough",732:"plunger, plumber's helper",733:"Polaroid camera, Polaroid Land camera",734:"pole",735:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",736:"poncho",737:"pool table, billiard table, snooker table",738:"pop bottle, soda bottle",739:"pot, flowerpot",740:"potter's wheel",741:"power drill",742:"prayer rug, prayer mat",743:"printer",744:"prison, prison house",745:"projectile, missile",746:"projector",747:"puck, hockey puck",748:"punching bag, punch bag, punching ball, punchball",749:"purse",750:"quill, quill pen",751:"quilt, comforter, comfort, puff",752:"racer, race car, racing car",753:"racket, racquet",754:"radiator",755:"radio, wireless",756:"radio telescope, radio reflector",757:"rain barrel",758:"recreational vehicle, RV, R.V.",759:"reel",760:"reflex camera",761:"refrigerator, icebox",762:"remote control, remote",763:"restaurant, eating house, eating place, eatery",764:"revolver, six-gun, six-shooter",765:"rifle",766:"rocking chair, rocker",767:"rotisserie",768:"rubber eraser, rubber, pencil eraser",769:"rugby ball",770:"rule, ruler",771:"running shoe",772:"safe",773:"safety pin",774:"saltshaker, salt shaker",775:"sandal",776:"sarong",777:"sax, saxophone",778:"scabbard",779:"scale, weighing machine",780:"school bus",781:"schooner",782:"scoreboard",783:"screen, CRT screen",784:"screw",785:"screwdriver",786:"seat belt, seatbelt",787:"sewing machine",788:"shield, buckler",789:"shoe shop, shoe-shop, shoe store",790:"shoji",791:"shopping basket",792:"shopping cart",793:"shovel",794:"shower cap",795:"shower curtain",796:"ski",797:"ski mask",798:"sleeping bag",799:"slide rule, slipstick",800:"sliding door",801:"slot, one-armed bandit",802:"snorkel",803:"snowmobile",804:"snowplow, snowplough",805:"soap dispenser",806:"soccer ball",807:"sock",808:"solar dish, solar collector, solar furnace",809:"sombrero",810:"soup bowl",811:"space bar",812:"space heater",813:"space shuttle",814:"spatula",815:"speedboat",816:"spider web, spider's web",817:"spindle",818:"sports car, sport car",819:"spotlight, spot",820:"stage",821:"steam locomotive",822:"steel arch bridge",823:"steel drum",824:"stethoscope",825:"stole",826:"stone wall",827:"stopwatch, stop watch",828:"stove",829:"strainer",830:"streetcar, tram, tramcar, trolley, trolley car",831:"stretcher",832:"studio couch, day bed",833:"stupa, tope",834:"submarine, pigboat, sub, U-boat",835:"suit, suit of clothes",836:"sundial",837:"sunglass",838:"sunglasses, dark glasses, shades",839:"sunscreen, sunblock, sun blocker",840:"suspension bridge",841:"swab, swob, mop",842:"sweatshirt",843:"swimming trunks, bathing trunks",844:"swing",845:"switch, electric switch, electrical switch",846:"syringe",847:"table lamp",848:"tank, army tank, armored combat vehicle, armoured combat vehicle",849:"tape player",850:"teapot",851:"teddy, teddy bear",852:"television, television system",853:"tennis ball",854:"thatch, thatched roof",855:"theater curtain, theatre curtain",856:"thimble",857:"thresher, thrasher, threshing machine",858:"throne",859:"tile roof",860:"toaster",861:"tobacco shop, tobacconist shop, tobacconist",862:"toilet seat",863:"torch",864:"totem pole",865:"tow truck, tow car, wrecker",866:"toyshop",867:"tractor",868:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",869:"tray",870:"trench coat",871:"tricycle, trike, velocipede",872:"trimaran",873:"tripod",874:"triumphal arch",875:"trolleybus, trolley coach, trackless trolley",876:"trombone",877:"tub, vat",878:"turnstile",879:"typewriter keyboard",880:"umbrella",881:"unicycle, monocycle",882:"upright, upright piano",883:"vacuum, vacuum cleaner",884:"vase",885:"vault",886:"velvet",887:"vending machine",888:"vestment",889:"viaduct",890:"violin, fiddle",891:"volleyball",892:"waffle iron",893:"wall clock",894:"wallet, billfold, notecase, pocketbook",895:"wardrobe, closet, press",896:"warplane, military plane",897:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",898:"washer, automatic washer, washing machine",899:"water bottle",900:"water jug",901:"water tower",902:"whiskey jug",903:"whistle",904:"wig",905:"window screen",906:"window shade",907:"Windsor tie",908:"wine bottle",909:"wing",910:"wok",911:"wooden spoon",912:"wool, woolen, woollen",913:"worm fence, snake fence, snake-rail fence, Virginia fence",914:"wreck",915:"yawl",916:"yurt",917:"web site, website, internet site, site",918:"comic book",919:"crossword puzzle, crossword",920:"street sign",921:"traffic light, traffic signal, stoplight",922:"book jacket, dust cover, dust jacket, dust wrapper",923:"menu",924:"plate",925:"guacamole",926:"consomme",927:"hot pot, hotpot",928:"trifle",929:"ice cream, icecream",930:"ice lolly, lolly, lollipop, popsicle",931:"French loaf",932:"bagel, beigel",933:"pretzel",934:"cheeseburger",935:"hotdog, hot dog, red hot",936:"mashed potato",937:"head cabbage",938:"broccoli",939:"cauliflower",940:"zucchini, courgette",941:"spaghetti squash",942:"acorn squash",943:"butternut squash",944:"cucumber, cuke",945:"artichoke, globe artichoke",946:"bell pepper",947:"cardoon",948:"mushroom",949:"Granny Smith",950:"strawberry",951:"orange",952:"lemon",953:"fig",954:"pineapple, ananas",955:"banana",956:"jackfruit, jak, jack",957:"custard apple",958:"pomegranate",959:"hay",960:"carbonara",961:"chocolate sauce, chocolate syrup",962:"dough",963:"meat loaf, meatloaf",964:"pizza, pizza pie",965:"potpie",966:"burrito",967:"red wine",968:"espresso",969:"cup",970:"eggnog",971:"alp",972:"bubble",973:"cliff, drop, drop-off",974:"coral reef",975:"geyser",976:"lakeside, lakeshore",977:"promontory, headland, head, foreland",978:"sandbar, sand bar",979:"seashore, coast, seacoast, sea-coast",980:"valley, vale",981:"volcano",982:"ballplayer, baseball player",983:"groom, bridegroom",984:"scuba diver",985:"rapeseed",986:"daisy",987:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",988:"corn",989:"acorn",990:"hip, rose hip, rosehip",991:"buckeye, horse chestnut, conker",992:"coral fungus",993:"agaric",994:"gyromitra",995:"stinkhorn, carrion fungus",996:"earthstar",997:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",998:"bolete",999:"ear, spike, capitulum",1000:"toilet tissue, toilet paper, bathroom tissue"}},{}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=t("./mobilenet");n.MobileNet=r.MobileNet},{"./mobilenet":3}],3:[function(t,e,r){(function(e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});"undefined"!=typeof window?window.dl:void 0!==e&&e.dl;var a=t("../util"),i=t("./imagenet_classes"),s=function(){function t(){this.PREPROCESS_DIVISOR=ml5.dl.scalar(127.5),this.ONE=ml5.dl.scalar(1)}return t.prototype.load=function(){return n(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return t=new ml5.dl.CheckpointLoader("https://storage.googleapis.com/learnjs-data/checkpoint_zoo/mobilenet_v1_1.0_224/"),e=this,[4,t.getAllVariables()];case 1:return e.variables=n.sent(),[2]}})})},t.prototype.predict=function(t){var e=this;return ml5.dl.tidy(function(){var n=t.div(e.PREPROCESS_DIVISOR).sub(e.ONE),r=e.convBlock(n,2),o=e.depthwiseConvBlock(r,1,1),a=e.depthwiseConvBlock(o,2,2),i=e.depthwiseConvBlock(a,1,3),s=e.depthwiseConvBlock(i,2,4),u=e.depthwiseConvBlock(s,1,5),c=e.depthwiseConvBlock(u,2,6),l=e.depthwiseConvBlock(c,1,7),p=e.depthwiseConvBlock(l,1,8),h=e.depthwiseConvBlock(p,1,9),f=e.depthwiseConvBlock(h,1,10),d=e.depthwiseConvBlock(f,1,11),v=e.depthwiseConvBlock(d,2,12),m=e.depthwiseConvBlock(v,1,13).avgPool(7,2,"valid"),g=e.variables["MobilenetV1/Logits/Conv2d_1c_1x1/weights"],y=e.variables["MobilenetV1/Logits/Conv2d_1c_1x1/biases"];return m.conv2d(g,1,"same").add(y).as1D()})},t.prototype.convBlock=function(t,e){var n="MobilenetV1/Conv2d_0";return t.conv2d(this.variables[n+"/weights"],e,"same").batchNormalization(this.variables[n+"/BatchNorm/moving_mean"],this.variables[n+"/BatchNorm/moving_variance"],.001,this.variables[n+"/BatchNorm/gamma"],this.variables[n+"/BatchNorm/beta"]).clipByValue(0,6)},t.prototype.depthwiseConvBlock=function(t,e,n){var r="MobilenetV1/Conv2d_"+String(n)+"_depthwise",o="MobilenetV1/Conv2d_"+String(n)+"_pointwise";return t.depthwiseConv2D(this.variables[r+"/depthwise_weights"],e,"same").batchNormalization(this.variables[r+"/BatchNorm/moving_mean"],this.variables[r+"/BatchNorm/moving_variance"],.001,this.variables[r+"/BatchNorm/gamma"],this.variables[r+"/BatchNorm/beta"]).clipByValue(0,6).conv2d(this.variables[o+"/weights"],[1,1],"same").batchNormalization(this.variables[o+"/BatchNorm/moving_mean"],this.variables[o+"/BatchNorm/moving_variance"],.001,this.variables[o+"/BatchNorm/gamma"],this.variables[o+"/BatchNorm/beta"]).clipByValue(0,6)},t.prototype.getTopKClasses=function(t,e){return n(this,void 0,void 0,function(){var n,r,s,u,c,l,p,h;return o(this,function(o){switch(o.label){case 0:return n=t.softmax().asType("float32"),u=(s=a).topK,[4,n.data()];case 1:for(r=u.apply(s,[o.sent(),e]),c=r.indices,l=r.values,p={},h=0;h<c.length;h++)p[i.IMAGENET_CLASSES[c[h]]]=l[h];return[2,p]}})})},t.prototype.dispose=function(){for(var t in this.variables)this.variables[t].dispose()},t}();r.MobileNet=s}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":4,"./imagenet_classes":1}],4:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.topK=function(t,e){for(var n=[],r=0;r<t.length;r++)n.push({value:t[r],index:r});n.sort(function(t,e){return e.value-t.value});var o=new Float32Array(e),a=new Int32Array(e);for(r=0;r<e;r++)o[r]=n[r].value,a[r]=n[r].index;return{values:o,indices:a}}},{}]},{},[2])(2)},"object"===u(e)&&void 0!==t?t.exports=s():(o=[],void 0===(a="function"==typeof(r=s)?r.apply(e,o):r)||(t.exports=a))}).call(this,n(73))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IMAGENET_CLASSES={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.topK=function(t,e){for(var n=[],r=0;r<t.length;r++)n.push({value:t[r],index:r});n.sort(function(t,e){return e.value-t.value});var o=new Float32Array(e),a=new Int32Array(e);for(r=0;r<e;r++)o[r]=n[r].value,a[r]=n[r].index;return{values:o,indices:a}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(42),i=n(212),s=n(211),u=function(){function t(){this.preprocessOffset=a.tensor1d([103.939,116.779,123.68])}return t.prototype.load=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return t=new a.CheckpointLoader("https://storage.googleapis.com/learnjs-data/checkpoint_zoo/squeezenet1_1/"),e=this,[4,t.getAllVariables()];case 1:return e.variables=n.sent(),[2]}})})},t.prototype.predict=function(t){return this.predictWithActivation(t).logits},t.prototype.predictWithActivation=function(t,e){var n=this;return a.tidy(function(){var r,o=a.sub(t.asType("float32"),n.preprocessOffset).conv2d(n.variables["conv1_W:0"],2,0).add(n.variables["conv1_b:0"]).relu();"conv_1"===e&&(r=o);var i=o.maxPool(3,2,0);"maxpool_1"===e&&(r=i);var s=n.fireModule(i,2);"fire2"===e&&(r=s);var u=n.fireModule(s,3);"fire3"===e&&(r=u);var c=u.maxPool(3,2,"valid");"maxpool_2"===e&&(r=c);var l=n.fireModule(c,4);"fire4"===e&&(r=l);var p=n.fireModule(l,5);"fire5"===e&&(r=p);var h=p.maxPool(3,2,0);"maxpool_3"===e&&(r=h);var f=n.fireModule(h,6);"fire6"===e&&(r=f);var d=n.fireModule(f,7);"fire7"===e&&(r=d);var v=n.fireModule(d,8);"fire8"===e&&(r=v);var m=n.fireModule(v,9);"fire9"===e&&(r=m);var g=m.conv2d(n.variables["conv10_W:0"],1,0).add(n.variables["conv10_b:0"]);return"conv10"===e&&(r=g),{logits:a.avgPool(g,g.shape[0],1,0).as1D(),activation:r}})},t.prototype.fireModule=function(t,e){var n=a.conv2d(t,this.variables["fire"+e+"/squeeze1x1_W:0"],1,0).add(this.variables["fire"+e+"/squeeze1x1_b:0"]).relu(),r=a.conv2d(n,this.variables["fire"+e+"/expand1x1_W:0"],1,0).add(this.variables["fire"+e+"/expand1x1_b:0"]).relu(),o=a.conv2d(n,this.variables["fire"+e+"/expand3x3_W:0"],1,1).add(this.variables["fire"+e+"/expand3x3_b:0"]).relu();return r.concat(o,2)},t.prototype.getTopKClasses=function(t,e){return r(this,void 0,void 0,function(){var n,r,u,c,l,p,h,f;return o(this,function(o){switch(o.label){case 0:return n=a.tidy(function(){return a.softmax(t).asType("float32")}),c=(u=i).topK,[4,n.data()];case 1:for(r=c.apply(u,[o.sent(),e]),n.dispose(),l=r.indices,p=r.values,h={},f=0;f<l.length;f++)h[s.IMAGENET_CLASSES[l[f]]]=p[f];return[2,h]}})})},t.prototype.dispose=function(){for(var t in this.preprocessOffset.dispose(),this.variables)this.variables[t].dispose()},t}();e.SqueezeNet=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(42),a=n(130),i=n(210),s=n(74);function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e,this.readyPromise=null,"SqueezeNet"===this.model?this.net=new a.SqueezeNet:"MobileNet"===this.model?this.net=new i.MobileNet:(console.warn(e+" is not a valid model. Using MobileNet as default."),this.net=new i.MobileNet),this.video=null}return r(t,[{key:"predict",value:function(){var e=u(regeneratorRuntime.mark(function e(n,r,o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n instanceof HTMLVideoElement&&!this.video&&(this.video=(0,s.processVideo)(n,"127")),this.readyPromise||(this.readyPromise=t.loadModel(this.net)),e.next=4,this.readyPromise;case 4:if(!this.video){e.next=7;break}if(!this.video.src){e.next=7;break}return e.abrupt("return",this.getClasses(this.video,r,o));case 7:return e.abrupt("return",this.getClasses(n,r,o));case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getClasses",value:function(){var t=u(regeneratorRuntime.mark(function t(e,n,r){var a,i,s,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,o.fromPixels)(e),i=o.image.resizeBilinear(a,[227,227]),s=[],u=this.net.predict(i),t.next=6,this.net.getTopKClasses(u,n||10);case 6:return c=t.sent,Object.keys(c).forEach(function(t){s.push({label:t,probability:c[t]})}),s.sort(function(t,e){return e.probability-t.probability}),r&&r(s),t.abrupt("return",s);case 11:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}],[{key:"loadModel",value:function(){var t=u(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}();e.default=c},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(99),i=n(98),s=n(97),u=n(96),c=n(95),l=n(94),p=n(75),h=function(){function t(){}return t.sgd=function(t){return new p.SGDOptimizer(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new c.MomentumOptimizer(t,e,void 0,n)},t.rmsprop=function(t,e,n,r){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=1e-8),new l.RMSPropOptimizer(t,e,n,void 0,r)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=1e-8),new s.AdamOptimizer(t,e,n,r,void 0)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=1e-8),new a.AdadeltaOptimizer(t,e,void 0,n)},t.adamax=function(t,e,n,r,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=1e-8),void 0===o&&(o=0),new u.AdamaxOptimizer(t,e,n,r,o,void 0)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new i.AdagradOptimizer(t,void 0,e)},r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"sgd",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"momentum",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"rmsprop",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"adam",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"adadelta",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"adamax",null),r([o.doc({heading:"Training",subheading:"Optimizers",namespace:"train"})],t,"adagrad",null),t}();e.OptimizerConstructors=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(99),o=n(98),a=n(97),i=n(96),s=n(95),u=n(215),c=n(94),l=n(75);s.MomentumOptimizer,l.SGDOptimizer,r.AdadeltaOptimizer,o.AdagradOptimizer,c.RMSPropOptimizer,i.AdamaxOptimizer,a.AdamOptimizer,e.train={sgd:u.OptimizerConstructors.sgd,momentum:u.OptimizerConstructors.momentum,adadelta:u.OptimizerConstructors.adadelta,adagrad:u.OptimizerConstructors.adagrad,rmsprop:u.OptimizerConstructors.rmsprop,adamax:u.OptimizerConstructors.adamax,adam:u.OptimizerConstructors.adam}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),i=n(1),s={float32:4,int32:4};e.loadWeights=function(t,e,n){return void 0===e&&(e=""),r(this,void 0,void 0,function(){var r,u,c,l,p,h,f,d,v,m,g;return o(this,function(o){switch(o.label){case 0:if(r=t.map(function(){return!1}),u={},c=null!=n?n.map(function(){return!1}):[],l=[],t.forEach(function(t,e){var o=0;t.weights.forEach(function(t){var a=s[t.dtype]*i.sizeFromShape(t.shape),p=function(){r[e]=!0,null==u[e]&&(u[e]=[]),u[e].push({manifestEntry:t,groupOffset:o,sizeBytes:a})};null!=n?n.forEach(function(e,n){e===t.name&&(p(),c[n]=!0)}):p(),l.push(t.name),o+=a})}),!c.every(function(t){return t}))throw p=n.filter(function(t,e){return!c[e]}),new Error("Could not find weights in manifest with names: "+p.join(", ")+". \nManifest JSON has weights with names: "+l.join(", ")+".");return h=r.reduce(function(t,e,n){return e&&t.push(n),t},[]),f=[],h.forEach(function(n){t[n].paths.forEach(function(t){var n=e+(e.endsWith("/")?"":"/")+t;f.push(fetch(n))})}),[4,Promise.all(f)];case 1:return d=o.sent(),[4,Promise.all(d.map(function(t){return t.arrayBuffer()}))];case 2:return v=o.sent(),m={},g=0,h.forEach(function(e){for(var n=t[e].paths.length,r=0,o=0;o<n;o++)r+=v[g+o].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),c=0,l=0;l<n;l++){var p=new Uint8Array(v[g+l]);s.set(p,c),c+=p.byteLength}u[e].forEach(function(t){var e,n=i.slice(t.groupOffset,t.groupOffset+t.sizeBytes);if("float32"===t.manifestEntry.dtype)e=new Float32Array(n);else{if("int32"!==t.manifestEntry.dtype)throw new Error("Weight "+t.manifestEntry.name+" has unknown dtype "+t.manifestEntry.dtype+".");e=new Int32Array(n)}var r=t.manifestEntry.name;if(null!=m[r])throw new Error("Duplicate weight with name "+r+". Please make sure weights names are unique in the manifest JSON.");m[r]=a.tensor(e,t.manifestEntry.shape,t.manifestEntry.dtype)}),g+=n}),[2,m]}})})}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(1),s=n(19),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.t1=e,o.t2=n,o.outTensor=r,i.assert(1===i.sizeFromShape(e.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(e.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.t1),o=e.get(this.t2);a.tidy(function(){var s;s=i.isScalarShape(r.shape)?t.scalarMinusArray(r,o):i.isScalarShape(o.shape)?t.arrayMinusScalar(r,o):t.subtract(r,o),e.set(n.outTensor,a.keep(s))})},e.prototype.backProp=function(t,e,n){var r=this,o=n.get(this.outTensor);a.tidy(function(){if(s.shouldBackProp(r.t1))if(i.isScalarShape(r.t1.shape)){var e=t.sum(o);n.add(r.t1,e)}else n.add(r.t1,t.clone(o));if(s.shouldBackProp(r.t2))if(i.isScalarShape(r.t2.shape)){e=t.sum(o);var a=t.neg(e);n.add(r.t2,a)}else n.add(r.t2,t.neg(o))})},e.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},e}(n(16).Operation);e.Subtract=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(7),u=n(1),c=n(66),l=n(19),p=n(16),h=function(t){function e(e,n){var r=t.call(this)||this;return r.logitsTensor=e,r.output=n,r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.logitsTensor);return i.tidy(function(){e.set(n.output,i.keep(t.softmax(r)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.output),a=n.get(this.output);i.tidy(function(){if(l.shouldBackProp(r.logitsTensor)){var e=t.elementWiseMul(t.subtract(a,t.sum(t.elementWiseMul(a,o))),o);n.add(r.logitsTensor,e)}})},e}(p.Operation);e.Softmax=h;var f=function(t){function e(e,n,r){var o=t.call(this)||this;return o.logitsTensor=e,o.labelTensor=n,o.yTensor=r,o.softmaxTensor=new c.SymbolicTensor(e.shape),o.epsilon=a.ENV.math.keep(s.Scalar.new(1e-5)),o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.logitsTensor),o=e.get(this.labelTensor);i.tidy(function(){var a=t.softmax(r);e.set(n.softmaxTensor,i.keep(a)),e.set(n.yTensor,i.keep(d(t,a,o,n.epsilon)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.softmaxTensor),a=e.get(this.labelTensor);i.tidy(function(){n.add(r.logitsTensor,t.subtract(o,a))})},e.prototype.disposeTransientArrays=function(t,e){t.disposeArray(this.softmaxTensor)},e.prototype.dispose=function(){this.epsilon.dispose()},e}(p.Operation);function d(t,e,n,r){return u.assert(e.size===n.size,"The output and target must be the same size"),i.tidy(function(){var o=t.scalarPlusArray(r,e),a=t.log(o),i=t.elementWiseMul(n,a),s=t.neg(i);return t.sum(s)})}e.SoftmaxCrossEntropyCost=f,e.crossEntropyCost=d},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(1),s=function(t){function e(e,n){var r=t.call(this)||this;r.xTensor=e,r.yTensor=n;var o=i.sizeFromShape(e.shape),a=i.sizeFromShape(n.shape);return i.assert(o===a,"The input size ("+o+") and output size ("+a+") must match"),r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor),o=t.clone(r);a.tidy(function(){e.set(n.yTensor,a.keep(o.reshape(n.yTensor.shape)))})},e.prototype.backProp=function(t,e,n){var r=this,o=n.get(this.yTensor),i=t.clone(o);a.tidy(function(){n.add(r.xTensor,i.reshape(r.xTensor.shape))})},e}(n(16).Operation);e.Reshape=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(7),u=n(1),c=n(19),l=function(t){function e(e,n){var r=t.call(this)||this;return r.x=e,r.outTensor=n,u.assertShapesMatch(n.shape,[]),r.ones=a.ENV.math.keep(s.Tensor.ones(e.shape)),r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x);i.tidy(function(){e.set(n.outTensor,i.keep(t.sum(r)))})},e.prototype.backProp=function(t,e,n){var r=this;c.shouldBackProp(this.x)&&i.tidy(function(){var e=n.get(r.outTensor);n.add(r.x,t.scalarTimesArray(e,r.ones))})},e.prototype.dispose=function(){this.ones.dispose()},e}(n(16).Operation);e.ReduceSum=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(1),s=n(19),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,i.assert(1===i.sizeFromShape(e.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(e.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var s;s=i.isScalarShape(r.shape)?t.scalarTimesArray(r,o):i.isScalarShape(o.shape)?t.scalarTimesArray(o,r):t.elementWiseMul(r,o),e.set(n.yTensor,a.keep(s))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.x1Tensor),u=e.get(this.x2Tensor),c=n.get(this.yTensor);a.tidy(function(){if(s.shouldBackProp(r.x1Tensor))if(i.isScalarShape(r.x1Tensor.shape)){var e=t.elementWiseMul(c,u);n.add(r.x1Tensor,t.sum(e))}else i.isScalarShape(u.shape)?n.add(r.x1Tensor,t.scalarTimesArray(u,c)):n.add(r.x1Tensor,t.elementWiseMul(u,c));if(s.shouldBackProp(r.x2Tensor))if(i.isScalarShape(r.x2Tensor.shape)){e=t.elementWiseMul(c,o);n.add(r.x2Tensor,t.sum(e))}else i.isScalarShape(o.shape)?n.add(r.x2Tensor,t.scalarTimesArray(o,c)):n.add(r.x2Tensor,t.elementWiseMul(o,c))})},e}(n(16).Operation);e.Multiply=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(60),s=n(1),u=function(t){function e(e,n,r,o,a){void 0===o&&(o=1);var u=t.call(this)||this;return u.xTensor=e,u.yTensor=n,u.fieldSize=r,u.stride=o,u.pad=null!=a?a:i.computeDefaultPad(e.shape,u.fieldSize,u.stride),s.assert(s.isInt(u.pad),"The zero padding ("+u.pad+") must be an integer. Change the stride and/or zero pad parameters"),u}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.maxPool(r,n.fieldSize,n.stride,n.pad)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.xTensor),i=n.get(this.yTensor);a.tidy(function(){n.add(r.xTensor,t.maxPoolBackprop(i,o,r.fieldSize,r.stride,r.pad))})},e}(n(16).Operation);e.MaxPool=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(19),s=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){2===r.shape.length&&2===o.shape.length?e.set(n.yTensor,a.keep(t.matMul(r,o))):2===r.shape.length&&1===o.shape.length?e.set(n.yTensor,a.keep(t.matrixTimesVector(r,o))):1===r.shape.length&&2===o.shape.length&&e.set(n.yTensor,a.keep(t.vectorTimesMatrix(r,o)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=n.get(this.yTensor);1===o.shape.length&&(o=o.reshape([1,o.size]),u=u.reshape([1,u.size])),1===s.shape.length&&(s=s.reshape([s.size,1]),u=u.reshape([u.size,1])),a.tidy(function(){if(i.shouldBackProp(r.x1Tensor)){var e=t.matMul(u,s,!1,!0);n.add(r.x1Tensor,1===r.x1Tensor.shape.length?e.as1D():e)}if(i.shouldBackProp(r.x2Tensor)){var a=t.matMul(o,u,!0,!1);n.add(r.x2Tensor,1===r.x2Tensor.shape.length?a.as1D():a)}})},e}(n(16).Operation);e.MatMul=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(19),s=function(t){function e(e,n){var r=t.call(this)||this;return r.xTensor=e,r.yTensor=n,r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.log(r)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.xTensor),s=n.get(this.yTensor);a.tidy(function(){i.shouldBackProp(r.xTensor)&&n.add(r.xTensor,t.divide(s,o))})},e}(n(16).Operation);e.Log=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(19),s=function(t){function e(e,n,r,o,a){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=n,i.c1Tensor=r,i.c2Tensor=o,i.outTensor=a,i}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor),i=e.get(this.c1Tensor).asScalar(),s=e.get(this.c2Tensor).asScalar();a.tidy(function(){e.set(n.outTensor,a.keep(t.scaledArrayAdd(i,r,s,o)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=e.get(this.c1Tensor),c=e.get(this.c2Tensor),l=n.get(this.outTensor);a.tidy(function(){if(i.shouldBackProp(r.x1Tensor)&&n.add(r.x1Tensor,t.scalarTimesArray(u,l)),i.shouldBackProp(r.x2Tensor)&&n.add(r.x2Tensor,t.scalarTimesArray(c,l)),i.shouldBackProp(r.c1Tensor)){var e=t.elementWiseMul(o,l);n.add(r.c1Tensor,t.sum(e))}if(i.shouldBackProp(r.c2Tensor)){var a=t.elementWiseMul(s,l);n.add(r.c2Tensor,t.sum(a))}})},e}(n(16).Operation);e.LinearCombination=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(19),s=function(t){function e(e,n){var r=t.call(this)||this;return r.xTensor=e,r.yTensor=n,r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.exp(r)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.yTensor),s=n.get(this.yTensor);a.tidy(function(){i.shouldBackProp(r.xTensor)&&n.add(r.xTensor,t.elementWiseMul(o,s))})},e}(n(16).Operation);e.Exp=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=n(11),a=function(){function t(){this.halfOne=r.keep(o.scalar(.5))}return t.prototype.cost=function(t,e){var n=t.subStrict(e),r=n.square(),o=this.halfOne.mul(r);return n.dispose(),r.dispose(),o},t.prototype.der=function(t,e){return t.subStrict(e)},t.prototype.dispose=function(){this.halfOne.dispose()},t}();e.SquareCostFunc=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(7),u=n(1),c=n(228),l=n(19),p=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=n,i.yTensor=r,i.func=o,i.oneOverNScalar=a.ENV.math.keep(s.Scalar.new(1/u.sizeFromShape(e.shape))),i}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);i.tidy(function(){var a=n.func.cost(r,o),s=t.sum(a),u=t.scalarTimesArray(n.oneOverNScalar,s);e.set(n.yTensor,i.keep(u))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.x1Tensor),a=e.get(this.x2Tensor);i.tidy(function(){l.shouldBackProp(r.x1Tensor)&&n.add(r.x1Tensor,r.func.der(o,a)),l.shouldBackProp(r.x2Tensor)&&n.add(r.x2Tensor,r.func.der(a,o))})},e.prototype.dispose=function(){this.func.dispose(),this.oneOverNScalar.dispose()},e}(n(16).Operation);e.ElementWiseCost=p;var h=function(t){function e(e,n,r){return t.call(this,e,n,r,new c.SquareCostFunc)||this}return o(e,t),e}(p);e.MeanSquaredCost=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=n(7),a=function(){function t(){this.one=o.Scalar.new(1)}return t.prototype.output=function(t,e){return t.tanh(e)},t.prototype.der=function(t,e,n){var o=this;return r.tidy(function(){var e=t.multiplyStrict(n,n);return t.subtract(o.one,e)})},t.prototype.dispose=function(){this.one.dispose()},t}();e.TanHFunc=a;var i=function(){function t(){}return t.prototype.output=function(t,e){return t.relu(e)},t.prototype.der=function(t,e,n){return t.step(e)},t.prototype.dispose=function(){},t}();e.ReLUFunc=i;var s=function(){function t(t){this.alpha=t}return t.prototype.output=function(t,e){return t.leakyRelu(e,this.alpha)},t.prototype.der=function(t,e,n){return t.step(e,this.alpha)},t.prototype.dispose=function(){},t}();e.LeakyReluFunc=s;var u=function(){function t(){}return t.prototype.output=function(t,e){return t.sigmoid(e)},t.prototype.der=function(t,e,n){return r.tidy(function(){var e=t.multiplyStrict(n,n);return t.subStrict(n,e)})},t.prototype.dispose=function(){},t}();e.SigmoidFunc=u;var c=function(){function t(){this.two=o.Scalar.new(2)}return t.prototype.output=function(t,e){return t.multiplyStrict(e,e)},t.prototype.der=function(t,e,n){return t.multiply(this.two,e)},t.prototype.dispose=function(){this.two.dispose()},t}();e.SquareFunc=c;var l=function(){function t(){}return t.prototype.output=function(t,e){return t.elu(e)},t.prototype.der=function(t,e,n){throw new Error("Not implemented")},t.prototype.dispose=function(){},t}();e.EluFunc=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(230),s=n(16),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.xTensor=e,o.yTensor=n,o.func=r,o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);a.tidy(function(){e.set(n.yTensor,a.keep(n.func.output(t,r)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.xTensor),i=e.get(this.yTensor),s=n.get(this.yTensor);a.tidy(function(){var e=r.func.der(t,o,i);n.add(r.xTensor,t.elementWiseMul(s,e)),e.dispose()})},e.prototype.dispose=function(){this.func.dispose()},e}(s.Operation);e.ElementWiseActivation=u;var c=function(t){function e(e,n){return t.call(this,e,n,new i.ReLUFunc)||this}return o(e,t),e}(u);e.ReLU=c;var l=function(t){function e(e,n,r){return t.call(this,e,n,new i.LeakyReluFunc(r))||this}return o(e,t),e}(u);e.LeakyReLU=l;var p=function(t){function e(e,n){return t.call(this,e,n,new i.TanHFunc)||this}return o(e,t),e}(u);e.TanH=p;var h=function(t){function e(e,n){return t.call(this,e,n,new i.SigmoidFunc)||this}return o(e,t),e}(u);e.Sigmoid=h;var f=function(t){function e(e,n){return t.call(this,e,n,new i.SquareFunc)||this}return o(e,t),e}(u);e.Square=f;var d=function(t){function e(e,n){return t.call(this,e,n,new i.EluFunc)||this}return o(e,t),e}(u);e.Elu=d;var v=function(t){function e(e,n,r){var o=t.call(this)||this;return o.xTensor=e,o.alphaTensor=n,o.yTensor=r,o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor),o=e.get(this.alphaTensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.prelu(r,o)))})},e.prototype.backProp=function(t,e,n){throw new Error("Not implemented")},e}(s.Operation);e.PReLU=v},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(1),s=n(19),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,i.assert(1===i.sizeFromShape(e.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(e.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var s;s=i.isScalarShape(r.shape)?t.scalarDividedByArray(r,o):i.isScalarShape(o.shape)?t.arrayDividedByScalar(r,o):t.divide(r,o),e.set(n.yTensor,a.keep(s))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.x1Tensor),u=e.get(this.x2Tensor),c=n.get(this.yTensor),l=i.isScalarShape(o.shape),p=i.isScalarShape(u.shape);a.tidy(function(){if(s.shouldBackProp(r.x1Tensor))if(l){var e=t.divide(c,u);n.add(r.x1Tensor,t.sum(e)),e.dispose()}else p?n.add(r.x1Tensor,t.arrayDividedByScalar(c,u)):n.add(r.x1Tensor,t.divide(c,u));if(s.shouldBackProp(r.x2Tensor)){var a=t.elementWiseMul(u,u),i=void 0;i=p?t.arrayDividedByScalar(o,a):l?t.scalarDividedByArray(o,a):t.divide(o,a);var h=t.neg(i),f=t.elementWiseMul(c,h);p?n.add(r.x2Tensor,t.sum(f)):n.add(r.x2Tensor,f)}})},e}(n(16).Operation);e.Divide=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(60),s=n(1),u=function(t){function e(e,n,r,o,a,u,c,l){void 0===c&&(c=1);var p=t.call(this)||this;return p.wTensor=e,p.xTensor=n,p.bTensor=r,p.yTensor=o,p.fieldSize=a,p.outputDepth=u,p.stride=c,p.assertWeightsShape(e.shape),p.zeroPad=null!=l?l:i.computeDefaultPad(p.xTensor.shape,p.fieldSize,p.stride),s.assert(s.isInt(p.zeroPad),"The zero padding ("+p.zeroPad+") must be an integer. Change the stride and/or zero pad parameters"),p}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.wTensor),o=e.get(this.bTensor),i=e.get(this.xTensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.conv2d(i,r,o,n.stride,n.zeroPad)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.wTensor),i=e.get(this.xTensor),s=n.get(this.yTensor);a.tidy(function(){var e=t.conv2dDerFilter(i,s,o.shape,r.stride,r.zeroPad),a=t.sum(s,[0,1]),u=t.conv2dDerInput(i.shape,s,o,r.stride,r.zeroPad);n.add(r.wTensor,e),n.add(r.bTensor,a),n.add(r.xTensor,u)})},e.prototype.assertWeightsShape=function(t){s.assert(t[0]===this.fieldSize&&t[1]===this.fieldSize&&t[2]===this.xTensor.shape[2]&&t[3]===this.outputDepth,"weights must be of shape ["+this.fieldSize+","+this.fieldSize+","+this.xTensor.shape[2]+","+this.outputDepth+"] but they are ofshape ["+t+"]")},e}(n(16).Operation);e.Convolution2D=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(69),s=n(1),u=n(16),c=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var i=t.concat1D(r,o);e.set(n.yTensor,a.keep(i))})},e.prototype.backProp=function(t,e,n){var r=this;a.tidy(function(){f(t,r.x1Tensor,r.x2Tensor,r.yTensor,0,n,e)})},e}(u.Operation);e.Concat1D=c;var l=function(t){function e(e,n,r,o){var a=t.call(this)||this;return a.x1Tensor=e,a.x2Tensor=n,a.axis=r,a.yTensor=o,i.assertParams(e.shape,n.shape,r),a}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var i=t.concat2D(r,o,n.axis);e.set(n.yTensor,a.keep(i))})},e.prototype.backProp=function(t,e,n){var r=this;a.tidy(function(){f(t,r.x1Tensor,r.x2Tensor,r.yTensor,r.axis,n,e)})},e}(u.Operation);e.Concat2D=l;var p=function(t){function e(e,n,r,o){var a=t.call(this)||this;return a.x1Tensor=e,a.x2Tensor=n,a.axis=r,a.yTensor=o,i.assertParams(e.shape,n.shape,r),a}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var i=t.concat3D(r,o,n.axis);e.set(n.yTensor,a.keep(i))})},e.prototype.backProp=function(t,e,n){var r=this;a.tidy(function(){f(t,r.x1Tensor,r.x2Tensor,r.yTensor,r.axis,n,e)})},e}(u.Operation);e.Concat3D=p;var h=function(t){function e(e,n,r,o){var a=t.call(this)||this;return a.x1Tensor=e,a.x2Tensor=n,a.axis=r,a.yTensor=o,i.assertParams(e.shape,n.shape,r),a}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var i=t.concat4D(r,o,n.axis);e.set(n.yTensor,a.keep(i))})},e.prototype.backProp=function(t,e,n){var r=this;a.tidy(function(){f(t,r.x1Tensor,r.x2Tensor,r.yTensor,r.axis,n,e)})},e}(u.Operation);function f(t,e,n,r,o,a,u){var c=a.get(r),l=u.get(e),p=u.get(n),h=l.as2D(-1,s.sizeFromShape(l.shape.slice(o))),f=p.as2D(-1,s.sizeFromShape(p.shape.slice(o))),d=i.computeGradientSliceShapes(h.shape,f.shape),v=d.aBegin,m=d.aSize,g=d.bBegin,y=d.bSize,b=c.as2D(-1,h.shape[1]+f.shape[1]),w=t.slice2D(b,v,m).reshapeAs(l),x=t.slice2D(b,g,y).reshapeAs(p);a.add(e,w),a.add(n,x)}e.Concat4D=h},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.argMaxEquals(r,o)))})},e.prototype.backProp=function(t,e,n){throw new Error("ArgMaxEquals backprop unimplemented")},e}(n(16).Operation);e.ArgMaxEquals=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=function(t){function e(e,n){var r=t.call(this)||this;return r.xTensor=e,r.yTensor=n,r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);a.tidy(function(){e.set(n.yTensor,a.keep(t.argMax(r)))})},e.prototype.backProp=function(t,e,n){throw new Error("ArgMax backprop unimplemented")},e}(n(16).Operation);e.ArgMax=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(1),s=n(19),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,i.assert(1===i.sizeFromShape(e.shape)||1===i.sizeFromShape(n.shape)||i.arraysEqual(e.shape,n.shape)||2===e.shape.length&&1===n.shape.length&&e.shape[1]===n.shape[0]||1===e.shape.length&&2===n.shape.length&&e.shape[0]===n.shape[1],"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape, or one of them can be broadcasted (2D and 1D)."),o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);a.tidy(function(){var s;s=i.isScalarShape(r.shape)?t.scalarPlusArray(r,o):i.isScalarShape(o.shape)?t.scalarPlusArray(o,r):t.add(r,o),e.set(n.yTensor,a.keep(s))})},e.prototype.backProp=function(t,e,n){var r=this,o=n.get(this.yTensor);a.tidy(function(){if(s.shouldBackProp(r.x1Tensor))if(1===r.x1Tensor.shape.length&&2===r.x2Tensor.shape.length&&r.x1Tensor.shape[0]===r.x2Tensor.shape[1]){var e=t.sum(o,0);n.add(r.x1Tensor,e)}else if(i.isScalarShape(r.x1Tensor.shape)){e=t.sum(o);n.add(r.x1Tensor,e)}else n.add(r.x1Tensor,t.clone(o));if(s.shouldBackProp(r.x2Tensor))if(2===r.x1Tensor.shape.length&&1===r.x2Tensor.shape.length&&r.x1Tensor.shape[1]===r.x2Tensor.shape[0]){e=t.sum(o,0);n.add(r.x2Tensor,e)}else if(i.isScalarShape(r.x2Tensor.shape)){e=t.sum(o);n.add(r.x2Tensor,e)}else n.add(r.x2Tensor,t.clone(o))})},e.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},e}(n(16).Operation);e.Add=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(66),o=n(19),a=n(237),i=n(236),s=n(235),u=n(234),c=n(233),l=n(232),p=n(231),h=n(229),f=n(227),d=n(226),v=n(225),m=n(224),g=n(223),y=n(222),b=n(221),w=n(220),x=n(219),k=n(218);e.emitFromGraphNodes=function(t){var e=[];return t.forEach(function(t){return Array.prototype.push.apply(e,function(t){if(t instanceof r.ReshapeNode)return[new w.Reshape(t.inputs[r.ReshapeNode.X],t.output)];if(t instanceof r.MatMulNode){var e=t.inputs[r.MatMulNode.X1],n=t.inputs[r.MatMulNode.X2];return[new m.MatMul(e,n,t.output)]}if(t instanceof r.Convolution2DNode){var E=t.inputs[r.Convolution2DNode.W],S=t.inputs[r.Convolution2DNode.X],T=t.inputs[r.Convolution2DNode.B];return[new c.Convolution2D(E,S,T,t.output,t.fieldSize,t.outputDepth,t.stride,t.zeroPad)]}if(t instanceof r.MaxPoolNode){var S=t.inputs[r.MaxPoolNode.X];return[new g.MaxPool(S,t.output,t.fieldSize,t.stride,t.zeroPad)]}if(t instanceof r.ExpNode)return[new f.Exp(t.inputs[r.ExpNode.X],t.output)];if(t instanceof r.LogNode)return[new v.Log(t.inputs[r.LogNode.X],t.output)];if(t instanceof r.ReLUNode)return[new p.ReLU(t.inputs[r.ReLUNode.X],t.output)];if(t instanceof r.LeakyReLUNode)return[new p.LeakyReLU(t.inputs[r.LeakyReLUNode.X],t.output,t.alpha)];if(t instanceof r.PReLUNode)return[new p.PReLU(t.inputs[r.PReLUNode.X],t.inputs[r.PReLUNode.ALPHA],t.output)];if(t instanceof r.EluNode)return[new p.Elu(t.inputs[r.EluNode.X],t.output)];if(t instanceof r.TanHNode)return[new p.TanH(t.inputs[r.TanHNode.X],t.output)];if(t instanceof r.SigmoidNode)return[new p.Sigmoid(t.inputs[r.SigmoidNode.X],t.output)];if(t instanceof r.SoftmaxCrossEntropyCostNode){var S=t.inputs[r.SoftmaxCrossEntropyCostNode.X],O=t.inputs[r.SoftmaxCrossEntropyCostNode.TARGET];return[new x.SoftmaxCrossEntropyCost(S,O,t.output)]}if(t instanceof r.SoftmaxNode)return[new x.Softmax(t.inputs[r.SoftmaxNode.X],t.output)];if(t instanceof r.MeanSquaredCostNode){var _=t.inputs[r.MeanSquaredCostNode.LABEL],A=t.inputs[r.MeanSquaredCostNode.PREDICTION];return[new h.MeanSquaredCost(_,A,t.output)]}if(t instanceof r.ArgMaxEqualsNode)return[new s.ArgMaxEquals(t.inputs[r.ArgMaxEqualsNode.X1],t.inputs[r.ArgMaxEqualsNode.X2],t.output)];if(t instanceof r.ArgMaxNode)return[new i.ArgMax(t.x,t.output)];if(t instanceof r.FusedLinearCombinationNode)return[new d.LinearCombination(t.inputs[r.FusedLinearCombinationNode.T1],t.inputs[r.FusedLinearCombinationNode.T2],t.inputs[r.FusedLinearCombinationNode.C1],t.inputs[r.FusedLinearCombinationNode.C2],t.output)];if(t instanceof r.Concat1DNode)return[new u.Concat1D(t.inputs[r.Concat1DNode.X1],t.inputs[r.Concat1DNode.X2],t.output)];if(t instanceof r.Concat2DNode)return[new u.Concat2D(t.inputs[r.Concat2DNode.X1],t.inputs[r.Concat2DNode.X2],t.axis,t.output)];if(t instanceof r.Concat3DNode)return[new u.Concat3D(t.inputs[r.Concat3DNode.X1],t.inputs[r.Concat3DNode.X2],t.axis,t.output)];if(t instanceof r.Concat4DNode)return[new u.Concat4D(t.inputs[r.Concat4DNode.X1],t.inputs[r.Concat4DNode.X2],t.axis,t.output)];if(t instanceof r.SquareNode)return[new p.Square(t.inputs[r.SquareNode.X],t.output)];if(t instanceof r.AddNode)return[new a.Add(t.inputs[r.AddNode.T1],t.inputs[r.AddNode.T2],t.output)];if(t instanceof r.SubtractNode)return[new k.Subtract(t.inputs[r.SubtractNode.T1],t.inputs[r.SubtractNode.T2],t.output)];if(t instanceof r.MultiplyNode)return[new y.Multiply(t.inputs[r.MultiplyNode.T1],t.inputs[r.MultiplyNode.T2],t.output)];if(t instanceof r.DivideNode)return[new l.Divide(t.inputs[r.DivideNode.T1],t.inputs[r.DivideNode.T2],t.output)];if(t instanceof r.ReduceSumNode)return[new b.ReduceSum(t.inputs[r.ReduceSumNode.X],t.output)];if(o.isInputNode(t))return[];throw Error("Unsupported node type: "+t.constructor.name)}(t))}),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(3),a=n(7),i=n(132);!function(t){t[t.SUM=0]="SUM",t[t.MEAN=1]="MEAN"}(r=e.MetricReduction||(e.MetricReduction={}));var s=function(){function t(t,e,n){this.math=t,this.session=e,this.eventObserver=n,this.lastCostTimestamp=0,this.lastEvalTimestamp=0,this.resetStatistics(),this.zeroScalar=a.Scalar.new(0)}return t.prototype.resetStatistics=function(){this.totalBatchesTrained=0},t.prototype.train=function(t,e,n,o,i,s,u,c,l,p,h){void 0===l&&(l=r.MEAN),void 0===p&&(p=1500),void 0===h&&(h=500),this.costTensor=t,this.trainFeedEntries=e,this.metricTensor=s,this.metricFeedEntries=u,null!=c&&this.metricBatchSize!==c&&(null!=this.metricBatchSizeScalar&&this.metricBatchSizeScalar.dispose(),this.metricBatchSizeScalar=a.Scalar.new(c)),this.metricBatchSize=c,this.metricReduction=l,this.batchSize=n,this.optimizer=o,this.metricIntervalMs=p,this.costIntervalMs=h,this.currentTrainLoopNumBatches=i,this.batchesTrainedThisRun=0,this.isTraining=!0,this.trainStartTimestamp=performance.now(),this.trainNetwork()},t.prototype.stopTraining=function(){this.isTraining=!1},t.prototype.resumeTraining=function(){this.isTraining=!0,this.trainNetwork()},t.prototype.trainNetwork=function(){var t=this;if(this.batchesTrainedThisRun===this.currentTrainLoopNumBatches&&this.stopTraining(),this.isTraining){var e=performance.now(),n=null!=this.eventObserver.avgCostCallback&&e-this.lastCostTimestamp>this.costIntervalMs;n&&(this.lastCostTimestamp=e);var r=n?i.CostReduction.MEAN:i.CostReduction.NONE;o.tidy(function(){var o=t.session.train(t.costTensor,t.trainFeedEntries,t.batchSize,t.optimizer,r);if(n){var a=performance.now()-e;if(t.eventObserver.avgCostCallback(o),null!=t.eventObserver.trainExamplesPerSecCallback){var i=1e3*t.batchSize/a;t.eventObserver.trainExamplesPerSecCallback(i)}}null!=t.eventObserver.metricCallback&&null!=t.metricFeedEntries&&e-t.lastEvalTimestamp>t.metricIntervalMs&&(t.lastEvalTimestamp=e,null!=t.lastComputedMetric&&t.lastComputedMetric.dispose(),t.lastComputedMetric=t.computeMetric(),t.eventObserver.metricCallback(t.lastComputedMetric)),null!=t.eventObserver.totalTimeCallback&&t.eventObserver.totalTimeCallback((e-t.trainStartTimestamp)/1e3),t.batchesTrainedThisRun++,t.totalBatchesTrained++,null!=t.eventObserver.batchesTrainedCallback&&t.eventObserver.batchesTrainedCallback(t.totalBatchesTrained)}),requestAnimationFrame(function(){return t.trainNetwork()})}else null!=this.eventObserver.doneTrainingCallback&&this.eventObserver.doneTrainingCallback()},t.prototype.infer=function(t,e,n,r,o){var i=this;if(void 0===n&&(n=3e3),void 0===r&&(r=5),null==this.eventObserver.inferenceExamplesCallback&&null==this.eventObserver.inferenceExamplesPerSecCallback)throw new Error("Cannot start inference loop, no inference example or examples/sec observer provided.");for(var s=0;s<e.length;s++){if(e[s].data instanceof a.Tensor)throw new Error("Cannot start inference on the model runner with feed entries of type NDArray. Please use InputProviders.")}this.inferenceExampleIntervalMs=n,this.inferenceTensor=t,this.inferenceFeedEntries=e,this.inferenceExampleCount=r,this.currentInferenceLoopNumPasses=o,this.isInferring||(this.inferencePassesThisRun=0,requestAnimationFrame(function(){return i.inferNetwork()})),this.isInferring=!0},t.prototype.inferNetwork=function(){var t=this;this.isInferring&&this.inferencePassesThisRun!==this.currentInferenceLoopNumPasses&&(o.tidy(function(){for(var e=[],n=[],r=performance.now(),o=0;o<t.inferenceExampleCount;o++){for(var a=[],i=0;i<t.inferenceFeedEntries.length;i++){var s=t.inferenceFeedEntries[i],u=s.data.getNextCopy();a.push({tensor:s.tensor,data:u})}e.push(a),n.push(t.session.eval(t.inferenceTensor,a))}if(null!=t.eventObserver.inferenceExamplesPerSecCallback){n[n.length-1].dataSync();var c=performance.now()-r,l=1e3*t.inferenceExampleCount/c;t.eventObserver.inferenceExamplesPerSecCallback(l)}null!=t.eventObserver.inferenceExamplesCallback&&t.eventObserver.inferenceExamplesCallback(e,n),t.inferencePassesThisRun++}),this.lastInferTimeoutID=window.setTimeout(function(){return t.inferNetwork()},this.inferenceExampleIntervalMs))},t.prototype.stopInferring=function(){this.isInferring=!1,window.clearTimeout(this.lastInferTimeoutID)},t.prototype.isInferenceRunning=function(){return this.isInferring},t.prototype.computeMetric=function(){var t=this;if(null==this.metricFeedEntries)throw new Error("Cannot compute metric, no metric FeedEntries provided.");var e=this.zeroScalar;return o.tidy(function(){for(var n=0;n<t.metricBatchSize;n++){var o=t.session.eval(t.metricTensor,t.metricFeedEntries);e=t.math.add(e,o.toFloat())}return t.metricReduction===r.MEAN&&(e=t.math.divide(e,t.metricBatchSizeScalar)),e})},t.prototype.getTotalBatchesTrained=function(){return this.totalBatchesTrained},t.prototype.getLastComputedMetric=function(){return this.lastComputedMetric},t.prototype.setMath=function(t){this.math=t},t.prototype.setSession=function(t){this.session=t},t.prototype.setInferenceTensor=function(t){this.inferenceTensor=t},t.prototype.setInferenceExampleCount=function(t){this.inferenceExampleCount=t},t}();e.GraphRunner=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=function(){function t(t){this.inputs=t,this.idx=0,this.inputCounter=0,this.epoch=0,this.shuffledIndices=a.createShuffledIndices(t[0].length),this.numInputs=t.length;for(var e=this.inputs[0].length,n=0;n<this.numInputs;n++)a.assert(this.inputs[n].length===e,"Number of examples must match across different inputs.");for(n=0;n<this.numInputs;n++)for(var r=this.inputs[n][0].shape,o=0;o<this.inputs[n].length;o++)a.assertShapesMatch(r,this.inputs[n][o].shape)}return t.prototype.getCurrentExampleIndex=function(){var t=this.idx;return this.inputCounter++,this.inputCounter>=this.numInputs&&(this.idx++,this.inputCounter=0,this.idx>=this.inputs[0].length&&(this.idx=0,this.epoch++)),t},t.prototype.getNextInput=function(t){var e=this.getCurrentExampleIndex();return this.inputs[t][this.shuffledIndices[e]]},t.prototype.getEpoch=function(){return this.epoch},t.prototype.getInputProviders=function(){for(var t=[],e=0;e<this.numInputs;e++)t.push(this.getInputProvider(e));return t},t}();e.InMemoryShuffledInputProviderBuilder=i;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(){return e.getNextInput(t).clone()},disposeCopy:function(t){t.dispose()}}},e}(i);e.InCPUMemoryShuffledInputProviderBuilder=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(){return e.getNextInput(t).clone()},disposeCopy:function(t){t.dispose()}}},e}(i);e.InGPUMemoryShuffledInputProviderBuilder=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=function(){function t(t){this.urlPath=t,"/"!==this.urlPath.charAt(this.urlPath.length-1)&&(this.urlPath+="/")}return t.prototype.loadManifest=function(){var t=this;return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.urlPath+"manifest.json"),r.onload=function(){t.checkpointManifest=JSON.parse(r.responseText),e()},r.onerror=function(e){throw new Error("manifest.json not found at "+t.urlPath+". "+e)},r.send()})},t.prototype.getCheckpointManifest=function(){var t=this;return null==this.checkpointManifest?new Promise(function(e,n){t.loadManifest().then(function(){e(t.checkpointManifest)})}):new Promise(function(e,n){e(t.checkpointManifest)})},t.prototype.getAllVariables=function(){var t=this;return null!=this.variables?new Promise(function(e,n){e(t.variables)}):new Promise(function(e,n){t.getCheckpointManifest().then(function(n){for(var r=Object.keys(t.checkpointManifest),o=[],a=0;a<r.length;a++)o.push(t.getVariable(r[a]));Promise.all(o).then(function(n){t.variables={};for(var o=0;o<n.length;o++)t.variables[r[o]]=n[o];e(t.variables)})})})},t.prototype.getVariable=function(t){var e=this;if(!(t in this.checkpointManifest))throw new Error("Cannot load non-existant variable "+t);var n=function(n,o){var a=new XMLHttpRequest;a.responseType="arraybuffer";var i=e.checkpointManifest[t].filename;a.open("GET",e.urlPath+i),a.onload=function(){if(404===a.status)throw new Error("Not found variable "+t);var o=new Float32Array(a.response),i=r.Tensor.make(e.checkpointManifest[t].shape,{values:o});n(i)},a.onerror=function(e){throw new Error("Could not fetch variable "+t+": "+e)},a.send()};return null==this.checkpointManifest?new Promise(function(t,r){e.loadManifest().then(function(){new Promise(n).then(t)})}):new Promise(n)},t}();e.CheckpointLoader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.version="0.5.1"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),o=0;o<n.length;o++)n[o]=t[e[o]];this.outputShape=n,this.rank=n.length;var a=r.getCoordsDataType(this.rank),i=function(t){var e=t.length;if(e>4)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "}}();e.TransposeProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),o=0;o<n.length;o++)n[o]=t[o]*e[o];this.outputShape=n,this.rank=n.length;var a=r.getCoordsDataType(this.rank),i=function(t){var e=t.length;if(e>4)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}}();e.TileProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),o=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.allocatedTextures=[],this.usedTextureCount={}}return t.prototype.acquireTexture=function(t,e){void 0===e&&(e=r.TextureType.FLOAT);var n=a(t,e);if(n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextureCount||(this.usedTextureCount[n]=0),this.usedTextureCount[n]++,this.freeTextures[n].length>0)return this.numFreeTextures--,this.numUsedTextures++,this.log(),this.freeTextures[n].shift();this.numUsedTextures++,this.log();var o=this.gpgpu.createMatrixTexture(t[0],t[1]);return this.allocatedTextures.push(o),o},t.prototype.releaseTexture=function(t,e,n){void 0===n&&(n=r.TextureType.FLOAT);var o=a(e,n);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--,this.usedTextureCount[o]--,this.log()},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;null!=this.allocatedTextures&&(this.allocatedTextures.forEach(function(e){t.gpgpu.deleteMatrixTexture(e)}),this.freeTextures=null,this.allocatedTextures=null,this.usedTextureCount=null,this.numUsedTextures=0,this.numFreeTextures=0)},t}();function a(t,e){return t[0]+"_"+t[1]+"_"+e}e.TextureManager=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e=r.getCoordsDataType(this.rank),n=function(t){if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+e+" start;\n\n      void main() {\n        "+e+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){if(null!=e.startLoc||(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=e.startLoc))if(1===e.rank)n.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)n.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)n.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");n.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},t}();e.SliceProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){return function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var o=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),a=r.getCoordsDataType(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "}}();e.ReverseProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=r?[a-1,i-1]:[a,i],c=r?[e-1,n-1]:[e,n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}();e.ResizeBilinearProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="sum"===e,s="0.0";i||(s="min"===e?"1.0 / 0.0":"-1.0 / 0.0");var u="min"===e?"min":"max",c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e&&(c="sumValue");var l=4*Math.floor(n/4),p=n%4,h="\n      if ("+i+") {\n        sumValue += dot(values, ones);\n      } else {\n        if (hasNaN(values)) {\n          setOutput(getNaN(values));\n          return;\n        }\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n          "+h+"\n        } else if ("+(2===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n          "+h+"\n        } else if ("+(3===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n          "+h+"\n        }\n        setOutput("+c+");\n      }\n    "}}();e.ReduceProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterHeight,o=t.filterWidth,a=t.strideHeight,i=t.strideWidth,s=t.padInfo.top,u=t.padInfo.left;this.outputShape=t.outShape;var c="avg"===e,l="0.0";if(c||(l="min"===e?"1.0 / 0.0":"-1.0 / 0.0"),n){var p="min"===e?"<=":">=";this.userCode="\n        const ivec2 strides = ivec2("+a+", "+i+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              if (isNaN(value)) {\n                setOutput(value);\n                return;\n              }\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value "+p+" currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "}else{var h="min"===e?"min":"max",f=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(f="avgValue / "+r*o+".0");var d=4*Math.floor(o/4),v=o%4,m="\n      if (hasNaN(values)) {\n        setOutput(getNaN(values));\n        return;\n      }\n      if ("+c+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = "+h+"(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+l+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+l+");\n        float avgValue = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+m+"\n          }\n\n          int xC = xCCorner + "+d+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n            "+m+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+m+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+m+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}}}();e.Pool2DProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var o=t.length,a=r.getCoordsDataType(o),i=e.map(function(t){return t[0]}).join(","),s=e.map(function(e,n){return e[0]+t[n]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);this.userCode=1!==o?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+s+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+u+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "}}();e.PadProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}}();e.OneHotProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}();e.MultinomialProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var o=n?t[1]:t[0],a=r?e[0]:e[1],i=n?t[0]:t[1];this.outputShape=[o,a];var s=function(t,e){return n?e+" + "+t+", aRow":"aRow, "+e+" + "+t},u=function(t,e){return r?"bCol, "+e+" + "+t:e+" + "+t+", bCol"},c=4*Math.floor(i/4),l=i%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+c+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+s(0,"i")+"),\n          getMatrixA("+s(1,"i")+"),\n          getMatrixA("+s(2,"i")+"),\n          getMatrixA("+s(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+u(0,"i")+"),\n          getMatrixB("+u(1,"i")+"),\n          getMatrixB("+u(2,"i")+"),\n          getMatrixB("+u(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===l)+") {\n        result += getMatrixA("+s(0,c)+") *\n          getMatrixB("+u(0,c)+");\n      } else if ("+(2===l)+") {\n        vec2 a = vec2(\n          getMatrixA("+s(0,c)+"),\n          getMatrixA("+s(1,c)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+u(0,c)+"),\n          getMatrixB("+u(1,c)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===l)+") {\n        vec3 a = vec3(\n          getMatrixA("+s(0,c)+"),\n          getMatrixA("+s(1,c)+"),\n          getMatrixA("+s(2,c)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+u(0,c)+"),\n          getMatrixB("+u(1,c)+"),\n          getMatrixB("+u(2,c)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "}}();e.MatMulProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=e*n-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.MaxPool2DBackpropProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n,r,o,a){this.variableNames=["x"],this.outputShape=[];var i,s=e,u=t[1]-1,c=t[2]-1,l=t[3]-1;this.outputShape=t;var p="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+p+")":1===o?"1.0/("+p+")":"exp(log("+p+") * float(-"+o+"));",this.userCode="withinChannel"===a?"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int u = -"+s+"; u <= "+s+"; u++) {\n            for (int v = -"+s+"; v <= "+s+"; v++) {\n              int idx = r + u;\n              int idy = c + v;\n              if (idx >= 0 && idx <= "+u+" && idy >= 0 && idy <= "+c+") {\n                float z = getX(b, idx, idy, d);\n                sum += z * z;\n              }\n            }\n          }\n          float val = x * "+i+";\n          setOutput(val);\n        }\n      ":"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int j = -"+s+"; j <= "+s+"; j++) {\n            int idx = d + j;\n            if (idx >= 0 && idx <=  "+l+") {\n              float z = getX(b, r, c, idx);\n              sum += z * z;\n            }\n          }\n          float val = x * "+i+";\n          setOutput(val);\n        }\n      "}}();e.LRNProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){return function(t,e,n){var o,a;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",o="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<e.length;c++)u.push(""+i[c]),c<t&&s.push(""+i[c]);o=s.join(),a=u.join()}var l=r.getCoordsDataType(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+o+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "}}();e.WhereProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(1),a=n(41),i="NaN";function s(){return!r.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")}function u(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,a=t.texShape,i=e[n].tensor.shape,s=e[n].texData.texShape;if(!o.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!o.arraysEqual(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")})}e.compileProgram=function(t,e,n,r){for(var o=e.userCode,u=n.map(function(t,n){var r={logicalShape:t.tensor.shape,texShape:t.texData.texShape};return{name:e.variableNames[n],shapeInfo:r}}),c=u.map(function(t){return t.shapeInfo}),l={logicalShape:r.tensor.shape,texShape:r.texData.texShape},p=a.makeShader(u,l,o,!0===e.supportsBroadcasting),h=t.createProgram(p),f={},d=0;d<e.variableNames.length;d++){var v=e.variableNames[d];f[v]=t.getUniformLocation(h,v)}s()&&(f[i]=t.getUniformLocation(h,i,!1));return{program:e,source:p,webGLProgram:h,uniformLocations:f,gpgpu:t,inShapeInfos:c,outShapeInfo:l}},e.runProgram=function(t,e,n,r){u(t.inShapeInfos,e),u([t.outShapeInfo],[n]);var o=n.texData.texture,a=n.texData.texShape,c=t.gpgpu;c.setOutputMatrixTexture(o,a[0],a[1]),c.setProgram(t.webGLProgram),e.forEach(function(e,n){var r=e.texData.texture,o=t.program.variableNames[n],a=t.uniformLocations[o];c.setInputMatrixTexture(r,a,n)}),s()&&c.gl.uniform1f(t.uniformLocations[i],NaN),null!=r&&r(c,t.webGLProgram),c.executeProgram()},e.makeShaderKey=function(t,e,n){var r="";e.concat(n).forEach(function(t){r+=t.tensor.shape+"_"+t.texData.texShape});var o=t.userCode,a=(!0===t.supportsBroadcasting).toString(),i=t.constructor.name;return i+="_"+a+"_"+r+"_"+o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(41),o=function(){return function(t,e,n){this.variableNames=["A","indices"];var o=t.slice();o[n]=e,this.outputShape=o,this.rank=o.length;var a=r.getCoordsDataType(this.rank),i=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<t.length;a++)a===e?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}(t,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}}();e.GatherProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["A"];var e=t[0],n=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+e+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}}();e.FromPixelsProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+c+";\n        int q = d2 - d1 * "+c+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.DepthwiseConv2DProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,o=t.strideWidth,a=t.filterHeight,i=t.filterWidth,s=4*Math.floor(t.inChannels/4),u=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+o+");\n      const ivec2 pads = ivec2("+e+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+s+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===u)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+s+") *\n                getW(wR, wC, "+s+", d2);\n            } else if ("+(2===u)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+s+"),\n                getX(batch, xR, xC, "+s+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+s+", d2),\n                getW(wR, wC, "+s+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===u)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+s+"),\n                getX(batch, xR, xC, "+s+" + 1),\n                getX(batch, xR, xC, "+s+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+s+", d2),\n                getW(wR, wC, "+s+" + 1, d2),\n                getW(wR, wC, "+s+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.Conv2DProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.Conv2DDerFilterProgram=r;var o=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.Conv2DDerInputProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(69),o=function(){return function(t,e){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=r.computeOutShape(t,e,1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+t[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+t[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "}}();e.ConcatProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){this.variableNames=["A"],this.outputShape=t;var r=e.toFixed(20),o=n.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+r+", "+o+"));\n      }\n    "}}();e.ClipProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(46),o=function(){return function(t,e,n,o,a,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],r.assertAndGetBroadcastShape(t,e),r.assertAndGetBroadcastShape(t,n);var s="0.0";null!=o&&(r.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=a&&(r.assertAndGetBroadcastShape(t,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+u+";\n        float inv = scale / sqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}}();e.BatchNormProgram=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n      const float avgMultiplier = float("+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.AvgPool2DBackpropProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (isNaN(candidate)) {\n            setOutput(candidate);\n            return;\n          }\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}}();e.ArgMinMaxProgram=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PARALLELIZE_THRESHOLD=30,e.computeOptimalWindowSize=function(t){return t<=e.PARALLELIZE_THRESHOLD?t:function(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}(t,Math.floor(Math.sqrt(t)))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(138),a=n(137),i=n(7),s=n(1);function u(t,n,r){if(void 0===r&&(r=e.TEST_EPSILON),t instanceof i.Tensor||n instanceof i.Tensor){if(t instanceof i.Tensor&&n instanceof i.Tensor){if(t.dtype!==n.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+n.dtype+".");if(!s.arraysEqual(t.shape,n.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+n.shape+".")}}else{var o=t.constructor.name,a=n.constructor.name;if(o!==a)throw new Error("Arrays are of different type actual: "+o+" vs expected: "+a)}var u,l;if(u=t instanceof i.Tensor?t.dataSync():t,l=n instanceof i.Tensor?n.dataSync():n,u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var p=0;p<l.length;++p){var h=u[p],f=l[p];if(!c(h,Number(f),r))throw new Error("Arrays differ: actual["+p+"] = "+h+", expected["+p+"] = "+f+".\nActual:   "+u+".\nExpected: "+l+".")}}function c(t,e,n){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}e.WEBGL_ENVS=[{BACKEND:"webgl",WEBGL_FLOAT_TEXTURE_ENABLED:!0,WEBGL_VERSION:1},{BACKEND:"webgl",WEBGL_FLOAT_TEXTURE_ENABLED:!0,WEBGL_VERSION:2}],e.CPU_ENVS=[{BACKEND:"cpu"}],e.ALL_ENVS=e.WEBGL_ENVS.concat(e.CPU_ENVS),e.TEST_EPSILON=.001,e.expectArraysClose=u,e.expectArraysEqual=function(t,e){return u(t,e,0)},e.expectNumbersClose=function(t,n,r){if(void 0===r&&(r=e.TEST_EPSILON),!c(t,n,r))throw new Error("Numbers differ: actual === "+t+", expected === "+n)},e.expectValuesInRange=function(t,e,n){var r;r=t instanceof i.Tensor?t.dataSync():t;for(var o=0;o<r.length;o++)if(r[o]<e||r[o]>n)throw new Error("Value out of range:"+r[o]+" low: "+e+", high: "+n)},e.describeWithFlags=function(t,e,n){e.forEach(function(e){!function(t,e,n){describe(t,function(){beforeEach(function(){r.ENV.setFeatures(n||{}),r.ENV.addCustomBackend("webgl",function(){return new a.MathBackendWebGL}),r.ENV.addCustomBackend("cpu",function(){return new o.MathBackendCPU}),n&&null!=n.BACKEND&&r.Environment.setBackend(n.BACKEND),r.ENV.engine.startScope()}),afterEach(function(){r.ENV.engine.endScope(null),r.ENV.reset()}),e()})}(t+" "+JSON.stringify(e),n,e)})},e.assertIsNan=function(t,e){if(!s.isValNaN(t,e))throw new Error("Value "+t+" does not represent NaN for dtype "+e)}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(142),u=n(59),c=n(143),l=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.impl=new p(e,n),r}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.impl.next()]})})},e}(s.ByteStream);e.URLStream=l;var p=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.url=e,r.options=n,r.blobPromise=fetch(e,n).then(function(t){if(t.ok)return t.blob();throw new Error(t.statusText)}),r}return o(e,t),e.prototype.pump=function(){return a(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return null!=this.fileReaderStream?[3,2]:[4,this.blobPromise];case 1:t=n.sent(),this.fileReaderStream=new c.FileReaderStream(t,this.options),n.label=2;case 2:return[4,this.fileReaderStream.next()];case 3:return(e=n.sent()).done?[2,!1]:(this.outputQueue.push(e.value),[2,!0])}})})},e}(u.QueueStream)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(144),i=n(271),s=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.url=e,r.options=n,r}return o(e,t),e.prototype.getStream=function(){return new i.URLStream(this.url,this.options)},e}(a.DataSource);e.URLDataSource=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(59),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.split=function(t){return new c(this,t)},e}(s.DataStream);e.StringStream=u;var c=function(t){function e(e,n){var r=t.call(this)||this;return r.impl=new l(e,n),r}return o(e,t),e.prototype.next=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.impl.next()]})})},e}(u),l=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.separator=n,r.carryover="",r}return o(e,t),e.prototype.pump=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o;return i(this,function(a){switch(a.label){case 0:return[4,this.upstream.next()];case 1:if((t=a.sent()).done)return""===this.carryover?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((e=t.value.split(this.separator))[0]=this.carryover+e[0],n=0,r=e.slice(0,-1);n<r.length;n++)o=r[n],this.outputQueue.push(o);return this.carryover=e[e.length-1],[2,!0]}})})},e}(s.QueueStream)},function(t,e,n){(function(t,r){var o;!function(a){var i="object"==typeof e&&e,s=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);s.global!==s&&s.window;var u,c,l,p=String.fromCharCode;function h(t){for(var e,n,r=[],o=0,a=t.length;o<a;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<a?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function f(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function d(t,e){return p(t>>e&63|128)}function v(t){if(0==(4294967168&t))return p(t);var e="";return 0==(4294965248&t)?e=p(t>>6&31|192):0==(4294901760&t)?(f(t),e=p(t>>12&15|224),e+=d(t,6)):0==(4292870144&t)&&(e=p(t>>18&7|240),e+=d(t,12),e+=d(t,6)),e+=p(63&t|128)}function m(){if(l>=c)throw Error("Invalid byte index");var t=255&u[l];if(l++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function g(){var t,e;if(l>c)throw Error("Invalid byte index");if(l==c)return!1;if(t=255&u[l],l++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|m())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|m()<<6|m())>=2048)return f(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|m()<<12|m()<<6|m())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var y={version:"2.1.2",encode:function(t){for(var e=h(t),n=e.length,r=-1,o="";++r<n;)o+=v(e[r]);return o},decode:function(t){u=h(t),c=u.length,l=0;for(var e,n=[];!1!==(e=g());)n.push(e);return function(t){for(var e,n=t.length,r=-1,o="";++r<n;)(e=t[r])>65535&&(o+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=p(e);return o}(n)}};void 0===(o=function(){return y}.call(e,n,e,t))||(t.exports=o)}()}).call(this,n(47)(t),n(73))},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n(144),i=n(143),s=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.input=e,r.options=n,r}return o(e,t),e.prototype.getStream=function(){return new i.FileReaderStream(this.input,this.options)},e}(a.DataSource);e.FileDataSource=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s,u=n(79),c=n(145);!function(t){t[t.READ_FIRST_LINE=0]="READ_FIRST_LINE",t[t.NUMBERED=1]="NUMBERED"}(s=e.CsvHeaderConfig||(e.CsvHeaderConfig={}));var l=function(t){function e(n){var r=t.call(this)||this;return r.input=n,r.hasHeaderLine=!1,r.base=new c.TextLineDataset(n,e.textColumnName),r}return o(e,t),Object.defineProperty(e.prototype,"csvColumnNames",{get:function(){return this._csvColumnNames},enumerable:!0,configurable:!0}),e.prototype.setCsvColumnNames=function(t){return a(this,void 0,void 0,function(){var n,r;return i(this,function(o){switch(o.label){case 0:return null!=t&&t!==s.NUMBERED?[3,2]:[4,this.base.getStream().next()];case 1:if((n=o.sent()).done)throw new Error("No data was found for CSV parsing.");return r=n.value[e.textColumnName],this._csvColumnNames=Array.from(r.split(",").keys()).map(function(t){return t.toString()}),[3,5];case 2:return t!==s.READ_FIRST_LINE?[3,4]:[4,this.base.getStream().next()];case 3:if((n=o.sent()).done)throw new Error("No data was found for CSV parsing.");return r=n.value[e.textColumnName],this._csvColumnNames=r.split(","),this.hasHeaderLine=!0,[3,5];case 4:this._csvColumnNames=t,o.label=5;case 5:return[2]}})})},e.create=function(t,n){return void 0===n&&(n=s.NUMBERED),a(this,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:return[4,(r=new e(t)).setCsvColumnNames(n)];case 1:return o.sent(),[2,r]}})})},e.prototype.getStream=function(){var t=this,e=this.base.getStream();return this.hasHeaderLine&&(e=e.skip(1)),e.map(function(e){return t.makeDatasetElement(e)})},e.prototype.makeDatasetElement=function(t){for(var n=t[e.textColumnName].split(","),r={},o=0;o<this._csvColumnNames.length;o++){var a=n[o];if(""===a)r[this._csvColumnNames[o]]=void 0;else{var i=Number(a);isNaN(i)?r[this._csvColumnNames[o]]=a:r[this._csvColumnNames[o]]=i}}return r},e.textColumnName="line",e}(u.Dataset);e.CSVDataset=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return t.call(this,e.INITIAL_CAPACITY)||this}return o(e,t),e.prototype.isFull=function(){return!1},e.prototype.push=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.push.call(this,e)},e.prototype.unshift=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.unshift.call(this,e)},e.prototype.expand=function(){for(var t=2*this.capacity,e=new Array(t),n=this.length(),r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},e.INITIAL_CAPACITY=32,e}(n(146).RingBuffer);e.GrowingRingBuffer=a},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7);e.scaleTo01=function(t,e){var n=e-t,r=a.Scalar.new(t),o=a.Scalar.new(n);return function(e){if("string"==typeof e)throw new Error("Can't scale a string.");return e instanceof a.Tensor?e.sub(r).div(o):e instanceof Array?e.map(function(e){return(e-t)/n}):(e-t)/n}},e.computeDatasetStatistics=function(t,e,n){return r(this,void 0,void 0,function(){var r,i;return o(this,function(o){switch(o.label){case 0:return r=t,null!=n&&(r=r.shuffle(n)),null!=e&&(r=r.take(e)),i={},[4,r.forEach(function(t){for(var e in t){var n=t[e];if("string"==typeof n);else{var r=void 0,o=void 0;if(n instanceof a.Tensor)r=n.min().dataSync()[0],o=n.max().dataSync()[0];else if(n instanceof Array)r=n.reduce(function(t,e){return Math.min(t,e)}),o=n.reduce(function(t,e){return Math.max(t,e)});else{if(isNaN(n)||!isFinite(n))throw new Error("Cannot compute statistics: "+e+" = "+n);r=n,o=n}var s=i[e];null==s&&(s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},i[e]=s),s.min=Math.min(s.min,r),s.max=Math.max(s.max,o)}}})];case 1:return o.sent(),[2,i]}})})}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(7),s=n(1),u=function(){function t(t,e,n){void 0===n&&(n=!0),this.base=t,this.batchSize=e,this.smallLastBatch=n}return t.prototype.getStream=function(){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.base.getStream().batch(this.batchSize,this.smallLastBatch).map(c)]})})},t}();function c(t){var e={},n=t[0],r=Object.keys(n);r.forEach(function(t){e[t]=[]});for(var o=function(t){r.forEach(function(n){var r=t[n];e[n].push(r)})},u=0,c=t;u<c.length;u++){o(c[u])}var p={};return r.forEach(function(n){if(e[n].length!==t.length)throw new Error("Batching failed to get a '"+n+"' value for each element.");"string"==typeof e[n][0]?p[n]=e[n]:p[n]=function(t){for(var e=l(t[0])[0],n=[t.length].concat(e),r=new Float32Array(n.reduce(function(t,e){return t*e})),o=0,a=0,u=t;a<u.length;a++){var c=u[a],p=l(c),h=p[0],f=p[1];if(!s.arraysEqual(h,e))throw new Error("Elements must have the same shape to be batched");r.set(f,o),o+=f.length}return i.Tensor.make(n,{values:r})}(e[n])}),t.forEach(a.dispose),p}function l(t){return t instanceof i.Tensor?[t.shape,t.dataSync()]:Array.isArray(t)?[[t.length],t]:[[],[t]]}e.BatchDataset=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.getFilteredNodesXToY=function(t,e,n){for(var r={},o={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var i=(v=t[a]).inputs;for(var s in i){for(var u=i[s],c=!1,l=0;l<e.length;l++)if(r[u.id]){r[v.output.id]=!0,c=!0,o[v.id]=!0;break}if(c)break}}var p={};p[n.id]=!0;var h={};for(a=t.length-1;a>=0;a--){i=(v=t[a]).inputs;var f=[];for(f.push(v.output),l=0;l<f.length;l++)if(p[f[l].id]){for(var s in i)p[i[s].id]=!0,h[v.id]=!0;break}}var d=[];for(a=0;a<t.length;a++){var v;if(o[(v=t[a]).id]&&h[v.id]){var m={};for(var s in v.inputs){var g=v.inputs[s];r[g.id]&&(m[s]=g)}var y=Object.assign({},v);y.inputs=m,y.output=v.output,d.push(y)}}return d},e.backpropagateGradients=function(t,e){for(var n=e.length-1;n>=0;n--){var o=e[n],a=t[o.output.id];if(null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.name+".");var i=o.gradient(a);for(var s in o.inputs){if(!(s in i))throw new Error("Cannot backprop through input "+s+". Available gradients found: "+Object.keys(i)+".");var u=i[s](),c=o.inputs[s];if(!r.arraysEqual(u.shape,c.shape))throw new Error("Error in gradient for op "+o.name+". The gradient of input '"+s+"' has shape '"+u.shape+"', which does not match the shape of the input '"+c.shape+"'");if(null==t[c.id])t[c.id]=u;else{var l=t[c.id];t[c.id]=l.add(u),l.dispose()}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new a)}return t.prototype.profileKernel=function(t,e){var n,o=this,a=this.backendTimer.time(function(){n=e()}),i=n.dataSync();return r.checkForNaN(i,n.dtype,t),a.then(function(e){o.logger.logKernelProfile(t,n,i,e.kernelMs)}),n},t}();e.Profiler=o;var a=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,o){var a=r.rightPad(o+"ms",9),i=r.rightPad(t,25),s=e.rank,u=e.size,c=r.rightPad(e.shape.toString(),14);console.log("%c"+i+"\t%c"+a+"\t%c"+s+"D "+c+"\t%c"+u,"font-weight:bold","color:red","color:blue","color: orange")},t}();e.Logger=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.assertParamsValid=function(t,e,n){r.assert(t.rank===e.length,"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."),r.assert(t.rank===n.length,"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+").");for(var o=0;o<t.rank;++o)r.assert(e[o]+n[o]<=t.shape[o],"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+n[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(78),o=function(){function t(t,e,n,o,a){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=r.alea(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}();e.MPRandGauss=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(3),s=n(11),u=n(281),c=n(280),l=n(7),p=n(1),h=function(){function t(t,e,n){this.backend=t,this.customBackend=e,this.safeMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.activeScope={keep:[],track:[]},this.scopeStack=[this.activeScope],this.profiler=new u.Profiler(t)}return t.prototype.runKernel=function(t,e,n){var r,o=this,i=[],s=function(t){return i.push(t),t},u=this.activeScope.name;if(r=a.ENV.get("DEBUG")?this.profiler.profileKernel(u,function(){return t(o.backend,s)}):t(this.backend,s),null!=this.activeTape&&0===this.customGradientDepth){var c={id:this.nextTapeNodeId++,name:u,inputs:e,output:r};null!=n&&(c.gradient=function(t){return n(t,i)}),this.activeTape.push(c)}return r},t.prototype.registerTensor=function(t){var e=this.refCounter.has(t.dataId)?this.refCounter.get(t.dataId):0;this.numTensors++,0===e&&(this.numDataBuffers++,this.numBytes+=p.sizeFromShape(t.shape)*p.bytesPerElement(t.dtype),this.backend.register(t.dataId,t.shape,t.dtype)),this.refCounter.set(t.dataId,e+1),t instanceof l.Variable||this.track(t)},t.prototype.registerVariable=function(t){if(null!=this.registeredVariables[t.name])throw new Error("Variable with name "+t.name+" was already registered");this.registeredVariables[t.name]=t},t.prototype.disposeTensor=function(t){if(this.refCounter.has(t.dataId)){this.numTensors--;var e=this.refCounter.get(t.dataId);e<=1?(this.refCounter.delete(t.dataId),this.backend.disposeData(t.dataId),this.numDataBuffers--,this.numBytes-=p.sizeFromShape(t.shape)*p.bytesPerElement(t.dtype)):this.refCounter.set(t.dataId,e-1)}},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.numTensors,t.numDataBuffers=this.numDataBuffers,t.numBytes=this.numBytes,t},t.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},t.prototype.addTapeNode=function(t,e,n){var r={};t.forEach(function(t,e){r[e]=t});var o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,output:e,gradient:function(t){var e={};return n(t).forEach(function(t,n){e[n]=function(){return t}}),e}};this.activeTape.push(o)},t.prototype.keep=function(t){if(1===this.scopeStack.length&&a.ENV.engine.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside dl.tidy(): dl.tidy(() => {...}) to avoid memory leaks.");return this.activeScope.keep.push(t),t},t.prototype.startScope=function(t,e){void 0===e&&(e=!1),e&&0===this.gradientScopeCount&&(this.activeTape=[]),e&&this.gradientScopeCount++;var n={keep:[],track:[]};t&&(n.name=t),this.scopeStack.push(n),this.activeScope=n},t.prototype.endScope=function(t,e){var n=this;void 0===e&&(e=!1),e&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=this.activeScope.keep,o=p.extractTensorsFromContainer(t);r=r.concat(o);for(var a=0;a<this.activeScope.track.length;a++){var i=this.activeScope.track[a];p.isTensorInList(i,r)||(null!=this.activeTape?o.push(i):i.dispose())}this.scopeStack.pop(),this.activeScope=0===this.scopeStack.length?{keep:[],track:[]}:this.scopeStack[this.scopeStack.length-1],o.forEach(function(t){p.isTensorInList(t,n.activeScope.keep)||n.track(t)})},t.prototype.dispose=function(){this.customBackend&&this.backend.dispose()},t.prototype.gradients=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),p.assert(e.length>0,"gradients() received an empty list of xs."),i.tidy("gradients",function(){var a=t();p.assert(a instanceof l.Tensor,"The result y returned by f() must be a tensor.");var i=c.getFilteredNodesXToY(o.activeTape,e,a);if(!r&&0===i.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var u={};return u[a.id]=null==n?s.ones(a.shape):n,c.backpropagateGradients(u,i),{value:a,grads:e.map(function(t){return u[t.id]})}},!0)},t.prototype.customGrad=function(t){var e=this;return p.assert(p.isFunction(t),"The f passed in customGrad(f) must be a function."),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];p.assert(r.every(function(t){return t instanceof l.Tensor}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),e.customGradientDepth++;var a=i.tidy(t.name,function(){var e=t.apply(void 0,r),o=e.value,a=e.gradFunc;return p.assert(o instanceof l.Tensor,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),p.assert(p.isFunction(a),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=a,o},!0);if(e.customGradientDepth--,e.shouldRecord()){e.addTapeNode(r,a,function(t){var e=n(t),o=Array.isArray(e)?e:[e];return p.assert(o.length===r.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),p.assert(o.every(function(t){return t instanceof l.Tensor}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),o})}return a}},t.prototype.write=function(t,e){this.backend.write(t,e)},t.prototype.readSync=function(t){return this.backend.readSync(t)},t.prototype.read=function(t){return this.backend.read(t)},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.time=function(t){return r(this,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return e=performance.now(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=performance.now()-e,[2,n]}})})},t.prototype.track=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside dl.tidy(): dl.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(t),t},t}();e.Engine=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isMobile=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=n(2),i=n(3),s=n(7),u=n(1),c=function(){function t(){}return t.gradScope=function(t,e){return i.tidy(t,e,!0)},t.grad=function(t){return u.assert(u.isFunction(t),"The f passed in grad(f) must be a function"),function(e,n){u.assert(e instanceof s.Tensor,"The x passed in grad(f)(x) must be a tensor"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in grad(f)(x, dy) must be a tensor");var r=a.ENV.engine.gradients(function(){return t(e)},[e],n),o=r.value,i=r.grads;return null!=n&&u.assertShapesMatch(o.shape,n.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),o.dispose(),l(i),i[0]}},t.grads=function(t){return u.assert(u.isFunction(t),"The f passed in grads(f) must be a function"),function(e,n){u.assert(Array.isArray(e)&&e.every(function(t){return t instanceof s.Tensor}),"The args passed in grads(f)(args) must be an array of tensors"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in grads(f)(args, dy) must be a tensor");var r=a.ENV.engine.gradients(function(){return t.apply(void 0,e)},e,n),o=r.value,i=r.grads;return null!=n&&u.assertShapesMatch(o.shape,n.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),o.dispose(),l(i),i}},t.valueAndGrad=function(t){return u.assert(u.isFunction(t),"The f passed in valueAndGrad(f) must be a function"),function(e,n){u.assert(e instanceof s.Tensor,"The x passed in valueAndGrad(f)(x) must be a tensor"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");var r=a.ENV.engine.gradients(function(){return t(e)},[e],n),o=r.grads,i=r.value;return l(o),{grad:o[0],value:i}}},t.valueAndGrads=function(t){return u.assert(u.isFunction(t),"The f passed in valueAndGrads(f) must be a function"),function(e,n){u.assert(Array.isArray(e)&&e.every(function(t){return t instanceof s.Tensor}),"The args passed in valueAndGrads(f)(args) must be array of tensors"),u.assert(null==n||n instanceof s.Tensor,"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");var r=a.ENV.engine.gradients(function(){return t.apply(void 0,e)},e,n);return null!=n&&u.assertShapesMatch(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),l(r.grads),r}},t.variableGrads=function(t,e){if(u.assert(u.isFunction(t),"The f passed in variableGrads(f) must be a function"),u.assert(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof s.Variable}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==e)for(var n in e=[],a.ENV.engine.registeredVariables)e.push(a.ENV.engine.registeredVariables[n]);var r=e.length;e=e.filter(function(t){return t.trainable}),u.assert(e.length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var o=a.ENV.engine.gradients(t,e,null,!0),i=o.value,c=o.grads;u.assert(c.some(function(t){return null!=t}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),u.assert(0===i.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+i.rank+" tensor");var l={};return e.forEach(function(t,e){null!=c[e]&&(l[t.name]=c[e])}),{value:i,grads:l}},t.customGrad=function(t){return a.ENV.engine.customGrad(t)},r([o.doc({heading:"Training",subheading:"Gradients"})],t,"grad",null),r([o.doc({heading:"Training",subheading:"Gradients"})],t,"grads",null),r([o.doc({heading:"Training",subheading:"Gradients"})],t,"valueAndGrad",null),r([o.doc({heading:"Training",subheading:"Gradients"})],t,"valueAndGrads",null),r([o.doc({heading:"Training",subheading:"Gradients"})],t,"variableGrads",null),r([o.doc({heading:"Training",subheading:"Gradients"})],t,"customGrad",null),t}();function l(t){if(t.filter(function(t){return null==t}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}e.Gradients=c},function(t,e){},function(t,e,n){var r;!function(o,a){var i,s=this,u=256,c=6,l="random",p=a.pow(u,c),h=a.pow(2,52),f=2*h,d=u-1;function v(t,e,n){var r=[],v=g(function t(e,n){var r,o=[],a=typeof e;if(n&&"object"==a)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==a?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(o)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(u):(t=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=s.navigator,n=e&&e.plugins;return[+new Date,s,n,s.screen,y(o)]}}():t,3),r),b=new function(t){var e,n=t.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];n||(t=[n++]);for(;o<u;)i[o]=o++;for(o=0;o<u;o++)i[o]=i[a=d&a+t[o%n]+(e=i[o])],i[a]=e;(r.g=function(t){for(var e,n=0,o=r.i,a=r.j,i=r.S;t--;)e=i[o=d&o+1],n=n*u+i[d&(i[o]=i[a=d&a+e])+(i[a]=e)];return r.i=o,r.j=a,n})(u)}(r),w=function(){for(var t=b.g(c),e=p,n=0;t<h;)t=(t+n)*u,e*=u,n=b.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,g(y(b.S),o),(e.pass||n||function(t,e,n,r){return r&&(r.S&&m(r,b),t.state=function(){return m(b,{})}),n?(a[l]=t,e):t})(w,v,"global"in e?e.global:this==a,e.state)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){for(var n,r=t+"",o=0;o<r.length;)e[d&o]=d&(n^=19*e[d&o])+r.charCodeAt(o++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(a["seed"+l]=v,g(a.random(),o),"object"==typeof t&&t.exports){t.exports=v;try{i=n(287)}catch(t){}}else void 0===(r=function(){return v}.call(e,n,e,t))||(t.exports=r)}([],Math)},function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n(24)&&n(61)?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.tychei=s}(0,"object"==typeof t&&t,n(24))}).call(this,n(47)(t))},function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,a=e.i;return e.w=r=r+1640531527|0,n=o[a+34&127],t=o[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,o,a,i,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;t.w=i,t.X=s,t.i=o}(e,t)}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.X&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n(24)&&n(61)?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xor4096=s}(0,"object"==typeof t&&t,n(24))}).call(this,n(47)(t))},function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.x&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n(24)&&n(61)?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xorshift7=s}(0,"object"==typeof t&&t,n(24))}).call(this,n(47)(t))},function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n(24)&&n(61)?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xorwow=s}(0,"object"==typeof t&&t,n(24))}).call(this,n(47)(t))},function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n(24)&&n(61)?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xor128=s}(0,"object"==typeof t&&t,n(24))}).call(this,n(47)(t))},function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var n=new function(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),r=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n(24)&&n(61)?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.alea=s}(0,"object"==typeof t&&t,n(24))}).call(this,n(47)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79);e.Dataset=r.Dataset;var o=n(79);e.datasetFromElements=o.datasetFromElements;var a=n(276);e.CSVDataset=a.CSVDataset;var i=n(145);e.TextLineDataset=i.TextLineDataset;var s=n(275);e.FileDataSource=s.FileDataSource;var u=n(272);e.URLDataSource=u.URLDataSource},function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=function(){function t(){}return t.nextFrame=function(){return new Promise(function(t){return requestAnimationFrame(function(){return t()})})},r([o.doc({heading:"Performance",subheading:"Timing"})],t,"nextFrame",null),t}();e.BrowserUtil=a},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=h(n(42)),a=p(n(214)),i=p(n(209)),s=p(n(204)),u=p(n(202)),c=p(n(201)),l=h(n(74));function p(t){return t&&t.__esModule?t:{default:t}}function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}t.exports=r({ImageClassifier:a.default,KNNImageClassifier:i.default,LSTMGenerator:s.default,StyleTransfer:c.default,Word2Vec:u.default},l,{dl:o})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){var r=n(0),o=n(298)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return o(t)}})},function(t,e,n){n(299),t.exports=n(36).RegExp.escape},function(t,e,n){(function(e){!function(e){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=w;var p="suspendedStart",h="suspendedYield",f="executing",d="completed",v={},m={};m[i]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(M([])));y&&y!==r&&o.call(y,i)&&(m=y);var b=S.prototype=k.prototype=Object.create(m);E.prototype=b.constructor=S,S.constructor=E,S[u]=E.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},T(O.prototype),O.prototype[s]=function(){return this},l.AsyncIterator=O,l.async=function(t,e,n,r){var o=new O(w(t,e,n,r));return l.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},T(b),b[u]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=M,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return s.type="throw",s.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function w(t,e,n,r){var o=e&&e.prototype instanceof k?e:k,a=Object.create(o.prototype),i=new N(r||[]);return a._invoke=function(t,e,n){var r=p;return function(o,a){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw a;return P()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=_(i,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=x(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,i),a}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function k(){}function E(){}function S(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(t){function n(e,r,a,i){var s=x(t[e],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,a,i)},function(t){n("throw",t,a,i)}):Promise.resolve(c).then(function(t){u.value=t,a(u)},i)}i(s.arg)}var r;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function o(){return new Promise(function(r,o){n(t,e,r,o)})}return r=r?r.then(o,o):o()}}function _(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,_(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=x(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:n,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(73))},function(t,e,n){for(var r=n(108),o=n(55),a=n(21),i=n(5),s=n(22),u=n(63),c=n(10),l=c("iterator"),p=c("toStringTag"),h=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=o(f),v=0;v<d.length;v++){var m,g=d[v],y=f[g],b=i[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,h),w[p]||s(w,p,g),u[g]=h,y))for(m in r)w[m]||a(w,m,r[m],!0)}},function(t,e,n){var r=n(0),o=n(107);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){var r=n(5),o=n(0),a=n(103),i=[].slice,s=/MSIE .\./.test(a),u=function(t){return function(e,n){var r=arguments.length>2,o=!!r&&i.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};o(o.G+o.B+o.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){"use strict";var r=n(0),o=n(5),a=n(36),i=n(106)(),s=n(10)("observable"),u=n(18),c=n(4),l=n(50),p=n(48),h=n(22),f=n(49),d=f.RETURN,v=function(t){return null==t?void 0:u(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},y=function(t){g(t)||(t._o=void 0,m(t))},b=function(t,e){c(t),this._c=void 0,this._o=t,t=new w(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}g(this)&&m(this)};b.prototype=p({},{unsubscribe:function(){y(this)}});var w=function(t){this._s=t};w.prototype=p({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{m(e)}finally{throw t}}return m(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{m(e)}finally{throw t}}return m(e),t}}});var x=function(t){l(this,x,"Observable","_f")._f=u(t)};p(x.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(a.Promise||o.Promise)(function(n,r){u(t);var o=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),o.unsubscribe()}},error:r,complete:n})})}}),p(x,{from:function(t){var e="function"==typeof this?this:x,n=v(c(t)[s]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return i(function(){if(!n){try{if(f(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return i(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),h(x.prototype,s,function(){return this}),r(r.G,{Observable:x}),n(51)("Observable")},function(t,e,n){var r=n(0),o=n(106)(),a=n(5).process,i="process"==n(29)(a);r(r.G,{asap:function(t){var e=i&&a.domain;o(e?e.bind(t):t)}})},function(t,e,n){var r=n(39),o=n(4),a=n(18),i=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?o:a)(n),i(r))}}})},function(t,e,n){var r=n(39),o=n(4),a=r.has,i=r.key;r.exp({hasOwnMetadata:function(t,e){return a(t,o(e),arguments.length<3?void 0:i(arguments[2]))}})},function(t,e,n){var r=n(39),o=n(4),a=n(25),i=r.has,s=r.key,u=function(t,e,n){if(i(t,e,n))return!0;var r=a(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,o(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(39),o=n(4),a=r.keys,i=r.key;r.exp({getOwnMetadataKeys:function(t){return a(o(t),arguments.length<2?void 0:i(arguments[1]))}})},function(t,e,n){var r=n(39),o=n(4),a=r.get,i=r.key;r.exp({getOwnMetadata:function(t,e){return a(t,o(e),arguments.length<3?void 0:i(arguments[2]))}})},function(t,e,n){var r=n(177),o=n(168),a=n(39),i=n(4),s=n(25),u=a.keys,c=a.key,l=function(t,e){var n=u(t,e),a=s(t);if(null===a)return n;var i=l(a,e);return i.length?n.length?o(new r(n.concat(i))):i:n};a.exp({getMetadataKeys:function(t){return l(i(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(39),o=n(4),a=n(25),i=r.has,s=r.get,u=r.key,c=function(t,e,n){if(i(t,e,n))return s(t,e,n);var r=a(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,o(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(39),o=n(4),a=r.key,i=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:a(arguments[2]),r=i(o(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},function(t,e,n){var r=n(39),o=n(4),a=r.key,i=r.set;r.exp({defineMetadata:function(t,e,n,r){i(t,e,o(n),a(r))}})},function(t,e,n){"use strict";var r=n(0),o=n(105),a=n(181);r(r.S,"Promise",{try:function(t){var e=o.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";var r=n(0),o=n(36),a=n(5),i=n(85),s=n(180);r(r.P+r.R,"Promise",{finally:function(t){var e=i(this,o.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,o=65535&n,a=65535&r,i=n>>>16,s=r>>>16,u=(i*a>>>0)+(o*a>>>16);return i*s+(u>>>16)+((o*s>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{scale:n(167)})},function(t,e,n){var r=n(0),o=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*o}})},function(t,e,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(0);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,o=65535&n,a=65535&r,i=n>>16,s=r>>16,u=(i*a>>>0)+(o*a>>>16);return i*s+(u>>16)+((o*s>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{isubh:function(t,e,n,r){var o=t>>>0,a=n>>>0;return(e>>>0)-(r>>>0)-((~o&a|~(o^a)&o-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(0);r(r.S,"Math",{iaddh:function(t,e,n,r){var o=t>>>0,a=n>>>0;return(e>>>0)+(r>>>0)+((o&a|(o|a)&~(o+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(0),o=n(167),a=n(187);r(r.S,"Math",{fscale:function(t,e,n,r,i){return a(o(t,e,n,r,i))}})},function(t,e,n){var r=n(0),o=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*o}})},function(t,e,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(0);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(0),o=n(29);r(r.S,"Error",{isError:function(t){return"Error"===o(t)}})},function(t,e,n){var r=n(0);r(r.S,"System",{global:n(5)})},function(t,e,n){var r=n(0);r(r.G,{global:n(5)})},function(t,e,n){n(80)("WeakSet")},function(t,e,n){n(80)("WeakMap")},function(t,e,n){n(80)("Set")},function(t,e,n){n(80)("Map")},function(t,e,n){n(81)("WeakSet")},function(t,e,n){n(81)("WeakMap")},function(t,e,n){n(81)("Set")},function(t,e,n){n(81)("Map")},function(t,e,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(169)("Set")})},function(t,e,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(169)("Map")})},function(t,e,n){"use strict";var r=n(0),o=n(17),a=n(35),i=n(25),s=n(26).f;n(14)&&r(r.P+n(82),"Object",{__lookupSetter__:function(t){var e,n=o(this),r=a(t,!0);do{if(e=s(n,r))return e.set}while(n=i(n))}})},function(t,e,n){"use strict";var r=n(0),o=n(17),a=n(35),i=n(25),s=n(26).f;n(14)&&r(r.P+n(82),"Object",{__lookupGetter__:function(t){var e,n=o(this),r=a(t,!0);do{if(e=s(n,r))return e.get}while(n=i(n))}})},function(t,e,n){"use strict";var r=n(0),o=n(17),a=n(18),i=n(13);n(14)&&r(r.P+n(82),"Object",{__defineSetter__:function(t,e){i.f(o(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(0),o=n(17),a=n(18),i=n(13);n(14)&&r(r.P+n(82),"Object",{__defineGetter__:function(t,e){i.f(o(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},function(t,e,n){var r=n(0),o=n(170)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var r=n(0),o=n(170)(!1);r(r.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){var r=n(0),o=n(173),a=n(27),i=n(26),s=n(112);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),u=i.f,c=o(r),l={},p=0;c.length>p;)void 0!==(n=u(r,e=c[p++]))&&s(l,e,n);return l}})},function(t,e,n){n(128)("observable")},function(t,e,n){n(128)("asyncIterator")},function(t,e,n){"use strict";var r=n(0),o=n(34),a=n(12),i=n(89),s=n(87),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(116)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(o(this),!i(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=a(t.lastIndex),new c(r,e)}})},function(t,e,n){"use strict";n(64)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";n(64)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";var r=n(0),o=n(171),a=n(103);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var r=n(0),o=n(171),a=n(103);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(0),o=n(118)(!0);r(r.P,"String",{at:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(0),o=n(172),a=n(17),i=n(12),s=n(33),u=n(110);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=a(this),n=i(e.length),r=u(e,0);return o(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(43)("flatten")},function(t,e,n){"use strict";var r=n(0),o=n(172),a=n(17),i=n(12),s=n(18),u=n(110);r(r.P,"Array",{flatMap:function(t){var e,n,r=a(this);return s(t),e=i(r.length),n=u(r,0),o(n,r,r,e,0,1,t,arguments[1]),n}}),n(43)("flatMap")},function(t,e,n){"use strict";var r=n(0),o=n(92)(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(43)("includes")},function(t,e,n){var r=n(0),o=n(124);o&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){var r=n(13),o=n(26),a=n(25),i=n(23),s=n(0),u=n(58),c=n(4),l=n(8);s(s.S,"Reflect",{set:function t(e,n,s){var p,h,f=arguments.length<4?e:arguments[3],d=o.f(c(e),n);if(!d){if(l(h=a(e)))return t(h,n,s,f);d=u(0)}return i(d,"value")?!(!1===d.writable||!l(f)||((p=o.f(f,n)||u(0)).value=s,r.f(f,n,p),0)):void 0!==d.set&&(d.set.call(f,s),!0)}})},function(t,e,n){var r=n(0),o=n(4),a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){o(t);try{return a&&a(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(173)})},function(t,e,n){var r=n(0),o=n(4),a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return o(t),!a||a(t)}})},function(t,e,n){var r=n(0);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),o=n(25),a=n(4);r(r.S,"Reflect",{getPrototypeOf:function(t){return o(a(t))}})},function(t,e,n){var r=n(26),o=n(0),a=n(4);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(a(t),e)}})},function(t,e,n){var r=n(26),o=n(25),a=n(23),i=n(0),s=n(8),u=n(4);i(i.S,"Reflect",{get:function t(e,n){var i,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[n]:(i=r.f(e,n))?a(i,"value")?i.value:void 0!==i.get?i.get.call(l):void 0:s(c=o(e))?t(c,n,l):void 0}})},function(t,e,n){"use strict";var r=n(0),o=n(4),a=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(116)(a,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new a(t)}})},function(t,e,n){var r=n(0),o=n(26).f,a=n(4);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=o(a(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){var r=n(13),o=n(0),a=n(4),i=n(35);o(o.S+o.F*n(6)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){a(t),e=i(e,!0),a(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),o=n(53),a=n(18),i=n(4),s=n(8),u=n(6),c=n(194),l=(n(5).Reflect||{}).construct,p=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),h=!u(function(){l(function(){})});r(r.S+r.F*(p||h),"Reflect",{construct:function(t,e){a(t),i(e);var n=arguments.length<3?t:a(arguments[2]);if(h&&!p)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,f=o(s(u)?u:Object.prototype),d=Function.apply.call(t,f,e);return s(d)?d:f}})},function(t,e,n){var r=n(0),o=n(18),a=n(4),i=(n(5).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(6)(function(){i(function(){})}),"Reflect",{apply:function(t,e,n){var r=o(t),u=a(n);return i?i(r,e,u):s.call(r,e,u)}})},function(t,e,n){n(40)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(40)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(40)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(0);r(r.G+r.W+r.F*!n(83).ABV,{DataView:n(104).DataView})},function(t,e,n){"use strict";var r=n(0),o=n(83),a=n(104),i=n(4),s=n(54),u=n(12),c=n(8),l=n(5).ArrayBuffer,p=n(85),h=a.ArrayBuffer,f=a.DataView,d=o.ABV&&l.isView,v=h.prototype.slice,m=o.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||c(t)&&m in t}}),r(r.P+r.U+r.F*n(6)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(i(this),t);for(var n=i(this).byteLength,r=s(t,n),o=s(void 0===e?n:e,n),a=new(p(this,h))(u(o-r)),c=new f(this),l=new f(a),d=0;r<o;)l.setUint8(d++,c.getUint8(r++));return a}}),n(51)("ArrayBuffer")},function(t,e,n){"use strict";var r=n(175),o=n(62);n(84)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(o(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r,o,a,i,s=n(56),u=n(5),c=n(30),l=n(70),p=n(0),h=n(8),f=n(18),d=n(50),v=n(49),m=n(85),g=n(107).set,y=n(106)(),b=n(105),w=n(181),x=n(180),k=u.TypeError,E=u.process,S=u.Promise,T="process"==l(E),O=function(){},_=o=b.f,A=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(10)("species")]=function(t){t(O,O)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof e}catch(t){}}(),C=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,o=1==t._s,a=0,i=function(e){var n,a,i=o?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{i?(o||(2==t._h&&R(t),t._h=1),!0===i?n=r:(c&&c.enter(),n=i(r),c&&c.exit()),n===e.promise?u(k("Promise-chain cycle")):(a=C(n))?a.call(n,s,u):s(n)):u(r)}catch(t){u(t)}};n.length>a;)i(n[a++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){g.call(u,function(){var e,n,r,o=t._v,a=P(t);if(a&&(e=w(function(){T?E.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=T||P(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},P=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){g.call(u,function(){var e;T?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},D=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw k("Promise can't be resolved itself");(e=C(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(D,r,1),c(I,r,1))}catch(t){I.call(r,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){I.call({_w:n,_d:!1},t)}}};A||(S=function(t){d(this,S,"Promise","_h"),f(t),r.call(this);try{t(c(D,this,1),c(I,this,1))}catch(t){I.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(48)(S.prototype,{then:function(t,e){var n=_(m(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new r;this.promise=t,this.resolve=c(D,t,1),this.reject=c(I,t,1)},b.f=_=function(t){return t===S||t===i?new a(t):o(t)}),p(p.G+p.W+p.F*!A,{Promise:S}),n(65)(S,"Promise"),n(51)("Promise"),i=n(36).Promise,p(p.S+p.F*!A,"Promise",{reject:function(t){var e=_(this);return(0,e.reject)(t),e.promise}}),p(p.S+p.F*(s||!A),"Promise",{resolve:function(t){return x(s&&this===i?S:this,t)}}),p(p.S+p.F*!(A&&n(88)(function(t){S.all(t).catch(O)})),"Promise",{all:function(t){var e=this,n=_(e),r=n.resolve,o=n.reject,a=w(function(){var n=[],a=0,i=1;v(t,!1,function(t){var s=a++,u=!1;n.push(void 0),i++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--i||r(n))},o)}),--i||r(n)});return a.e&&o(a.v),n.promise},race:function(t){var e=this,n=_(e),r=n.reject,o=w(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e,n){n(86)("split",2,function(t,e,r){"use strict";var o=n(89),a=r,i=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!o(t))return a.call(n,t,e);var r,u,c,l,p,h=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,f+"g");for(s||(r=new RegExp("^"+m.source+"$(?!\\s)",f));(u=m.exec(n))&&!((c=u.index+u[0].length)>d&&(h.push(n.slice(d,u.index)),!s&&u.length>1&&u[0].replace(r,function(){for(p=1;p<arguments.length-2;p++)void 0===arguments[p]&&(u[p]=void 0)}),u.length>1&&u.index<n.length&&i.apply(h,u.slice(1)),l=u[0].length,d=c,h.length>=v));)m.lastIndex===u.index&&m.lastIndex++;return d===n.length?!l&&m.test("")||h.push(""):h.push(n.slice(d)),h.length>v?h.slice(0,v):h}}else"0".split(void 0,0).length&&(r=function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)});return[function(n,o){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a,o):r.call(String(a),n,o)},r]})},function(t,e,n){n(86)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(86)("replace",2,function(t,e,n){return[function(r,o){"use strict";var a=t(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,a,o):n.call(String(a),r,o)},n]})},function(t,e,n){n(86)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){"use strict";n(182);var r=n(4),o=n(87),a=n(14),i=/./.toString,s=function(t){n(21)(RegExp.prototype,"toString",t,!0)};n(6)(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?o.call(t):void 0)}):"toString"!=i.name&&s(function(){return i.call(this)})},function(t,e,n){var r=n(5),o=n(122),a=n(13).f,i=n(52).f,s=n(89),u=n(87),c=r.RegExp,l=c,p=c.prototype,h=/a/g,f=/a/g,d=new c(h)!==h;if(n(14)&&(!d||n(6)(function(){return f[n(10)("match")]=!1,c(h)!=h||c(f)==f||"/a/i"!=c(h,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),a=void 0===e;return!n&&r&&t.constructor===c&&a?t:o(d?new l(r&&!a?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&a?u.call(t):e),n?this:p,c)};for(var v=function(t){t in c||a(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},m=i(l),g=0;m.length>g;)v(m[g++]);p.constructor=c,c.prototype=p,n(21)(r,"RegExp",c)}n(51)("RegExp")},function(t,e,n){n(51)("Array")},function(t,e,n){"use strict";var r=n(0),o=n(31)(6),a="findIndex",i=!0;a in[]&&Array(1)[a](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(43)(a)},function(t,e,n){"use strict";var r=n(0),o=n(31)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(43)("find")},function(t,e,n){var r=n(0);r(r.P,"Array",{fill:n(109)}),n(43)("fill")},function(t,e,n){var r=n(0);r(r.P,"Array",{copyWithin:n(184)}),n(43)("copyWithin")},function(t,e,n){"use strict";var r=n(0),o=n(27),a=n(33),i=n(12),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(28)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=o(this),n=i(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){"use strict";var r=n(0),o=n(92)(!1),a=[].indexOf,i=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(i||!n(28)(a)),"Array",{indexOf:function(t){return i?a.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),o=n(185);r(r.P+r.F*!n(28)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(0),o=n(185);r(r.P+r.F*!n(28)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(0),o=n(31)(4);r(r.P+r.F*!n(28)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),o=n(31)(3);r(r.P+r.F*!n(28)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),o=n(31)(2);r(r.P+r.F*!n(28)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),o=n(31)(1);r(r.P+r.F*!n(28)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var r=n(8),o=n(90),a=n(10)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(0),o=n(31)(0),a=n(28)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(0),o=n(18),a=n(17),i=n(6),s=[].sort,u=[1,2,3];r(r.P+r.F*(i(function(){u.sort(void 0)})||!i(function(){u.sort(null)})||!n(28)(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),o(t))}})},function(t,e,n){"use strict";var r=n(0),o=n(125),a=n(29),i=n(54),s=n(12),u=[].slice;r(r.P+r.F*n(6)(function(){o&&u.call(o)}),"Array",{slice:function(t,e){var n=s(this.length),r=a(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var o=i(t,n),c=i(e,n),l=s(c-o),p=new Array(l),h=0;h<l;h++)p[h]="String"==r?this.charAt(o+h):this[o+h];return p}})},function(t,e,n){"use strict";var r=n(0),o=n(27),a=[].join;r(r.P+r.F*(n(72)!=Object||!n(28)(a)),"Array",{join:function(t){return a.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(0),o=n(112);r(r.S+r.F*n(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(30),o=n(0),a=n(17),i=n(186),s=n(113),u=n(12),c=n(112),l=n(111);o(o.S+o.F*!n(88)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,p,h=a(t),f="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,g=0,y=l(h);if(m&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(n=new f(e=u(h.length));e>g;g++)c(n,g,m?v(h[g],g):h[g]);else for(p=y.call(h),n=new f;!(o=p.next()).done;g++)c(n,g,m?i(p,v,[o.value,g],!0):o.value);return n.length=g,n}})},function(t,e,n){var r=n(0);r(r.S,"Array",{isArray:n(90)})},function(t,e,n){"use strict";var r=n(4),o=n(35);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(r(this),"number"!=t)}},function(t,e,n){var r=n(10)("toPrimitive"),o=Date.prototype;r in o||n(22)(o,r,n(415))},function(t,e,n){var r=Date.prototype,o=r.toString,a=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(21)(r,"toString",function(){var t=a.call(this);return t==t?o.call(this):"Invalid Date"})},function(t,e,n){"use strict";var r=n(6),o=Date.prototype.getTime,a=Date.prototype.toISOString,i=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!r(function(){a.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())+"."+(n>99?n:"0"+i(n))+"Z"}:a},function(t,e,n){var r=n(0),o=n(418);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,n){"use strict";var r=n(0),o=n(17),a=n(35);r(r.P+r.F*n(6)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";n(20)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){"use strict";n(20)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(20)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(20)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(20)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(20)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(20)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(20)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(20)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(20)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(20)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(20)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(20)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";var r=n(0),o=n(12),a=n(115),i="".startsWith;r(r.P+r.F*n(114)("startsWith"),"String",{startsWith:function(t){var e=a(this,t,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return i?i.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(0);r(r.P,"String",{repeat:n(121)})},function(t,e,n){"use strict";var r=n(0),o=n(115);r(r.P+r.F*n(114)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),o=n(12),a=n(115),i="".endsWith;r(r.P+r.F*n(114)("endsWith"),"String",{endsWith:function(t){var e=a(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(e.length),s=void 0===n?r:Math.min(o(n),r),u=String(t);return i?i.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(0),o=n(118)(!1);r(r.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(118)(!0);n(117)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";n(64)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){var r=n(0),o=n(27),a=n(12);r(r.S,"String",{raw:function(t){for(var e=o(t.raw),n=a(e.length),r=arguments.length,i=[],s=0;n>s;)i.push(String(e[s++])),s<r&&i.push(String(arguments[s]));return i.join("")}})},function(t,e,n){var r=n(0),o=n(54),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(0);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(0),o=n(119),a=Math.exp;r(r.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(a(t)+a(-t))}})},function(t,e,n){var r=n(0),o=n(119),a=Math.exp;r(r.S+r.F*n(6)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{sign:n(120)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{log1p:n(188)})},function(t,e,n){var r=n(0);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(0),o=Math.imul;r(r.S+r.F*n(6)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var n=+t,r=+e,o=65535&n,a=65535&r;return 0|o*a+((65535&n>>>16)*a+o*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0),o=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,a=0,i=0,s=arguments.length,u=0;i<s;)u<(n=o(arguments[i++]))?(a=a*(r=u/n)*r+1,u=n):a+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(a)}})},function(t,e,n){var r=n(0);r(r.S,"Math",{fround:n(187)})},function(t,e,n){var r=n(0),o=n(119);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,n){var r=n(0),o=Math.exp;r(r.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var r=n(0);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(0),o=n(120);r(r.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(0),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(0),o=n(188),a=Math.sqrt,i=Math.acosh;r(r.S+r.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+a(t-1)*a(t+1))}})},function(t,e,n){var r=n(0),o=n(192);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,n){var r=n(0),o=n(191);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(0),o=n(189),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return o(t)&&a(t)<=9007199254740991}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0);r(r.S,"Number",{isInteger:n(189)})},function(t,e,n){var r=n(0),o=n(5).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){"use strict";var r=n(0),o=n(6),a=n(190),i=1..toPrecision;r(r.P+r.F*(o(function(){return"1"!==i.call(1,void 0)})||!o(function(){i.call({})})),"Number",{toPrecision:function(t){var e=a(this,"Number#toPrecision: incorrect invocation!");return void 0===t?i.call(e):i.call(e,t)}})},function(t,e,n){"use strict";var r=n(0),o=n(33),a=n(190),i=n(121),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",p=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+i.call("0",7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2==1?d(t,e-1,n*t):d(t*t,e/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(6)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=a(this,l),c=o(t),v="",m="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*d(2,69,1))-69)<0?u*d(2,-e,1):u/d(2,e,1),n*=4503599627370496,(e=52-e)>0){for(p(0,n),r=c;r>=7;)p(1e7,0),r-=7;for(p(d(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),p(1,1),h(2),m=f()}else p(0,n),p(1<<-e,0),m=f()+i.call("0",c);return m=c>0?v+((s=m.length)<=c?"0."+i.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c)):v+m}})},function(t,e,n){"use strict";var r=n(5),o=n(23),a=n(29),i=n(122),s=n(35),u=n(6),c=n(52).f,l=n(26).f,p=n(13).f,h=n(64).trim,f=r.Number,d=f,v=f.prototype,m="Number"==a(n(53)(v)),g="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,a=(e=g?e.trim():h(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var i,u=e.slice(2),c=0,l=u.length;c<l;c++)if((i=u.charCodeAt(c))<48||i>o)return NaN;return parseInt(u,r)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(m?u(function(){v.valueOf.call(n)}):"Number"!=a(n))?i(new d(y(e)),n,f):y(e)};for(var b,w=n(14)?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)o(d,b=w[x])&&!o(f,b)&&p(f,b,l(d,b));f.prototype=v,v.constructor=f,n(21)(r,"Number",f)}},function(t,e,n){var r=n(0),o=n(191);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(t,e,n){var r=n(0),o=n(192);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(t,e,n){"use strict";var r=n(8),o=n(25),a=n(10)("hasInstance"),i=Function.prototype;a in i||n(13).f(i,a,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(13).f,o=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in o||n(14)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},function(t,e,n){var r=n(0);r(r.P,"Function",{bind:n(194)})},function(t,e,n){"use strict";var r=n(70),o={};o[n(10)("toStringTag")]="z",o+""!="[object z]"&&n(21)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(124).set})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(0);r(r.S,"Object",{is:n(480)})},function(t,e,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(195)})},function(t,e,n){var r=n(8);n(32)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(8);n(32)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(8);n(32)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(8),o=n(44).onFreeze;n(32)("preventExtensions",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){var r=n(8),o=n(44).onFreeze;n(32)("seal",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){var r=n(8),o=n(44).onFreeze;n(32)("freeze",function(t){return function(e){return t&&r(e)?t(o(e)):e}})},function(t,e,n){n(32)("getOwnPropertyNames",function(){return n(196).f})},function(t,e,n){var r=n(17),o=n(55);n(32)("keys",function(){return function(t){return o(r(t))}})},function(t,e,n){var r=n(17),o=n(25);n(32)("getPrototypeOf",function(){return function(t){return o(r(t))}})},function(t,e,n){var r=n(27),o=n(26).f;n(32)("getOwnPropertyDescriptor",function(){return function(t,e){return o(r(t),e)}})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(14),"Object",{defineProperties:n(197)})},function(t,e,n){var r=n(0);r(r.S+r.F*!n(14),"Object",{defineProperty:n(13).f})},function(t,e,n){var r=n(0);r(r.S,"Object",{create:n(53)})},function(t,e,n){var r=n(55),o=n(91),a=n(71);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var i,s=n(t),u=a.f,c=0;s.length>c;)u.call(t,i=s[c++])&&e.push(i);return e}},function(t,e,n){"use strict";var r=n(5),o=n(23),a=n(14),i=n(0),s=n(21),u=n(44).KEY,c=n(6),l=n(93),p=n(65),h=n(57),f=n(10),d=n(199),v=n(128),m=n(496),g=n(90),y=n(4),b=n(8),w=n(27),x=n(35),k=n(58),E=n(53),S=n(196),T=n(26),O=n(13),_=n(55),A=T.f,C=O.f,N=S.f,M=r.Symbol,P=r.JSON,R=P&&P.stringify,I=f("_hidden"),D=f("toPrimitive"),F={}.propertyIsEnumerable,B=l("symbol-registry"),L=l("symbols"),z=l("op-symbols"),j=Object.prototype,V="function"==typeof M,G=r.QObject,U=!G||!G.prototype||!G.prototype.findChild,q=a&&c(function(){return 7!=E(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(j,e);r&&delete j[e],C(t,e,n),r&&t!==j&&C(j,e,r)}:C,W=function(t){var e=L[t]=E(M.prototype);return e._k=t,e},X=V&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},K=function(t,e,n){return t===j&&K(z,e,n),y(t),e=x(e,!0),y(n),o(L,e)?(n.enumerable?(o(t,I)&&t[I][e]&&(t[I][e]=!1),n=E(n,{enumerable:k(0,!1)})):(o(t,I)||C(t,I,k(1,{})),t[I][e]=!0),q(t,e,n)):C(t,e,n)},H=function(t,e){y(t);for(var n,r=m(e=w(e)),o=0,a=r.length;a>o;)K(t,n=r[o++],e[n]);return t},Q=function(t){var e=F.call(this,t=x(t,!0));return!(this===j&&o(L,t)&&!o(z,t))&&(!(e||!o(this,t)||!o(L,t)||o(this,I)&&this[I][t])||e)},Y=function(t,e){if(t=w(t),e=x(e,!0),t!==j||!o(L,e)||o(z,e)){var n=A(t,e);return!n||!o(L,e)||o(t,I)&&t[I][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=N(w(t)),r=[],a=0;n.length>a;)o(L,e=n[a++])||e==I||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===j,r=N(n?z:w(t)),a=[],i=0;r.length>i;)!o(L,e=r[i++])||n&&!o(j,e)||a.push(L[e]);return a};V||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===j&&e.call(z,n),o(this,I)&&o(this[I],t)&&(this[I][t]=!1),q(this,t,k(1,n))};return a&&U&&q(j,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",function(){return this._k}),T.f=Y,O.f=K,n(52).f=S.f=J,n(71).f=Q,n(91).f=Z,a&&!n(56)&&s(j,"propertyIsEnumerable",Q,!0),d.f=function(t){return W(f(t))}),i(i.G+i.W+i.F*!V,{Symbol:M});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)f($[tt++]);for(var et=_(f.store),nt=0;et.length>nt;)v(et[nt++]);i(i.S+i.F*!V,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=M(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),i(i.S+i.F*!V,"Object",{create:function(t,e){return void 0===e?E(t):H(E(t),e)},defineProperty:K,defineProperties:H,getOwnPropertyDescriptor:Y,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),P&&i(i.S+i.F*(!V||c(function(){var t=M();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(b(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,R.apply(P,r)}}),M.prototype[D]||n(22)(M.prototype,D,M.prototype.valueOf),p(M,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(t,e,n){n(497),n(495),n(494),n(493),n(492),n(491),n(490),n(489),n(488),n(487),n(486),n(485),n(484),n(483),n(482),n(481),n(479),n(478),n(477),n(476),n(475),n(474),n(473),n(472),n(471),n(470),n(469),n(468),n(467),n(466),n(465),n(464),n(463),n(462),n(461),n(460),n(459),n(458),n(457),n(456),n(455),n(454),n(453),n(452),n(451),n(450),n(449),n(448),n(447),n(446),n(445),n(444),n(443),n(442),n(441),n(440),n(439),n(438),n(437),n(436),n(435),n(434),n(433),n(432),n(431),n(430),n(429),n(428),n(427),n(426),n(425),n(424),n(423),n(422),n(421),n(420),n(419),n(417),n(416),n(414),n(413),n(412),n(411),n(410),n(409),n(408),n(406),n(405),n(404),n(403),n(402),n(401),n(400),n(399),n(398),n(397),n(396),n(395),n(394),n(108),n(393),n(392),n(182),n(391),n(390),n(389),n(388),n(387),n(179),n(177),n(176),n(386),n(385),n(384),n(383),n(382),n(381),n(380),n(379),n(378),n(377),n(376),n(375),n(374),n(373),n(372),n(371),n(370),n(369),n(368),n(367),n(366),n(365),n(364),n(363),n(362),n(361),n(360),n(359),n(358),n(357),n(356),n(355),n(354),n(353),n(352),n(351),n(350),n(349),n(348),n(347),n(346),n(345),n(344),n(343),n(342),n(341),n(340),n(339),n(338),n(337),n(336),n(335),n(334),n(333),n(332),n(331),n(330),n(329),n(328),n(327),n(326),n(325),n(324),n(323),n(322),n(321),n(320),n(319),n(318),n(317),n(316),n(315),n(314),n(313),n(312),n(311),n(310),n(309),n(308),n(307),n(306),n(305),n(304),n(303),n(302),t.exports=n(36)},function(t,e,n){"use strict";(function(t){if(n(498),n(301),n(300),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function r(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&r(Array,t,Function.call.bind([][t]))})}).call(this,n(73))},function(t,e,n){n(499),t.exports=n(297)}])});